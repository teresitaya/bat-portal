import{a as m,b as A,c as Vn,d as an,e as ma,f as p}from"./chunk-42NE2CY3.js";function nS(n,e){return Object.is(n,e)}var Ve=null,vl=!1,Cl=1,Ai=Symbol("SIGNAL");function ce(n){let e=Ve;return Ve=n,e}function cy(){return Ve}var El={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ly(n){if(vl)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(n);let e=Ve.nextProducerIndex++;if(Tl(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==n&&ya(Ve)){let t=Ve.producerNode[e];Il(t,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==n&&(Ve.producerNode[e]=n,Ve.producerIndexOfThis[e]=ya(Ve)?fy(n,Ve,e):0),Ve.producerLastReadVersion[e]=n.version}function rS(){Cl++}function oS(n){if(!(ya(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cl)){if(!n.producerMustRecompute(n)&&!bh(n)){n.dirty=!1,n.lastCleanEpoch=Cl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Cl}}function uy(n){if(n.liveConsumerNode===void 0)return;let e=vl;vl=!0;try{for(let t of n.liveConsumerNode)t.dirty||iS(t)}finally{vl=e}}function dy(){return Ve?.consumerAllowSignalWrites!==!1}function iS(n){n.dirty=!0,uy(n),n.consumerMarkedDirty?.(n)}function Ah(n){return n&&(n.nextProducerIndex=0),ce(n)}function hy(n,e){if(ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ya(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Il(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function bh(n){Tl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(oS(t),r!==t.version))return!0}return!1}function Dh(n){if(Tl(n),ya(n))for(let e=0;e<n.producerNode.length;e++)Il(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fy(n,e,t){if(py(n),n.liveConsumerNode.length===0&&gy(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=fy(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Il(n,e){if(py(n),n.liveConsumerNode.length===1&&gy(n))for(let r=0;r<n.producerNode.length;r++)Il(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Tl(o),o.producerIndexOfThis[r]=e}}function ya(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Tl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function py(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function gy(n){return n.producerNode!==void 0}function sS(){throw new Error}var my=sS;function yy(){my()}function vy(n){my=n}var aS=null;function Cy(n){let e=Object.create(Iy);e.value=n;let t=()=>(ly(e),e.value);return t[Ai]=e,t}function _h(n,e){dy()||yy(),n.equal(n.value,e)||(n.value=e,cS(n))}function Ey(n,e){dy()||yy(),_h(n,e(n.value))}var Iy=A(m({},El),{equal:nS,value:void 0});function cS(n){n.version++,rS(),uy(n),aS?.()}function $(n){return typeof n=="function"}function bi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wl=bi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function va(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if($(r))try{r()}catch(i){e=i instanceof wl?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Ty(i)}catch(s){e=e??[],s instanceof wl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ty(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&va(t,e)}remove(e){let{_finalizers:t}=this;t&&va(t,e),e instanceof n&&e._removeParent(this)}};Pe.EMPTY=(()=>{let n=new Pe;return n.closed=!0,n})();var Rh=Pe.EMPTY;function Sl(n){return n instanceof Pe||n&&"closed"in n&&$(n.remove)&&$(n.add)&&$(n.unsubscribe)}function Ty(n){$(n)?n():n.unsubscribe()}var cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Di={setTimeout(n,e,...t){let{delegate:r}=Di;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Di;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Al(n){Di.setTimeout(()=>{let{onUnhandledError:e}=cn;if(e)e(n);else throw n})}function Ca(){}var wy=Mh("C",void 0,void 0);function Sy(n){return Mh("E",void 0,n)}function Ay(n){return Mh("N",n,void 0)}function Mh(n,e,t){return{kind:n,value:e,error:t}}var co=null;function _i(n){if(cn.useDeprecatedSynchronousErrorHandling){let e=!co;if(e&&(co={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=co;if(co=null,t)throw r}}else n()}function by(n){cn.useDeprecatedSynchronousErrorHandling&&co&&(co.errorThrown=!0,co.error=n)}var lo=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sl(e)&&e.add(this)):this.destination=dS}static create(e,t,r){return new Ri(e,t,r)}next(e){this.isStopped?kh(Ay(e),this):this._next(e)}error(e){this.isStopped?kh(Sy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kh(wy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lS=Function.prototype.bind;function Nh(n,e){return lS.call(n,e)}var Oh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){bl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){bl(r)}else bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bl(t)}}},Ri=class extends lo{constructor(e,t,r){super();let o;if($(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&cn.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Nh(e.next,i),error:e.error&&Nh(e.error,i),complete:e.complete&&Nh(e.complete,i)}):o=e}this.destination=new Oh(o)}};function bl(n){cn.useDeprecatedSynchronousErrorHandling?by(n):Al(n)}function uS(n){throw n}function kh(n,e){let{onStoppedNotification:t}=cn;t&&Di.setTimeout(()=>t(n,e))}var dS={closed:!0,next:Ca,error:uS,complete:Ca};var Mi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function jt(n){return n}function xh(...n){return Ph(n)}function Ph(n){return n.length===0?jt:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=fS(t)?t:new Ri(t,r,o);return _i(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Dy(r),new r((o,i)=>{let s=new Ri({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Mi](){return this}pipe(...t){return Ph(t)(this)}toPromise(t){return t=Dy(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function Dy(n){var e;return(e=n??cn.Promise)!==null&&e!==void 0?e:Promise}function hS(n){return n&&$(n.next)&&$(n.error)&&$(n.complete)}function fS(n){return n&&n instanceof lo||hS(n)&&Sl(n)}function Lh(n){return $(n?.lift)}function re(n){return e=>{if(Lh(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(n,e,t,r,o){return new Fh(n,e,t,r,o)}var Fh=class extends lo{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ni(){return re((n,e)=>{let t=null;n._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ki=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Lh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let t=this.getSubject();e.add(this.source.subscribe(oe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Ni()(this)}};var _y=bi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Dl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new _y}next(t){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Rh:(this.currentObservers=null,i.push(t),new Pe(()=>{this.currentObservers=null,va(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new Dl(e,t),n})(),Dl=class extends Ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Rh}};var $e=class extends Ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Uh={now(){return(Uh.delegate||Date).now()},delegate:void 0};var Ea=class extends Ne{constructor(e=1/0,t=1/0,r=Uh){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var wt=new de(n=>n.complete());function Ry(n){return n&&$(n.schedule)}function My(n){return n[n.length-1]}function Ny(n){return $(My(n))?n.pop():void 0}function yr(n){return Ry(My(n))?n.pop():void 0}function Oy(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function ky(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uo(n){return this instanceof uo?(this.v=n,this):new uo(n)}function xy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(v){return Promise.resolve(v).then(g,d)}}function a(g,v){r[g]&&(o[g]=function(I){return new Promise(function(S,_){i.push([g,I,S,_])>1||c(g,I)})},v&&(o[g]=v(o[g])))}function c(g,v){try{l(r[g](v))}catch(I){f(i[0][3],I)}}function l(g){g.value instanceof uo?Promise.resolve(g.value.v).then(u,d):f(i[0][2],g)}function u(g){c("next",g)}function d(g){c("throw",g)}function f(g,v){g(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Py(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ky=="function"?ky(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var _l=n=>n&&typeof n.length=="number"&&typeof n!="function";function Rl(n){return $(n?.then)}function Ml(n){return $(n[Mi])}function Nl(n){return Symbol.asyncIterator&&$(n?.[Symbol.asyncIterator])}function kl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ol=pS();function xl(n){return $(n?.[Ol])}function Pl(n){return xy(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield uo(t.read());if(o)return yield uo(void 0);yield yield uo(r)}}finally{t.releaseLock()}})}function Ll(n){return $(n?.getReader)}function Ze(n){if(n instanceof de)return n;if(n!=null){if(Ml(n))return gS(n);if(_l(n))return mS(n);if(Rl(n))return yS(n);if(Nl(n))return Ly(n);if(xl(n))return vS(n);if(Ll(n))return CS(n)}throw kl(n)}function gS(n){return new de(e=>{let t=n[Mi]();if($(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mS(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function yS(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Al)})}function vS(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Ly(n){return new de(e=>{ES(n,e).catch(t=>e.error(t))})}function CS(n){return Ly(Pl(n))}function ES(n,e){var t,r,o,i;return Oy(this,void 0,void 0,function*(){try{for(t=Py(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function St(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Fl(n,e=0){return re((t,r)=>{t.subscribe(oe(r,o=>St(r,n,()=>r.next(o),e),()=>St(r,n,()=>r.complete(),e),o=>St(r,n,()=>r.error(o),e)))})}function Ul(n,e=0){return re((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Fy(n,e){return Ze(n).pipe(Ul(e),Fl(e))}function Uy(n,e){return Ze(n).pipe(Ul(e),Fl(e))}function By(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Hy(n,e){return new de(t=>{let r;return St(t,e,()=>{r=n[Ol](),St(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>$(r?.return)&&r.return()})}function Bl(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{St(t,e,()=>{let r=n[Symbol.asyncIterator]();St(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function jy(n,e){return Bl(Pl(n),e)}function Vy(n,e){if(n!=null){if(Ml(n))return Fy(n,e);if(_l(n))return By(n,e);if(Rl(n))return Uy(n,e);if(Nl(n))return Bl(n,e);if(xl(n))return Hy(n,e);if(Ll(n))return jy(n,e)}throw kl(n)}function le(n,e){return e?Vy(n,e):Ze(n)}function k(...n){let e=yr(n);return le(n,e)}function Oi(n,e){let t=$(n)?n:()=>n,r=o=>o.error(t());return new de(e?o=>e.schedule(r,0,o):r)}function Bh(n){return!!n&&(n instanceof de||$(n.lift)&&$(n.subscribe))}var $n=bi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return re((t,r)=>{let o=0;t.subscribe(oe(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:IS}=Array;function TS(n,e){return IS(e)?n(...e):n(e)}function $y(n){return G(e=>TS(n,e))}var{isArray:wS}=Array,{getPrototypeOf:SS,prototype:AS,keys:bS}=Object;function Gy(n){if(n.length===1){let e=n[0];if(wS(e))return{args:e,keys:null};if(DS(e)){let t=bS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function DS(n){return n&&typeof n=="object"&&SS(n)===AS}function zy(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function Hl(...n){let e=yr(n),t=Ny(n),{args:r,keys:o}=Gy(n);if(r.length===0)return le([],e);let i=new de(_S(r,e,o?s=>zy(o,s):jt));return t?i.pipe($y(t)):i}function _S(n,e,t=jt){return r=>{qy(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)qy(e,()=>{let l=le(n[c],e),u=!1;l.subscribe(oe(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qy(n,e,t){n?St(t,n,e):e()}function Ky(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},g=I=>l<r?v(I):c.push(I),v=I=>{i&&e.next(I),l++;let S=!1;Ze(t(I,u++)).subscribe(oe(e,_=>{o?.(_),i?g(_):e.next(_)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let _=c.shift();s?St(e,s,()=>v(_)):v(_)}f()}catch(_){e.error(_)}}))};return n.subscribe(oe(e,g,()=>{d=!0,f()})),()=>{a?.()}}function Ge(n,e,t=1/0){return $(e)?Ge((r,o)=>G((i,s)=>e(r,i,o,s))(Ze(n(r,o))),t):(typeof e=="number"&&(t=e),re((r,o)=>Ky(r,o,n,t)))}function Hh(n=1/0){return Ge(jt,n)}function Wy(){return Hh(1)}function xi(...n){return Wy()(le(n,yr(n)))}function jl(n){return new de(e=>{Ze(n()).subscribe(e)})}function At(n,e){return re((t,r)=>{let o=0;t.subscribe(oe(r,i=>n.call(e,i,o++)&&r.next(i)))})}function wn(n){return re((e,t)=>{let r=null,o=!1,i;r=e.subscribe(oe(t,void 0,void 0,s=>{i=Ze(n(s,wn(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function Yy(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(oe(s,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function ln(n,e){return $(e)?Ge(n,e,1):Ge(n,1)}function vr(n){return re((e,t)=>{let r=!1;e.subscribe(oe(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Sn(n){return n<=0?()=>wt:re((e,t)=>{let r=0;e.subscribe(oe(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function jh(n){return G(()=>n)}function Vl(n=RS){return re((e,t)=>{let r=!1;e.subscribe(oe(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function RS(){return new $n}function ho(n){return re((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function An(n,e){let t=arguments.length>=2;return r=>r.pipe(n?At((o,i)=>n(o,i,r)):jt,Sn(1),t?vr(e):Vl(()=>new $n))}function Pi(n){return n<=0?()=>wt:re((e,t)=>{let r=[];e.subscribe(oe(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Vh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?At((o,i)=>n(o,i,r)):jt,Pi(1),t?vr(e):Vl(()=>new $n))}function $h(n,e){return re(Yy(n,e,arguments.length>=2,!0))}function Gh(...n){let e=yr(n);return re((t,r)=>{(e?xi(n,t,e):xi(n,t)).subscribe(r)})}function bt(n,e){return re((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(oe(r,c=>{o?.unsubscribe();let l=0,u=i++;Ze(n(c,u)).subscribe(o=oe(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function zh(n){return re((e,t)=>{Ze(n).subscribe(oe(t,()=>t.complete(),Ca)),!t.closed&&e.subscribe(t)})}function Xe(n,e,t){let r=$(n)||e||t?{next:n,error:e,complete:t}:n;return r?re((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(oe(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):jt}var MS="https://g.co/ng/security#xss",L=class extends Error{constructor(e,t){super(Eu(e,t)),this.code=e}};function Eu(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function xa(n){return{toString:n}.toString()}var $l="__parameters__";function NS(n){return function(...t){if(n){let r=n(...t);for(let o in r)this[o]=r[o]}}}function Nv(n,e,t){return xa(()=>{let r=NS(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty($l)?c[$l]:Object.defineProperty(c,$l,{value:[]})[$l];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function ye(n){for(let e in n)if(n[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function kS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function pt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(pt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function of(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var OS=ye({__forward_ref__:ye});function kv(n){return n.__forward_ref__=kv,n.toString=function(){return pt(this())},n}function Yt(n){return Ov(n)?n():n}function Ov(n){return typeof n=="function"&&n.hasOwnProperty(OS)&&n.__forward_ref__===kv}function R(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function Iu(n){return Qy(n,Pv)||Qy(n,Lv)}function xv(n){return Iu(n)!==null}function Qy(n,e){return n.hasOwnProperty(e)?n[e]:null}function xS(n){let e=n&&(n[Pv]||n[Lv]);return e||null}function Jy(n){return n&&(n.hasOwnProperty(Zy)||n.hasOwnProperty(PS))?n[Zy]:null}var Pv=ye({\u0275prov:ye}),Zy=ye({\u0275inj:ye}),Lv=ye({ngInjectableDef:ye}),PS=ye({ngInjectorDef:ye}),x=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=R({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fv(n){return n&&!!n.\u0275providers}var LS=ye({\u0275cmp:ye}),FS=ye({\u0275dir:ye}),US=ye({\u0275pipe:ye}),BS=ye({\u0275mod:ye}),Jl=ye({\u0275fac:ye}),Ta=ye({__NG_ELEMENT_ID__:ye}),Xy=ye({__NG_ENV_ID__:ye});function Yf(n){return typeof n=="string"?n:n==null?"":String(n)}function HS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yf(n)}function jS(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new L(-200,n)}function Qf(n,e){throw new L(-201,!1)}var W=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(W||{}),sf;function Uv(){return sf}function Dt(n){let e=sf;return sf=n,e}function Bv(n,e,t){let r=Iu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&W.Optional)return null;if(e!==void 0)return e;Qf(n,"Injector")}var VS={},wa=VS,af="__NG_DI_FLAG__",Zl="ngTempTokenPath",$S="ngTokenPath",GS=/\n/gm,zS="\u0275",ev="__source",Bi;function qS(){return Bi}function Cr(n){let e=Bi;return Bi=n,e}function KS(n,e=W.Default){if(Bi===void 0)throw new L(-203,!1);return Bi===null?Bv(n,void 0,e):Bi.get(n,e&W.Optional?null:void 0,e)}function M(n,e=W.Default){return(Uv()||KS)(Yt(n),e)}function T(n,e=W.Default){return M(n,Tu(e))}function Tu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cf(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let o,i=W.Default;for(let s=0;s<r.length;s++){let a=r[s],c=WS(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(M(o,i))}else e.push(M(r))}return e}function Hv(n,e){return n[af]=e,n.prototype[af]=e,n}function WS(n){return n[af]}function YS(n,e,t,r){let o=n[Zl];throw e[ev]&&o.unshift(e[ev]),n.message=QS(`
`+n.message,o,t,r),n[$S]=o,n[Zl]=null,n}function QS(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zS?n.slice(2):n;let o=pt(e);if(Array.isArray(e))o=e.map(pt).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(GS,`
  `)}`}var Jf=Hv(Nv("Optional"),8);var jv=Hv(Nv("SkipSelf"),4);function go(n,e){let t=n.hasOwnProperty(Jl);return t?n[Jl]:null}function JS(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let o=n[r],i=e[r];if(t&&(o=t(o),i=t(i)),i!==o)return!1}return!0}function ZS(n){return n.flat(Number.POSITIVE_INFINITY)}function Zf(n,e){n.forEach(t=>Array.isArray(t)?Zf(t,e):e(t))}function Vv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function XS(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function eA(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function wu(n,e,t){let r=Pa(n,e);return r>=0?n[r|1]=t:(r=~r,eA(n,r,e,t)),r}function qh(n,e){let t=Pa(n,e);if(t>=0)return n[t|1]}function Pa(n,e){return tA(n,e,1)}function tA(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var ji={},_t=[],Vi=new x(""),$v=new x("",-1),Gv=new x(""),eu=class{get(e,t=wa){if(t===wa){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return t}},zv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zv||{}),_n=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(_n||{}),Tr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Tr||{});function nA(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function lf(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];oA(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function rA(n){return n===3||n===4||n===6}function oA(n){return n.charCodeAt(0)===64}function Sa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?tv(n,t,o,null,e[++r]):tv(n,t,o,null,null))}}return n}function tv(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){if(r===null){o!==null&&(n[i+1]=o);return}else if(r===n[i+1]){n[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),r!==null&&n.splice(i++,0,r),o!==null&&n.splice(i++,0,o)}var qv="ng-template";function iA(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&nA(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Xf(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function Xf(n){return n.type===4&&n.value!==qv}function sA(n,e,t){let r=n.type===4&&!t?qv:n.value;return e===r}function aA(n,e,t){let r=4,o=n.attrs,i=o!==null?uA(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!un(r)&&!un(c))return!1;if(s&&un(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!sA(n,c,t)||c===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(o===null||!iA(n,o,c,t)){if(un(r))return!1;s=!0}}else{let l=e[++a],u=cA(c,o,Xf(n),t);if(u===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&l!==d){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function cA(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return dA(e,n)}function Kv(n,e,t=!1){for(let r=0;r<e.length;r++)if(aA(n,e[r],t))return!0;return!1}function lA(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function uA(n){for(let e=0;e<n.length;e++){let t=n[e];if(rA(t))return e}return n.length}function dA(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function hA(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let o=0;o<n.length;o++)if(n[o]!==r[o])continue e;return!0}}return!1}function nv(n,e){return n?":not("+e.trim()+")":e}function fA(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!un(s)&&(e+=nv(i,o),o=""),r=s,i=i||!un(r);t++}return o!==""&&(e+=nv(i,o)),e}function pA(n){return n.map(fA).join(",")}function gA(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!un(o))break;o=i}r++}return{attrs:e,classes:t}}function se(n){return xa(()=>{let e=Xv(n),t=A(m({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||_n.Emulated,styles:n.styles||_t,_:null,schemas:n.schemas||null,tView:null,id:""});eC(t);let r=n.dependencies;return t.directiveDefs=ov(r,!1),t.pipeDefs=ov(r,!0),t.id=vA(t),t})}function mA(n){return mo(n)||Yv(n)}function yA(n){return n!==null}function it(n){return xa(()=>({type:n.type,bootstrap:n.bootstrap||_t,declarations:n.declarations||_t,imports:n.imports||_t,exports:n.exports||_t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function rv(n,e){if(n==null)return ji;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a=Tr.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),e?(t[i]=a!==Tr.None?[r,a]:r,e[i]=s):t[i]=r}return t}function mt(n){return xa(()=>{let e=Xv(n);return eC(e),e})}function Wv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function mo(n){return n[LS]||null}function Yv(n){return n[FS]||null}function Qv(n){return n[US]||null}function Jv(n){let e=mo(n)||Yv(n)||Qv(n);return e!==null?e.standalone:!1}function Zv(n,e){let t=n[BS]||null;if(!t&&e===!0)throw new Error(`Type ${pt(n)} does not have '\u0275mod' property.`);return t}function Xv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ji,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||_t,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rv(n.inputs,e),outputs:rv(n.outputs),debugInfo:null}}function eC(n){n.features?.forEach(e=>e(n))}function ov(n,e){if(!n)return null;let t=e?Qv:mA;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(yA)}function vA(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ji(n){return{\u0275providers:n}}function CA(...n){return{\u0275providers:tC(!0,n),\u0275fromNgModule:!0}}function tC(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return Zf(e,s=>{let a=s;uf(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&nC(o,i),t}function nC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];ep(o,i=>{e(i,r)})}}function uf(n,e,t,r){if(n=Yt(n),!n)return!1;let o=null,i=Jy(n),s=!i&&mo(n);if(!i&&!s){let c=n.ngModule;if(i=Jy(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)uf(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{Zf(i.imports,u=>{uf(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&nC(l,e)}if(!a){let l=go(o)||(()=>new o);e({provide:o,useFactory:l,deps:_t},o),e({provide:Gv,useValue:o,multi:!0},o),e({provide:Vi,useValue:()=>M(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;ep(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function ep(n,e){for(let t of n)Fv(t)&&(t=t.\u0275providers),Array.isArray(t)?ep(t,e):e(t)}var EA=ye({provide:String,useValue:ye});function rC(n){return n!==null&&typeof n=="object"&&EA in n}function IA(n){return!!(n&&n.useExisting)}function TA(n){return!!(n&&n.useFactory)}function df(n){return typeof n=="function"}var Su=new x(""),ql={},wA={},Kh;function tp(){return Kh===void 0&&(Kh=new eu),Kh}var Mt=class{},Aa=class extends Mt{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ff(e,s=>this.processProvider(s)),this.records.set($v,Li(void 0,this)),o.has("environment")&&this.records.set(Mt,Li(void 0,this));let i=this.records.get(Su);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Gv,_t,W.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Cr(this),r=Dt(void 0),o;try{return e()}finally{Cr(t),Dt(r)}}get(e,t=wa,r=W.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xy))return e[Xy](this);r=Tu(r);let o,i=Cr(this),s=Dt(void 0);try{if(!(r&W.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=RA(e)&&Iu(e);l&&this.injectableDefInScope(l)?c=Li(hf(e),ql):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&W.Self?tp():this.parent;return t=r&W.Optional&&t===wa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Zl]=a[Zl]||[]).unshift(pt(e)),i)throw a;return YS(a,e,"R3InjectorError",this.source)}else throw a}finally{Dt(s),Cr(i)}}resolveInjectorInitializers(){let e=ce(null),t=Cr(this),r=Dt(void 0),o;try{let i=this.get(Vi,_t,W.Self);for(let s of i)s()}finally{Cr(t),Dt(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(e){e=Yt(e);let t=df(e)?e:Yt(e&&e.provide),r=AA(e);if(!df(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Li(void 0,ql,!0),o.factory=()=>cf(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ce(null);try{return t.value===ql&&(t.value=wA,t.value=t.factory()),typeof t.value=="object"&&t.value&&_A(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function hf(n){let e=Iu(n),t=e!==null?e.factory:go(n);if(t!==null)return t;if(n instanceof x)throw new L(204,!1);if(n instanceof Function)return SA(n);throw new L(204,!1)}function SA(n){if(n.length>0)throw new L(204,!1);let t=xS(n);return t!==null?()=>t.factory(n):()=>new n}function AA(n){if(rC(n))return Li(void 0,n.useValue);{let e=bA(n);return Li(e,ql)}}function bA(n,e,t){let r;if(df(n)){let o=Yt(n);return go(o)||hf(o)}else if(rC(n))r=()=>Yt(n.useValue);else if(TA(n))r=()=>n.useFactory(...cf(n.deps||[]));else if(IA(n))r=()=>M(Yt(n.useExisting));else{let o=Yt(n&&(n.useClass||n.provide));if(DA(n))r=()=>new o(...cf(n.deps));else return go(o)||hf(o)}return r}function Li(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function DA(n){return!!n.deps}function _A(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function RA(n){return typeof n=="function"||typeof n=="object"&&n instanceof x}function ff(n,e){for(let t of n)Array.isArray(t)?ff(t,e):t&&Fv(t)?ff(t.\u0275providers,e):e(t)}function hn(n,e){n instanceof Aa&&n.assertNotDestroyed();let t,r=Cr(n),o=Dt(void 0);try{return e()}finally{Cr(r),Dt(o)}}function MA(){return Uv()!==void 0||qS()!=null}function NA(n){return typeof n=="function"}var qn=0,z=1,U=2,ut=3,dn=4,Nt=5,ba=6,tu=7,Jt=8,$i=9,Gn=10,Fe=11,Da=12,iv=13,Zi=14,Zt=15,yo=16,Fi=17,zn=18,Au=19,oC=20,Er=21,Wh=22,Qt=23,gt=25,iC=1;var vo=7,nu=8,Gi=9,Rt=10,ru=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ru||{});function Ir(n){return Array.isArray(n)&&typeof n[iC]=="object"}function Kn(n){return Array.isArray(n)&&n[iC]===!0}function np(n){return(n.flags&4)!==0}function bu(n){return n.componentOffset>-1}function Du(n){return(n.flags&1)===1}function Co(n){return!!n.template}function pf(n){return(n[U]&512)!==0}var gf=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function sC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function La(){return aC}function aC(n){return n.type.prototype.ngOnChanges&&(n.setInput=OA),kA}La.ngInherit=!0;function kA(){let n=lC(this),e=n?.current;if(e){let t=n.previous;if(t===ji)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function OA(n,e,t,r,o){let i=this.declaredInputs[r],s=lC(n)||xA(n,{previous:ji,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new gf(l&&l.currentValue,t,c===ji),sC(n,e,o,t)}var cC="__ngSimpleChanges__";function lC(n){return n[cC]||null}function xA(n,e){return n[cC]=e}var sv=null;var bn=function(n,e,t){sv?.(n,e,t)},uC="svg",PA="math";function Rn(n){for(;Array.isArray(n);)n=n[qn];return n}function dC(n,e){return Rn(e[n])}function Xt(n,e){return Rn(e[n.index])}function rp(n,e){return n.data[e]}function LA(n,e){return n[e]}function Dr(n,e){let t=e[n];return Ir(t)?t:t[qn]}function FA(n){return(n[U]&4)===4}function op(n){return(n[U]&128)===128}function UA(n){return Kn(n[ut])}function zi(n,e){return e==null?null:n[e]}function hC(n){n[Fi]=0}function fC(n){n[U]&1024||(n[U]|=1024,op(n)&&_u(n))}function BA(n,e){for(;n>0;)e=e[Zi],n--;return e}function _a(n){return!!(n[U]&9216||n[Qt]?.dirty)}function mf(n){n[Gn].changeDetectionScheduler?.notify(7),n[U]&64&&(n[U]|=1024),_a(n)&&_u(n)}function _u(n){n[Gn].changeDetectionScheduler?.notify(0);let e=Eo(n);for(;e!==null&&!(e[U]&8192||(e[U]|=8192,!op(e)));)e=Eo(e)}function pC(n,e){if((n[U]&256)===256)throw new L(911,!1);n[Er]===null&&(n[Er]=[]),n[Er].push(e)}function HA(n,e){if(n[Er]===null)return;let t=n[Er].indexOf(e);t!==-1&&n[Er].splice(t,1)}function Eo(n){let e=n[ut];return Kn(e)?e[ut]:e}var Y={lFrame:SC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var gC=!1;function jA(){return Y.lFrame.elementDepthCount}function VA(){Y.lFrame.elementDepthCount++}function $A(){Y.lFrame.elementDepthCount--}function mC(){return Y.bindingsEnabled}function yC(){return Y.skipHydrationRootTNode!==null}function GA(n){return Y.skipHydrationRootTNode===n}function zA(){Y.skipHydrationRootTNode=null}function ie(){return Y.lFrame.lView}function st(){return Y.lFrame.tView}function kt(n){return Y.lFrame.contextLView=n,n[Jt]}function Ot(n){return Y.lFrame.contextLView=null,n}function xt(){let n=vC();for(;n!==null&&n.type===64;)n=n.parent;return n}function vC(){return Y.lFrame.currentTNode}function qA(){let n=Y.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ao(n,e){let t=Y.lFrame;t.currentTNode=n,t.isParent=e}function ip(){return Y.lFrame.isParent}function sp(){Y.lFrame.isParent=!1}function CC(){return gC}function av(n){gC=n}function ap(){let n=Y.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function KA(n){return Y.lFrame.bindingIndex=n}function Ru(){return Y.lFrame.bindingIndex++}function EC(n){let e=Y.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function WA(){return Y.lFrame.inI18n}function YA(n,e){let t=Y.lFrame;t.bindingIndex=t.bindingRootIndex=n,yf(e)}function QA(){return Y.lFrame.currentDirectiveIndex}function yf(n){Y.lFrame.currentDirectiveIndex=n}function JA(n){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function IC(){return Y.lFrame.currentQueryIndex}function cp(n){Y.lFrame.currentQueryIndex=n}function ZA(n){let e=n[z];return e.type===2?e.declTNode:e.type===1?n[Nt]:null}function TC(n,e,t){if(t&W.SkipSelf){let o=e,i=n;for(;o=o.parent,o===null&&!(t&W.Host);)if(o=ZA(i),o===null||(i=i[Zi],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=Y.lFrame=wC();return r.currentTNode=e,r.lView=n,!0}function lp(n){let e=wC(),t=n[z];Y.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function wC(){let n=Y.lFrame,e=n===null?null:n.child;return e===null?SC(n):e}function SC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function AC(){let n=Y.lFrame;return Y.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var bC=AC;function up(){let n=AC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function XA(n){return(Y.lFrame.contextLView=BA(n,Y.lFrame.contextLView))[Jt]}function bo(){return Y.lFrame.selectedIndex}function Io(n){Y.lFrame.selectedIndex=n}function DC(){let n=Y.lFrame;return rp(n.tView,n.selectedIndex)}function _C(){Y.lFrame.currentNamespace=uC}function eb(){return Y.lFrame.currentNamespace}var RC=!0;function Mu(){return RC}function Nu(n){RC=n}function tb(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=aC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function ku(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Kl(n,e,t){MC(n,e,3,t)}function Wl(n,e,t,r){(n[U]&3)===t&&MC(n,e,t,r)}function Yh(n,e){let t=n[U];(t&3)===e&&(t&=16383,t+=1,n[U]=t)}function MC(n,e,t,r){let o=r!==void 0?n[Fi]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Fi]+=65536),(a<i||i==-1)&&(nb(n,t,e,c),n[Fi]=(n[Fi]&4294901760)+c+2),c++}function cv(n,e){bn(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),bn(5,n,e)}}function nb(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[U]>>14<n[Fi]>>16&&(n[U]&3)===e&&(n[U]+=16384,cv(a,i)):cv(a,i)}var Hi=-1,Ra=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function rb(n){return n instanceof Ra}function ob(n){return(n.flags&8)!==0}function ib(n){return(n.flags&16)!==0}var Qh={},vf=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Tu(r);let o=this.injector.get(e,Qh,r);return o!==Qh||t===Qh?o:this.parentInjector.get(e,t,r)}};function NC(n){return n!==Hi}function ou(n){return n&32767}function sb(n){return n>>16}function iu(n,e){let t=sb(n),r=e;for(;t>0;)r=r[Zi],t--;return r}var Cf=!0;function su(n){let e=Cf;return Cf=n,e}var ab=256,kC=ab-1,OC=5,cb=0,Dn={};function lb(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ta)&&(r=t[Ta]),r==null&&(r=t[Ta]=cb++);let o=r&kC,i=1<<o;e.data[n+(o>>OC)]|=i}function xC(n,e){let t=PC(n,e);if(t!==-1)return t;let r=e[z];r.firstCreatePass&&(n.injectorIndex=e.length,Jh(r.data,n),Jh(e,null),Jh(r.blueprint,null));let o=dp(n,e),i=n.injectorIndex;if(NC(o)){let s=ou(o),a=iu(o,e),c=a[z].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function Jh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function PC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function dp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=HC(o),r===null)return Hi;if(t++,o=o[Zi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Hi}function ub(n,e,t){lb(n,e,t)}function LC(n,e,t){if(t&W.Optional||n!==void 0)return n;Qf(e,"NodeInjector")}function FC(n,e,t,r){if(t&W.Optional&&r===void 0&&(r=null),!(t&(W.Self|W.Host))){let o=n[$i],i=Dt(void 0);try{return o?o.get(e,r,t&W.Optional):Bv(e,r,t&W.Optional)}finally{Dt(i)}}return LC(r,e,t)}function UC(n,e,t,r=W.Default,o){if(n!==null){if(e[U]&2048&&!(r&W.Self)){let s=pb(n,e,t,r,Dn);if(s!==Dn)return s}let i=BC(n,e,t,r,Dn);if(i!==Dn)return i}return FC(e,t,r,o)}function BC(n,e,t,r,o){let i=hb(t);if(typeof i=="function"){if(!TC(e,n,r))return r&W.Host?LC(o,t,r):FC(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&W.Optional))Qf(t);else return s}finally{bC()}}else if(typeof i=="number"){let s=null,a=PC(n,e),c=Hi,l=r&W.Host?e[Zt][Nt]:null;for((a===-1||r&W.SkipSelf)&&(c=a===-1?dp(n,e):e[a+8],c===Hi||!uv(r,!1)?a=-1:(s=e[z],a=ou(c),e=iu(c,e)));a!==-1;){let u=e[z];if(lv(i,a,u.data)){let d=db(a,e,t,s,r,l);if(d!==Dn)return d}c=e[a+8],c!==Hi&&uv(r,e[z].data[a+8]===l)&&lv(i,a,e)?(s=u,a=ou(c),e=iu(c,e)):a=-1}}return o}function db(n,e,t,r,o,i){let s=e[z],a=s.data[n+8],c=r==null?bu(a)&&Cf:r!=s&&(a.type&3)!==0,l=o&W.Host&&i===a,u=Yl(a,s,t,c,l);return u!==null?qi(e,s,u,a):Dn}function Yl(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,d=r?a:a+u,f=o?a+u:l;for(let g=d;g<f;g++){let v=s[g];if(g<c&&t===v||g>=c&&v.type===t)return g}if(o){let g=s[c];if(g&&Co(g)&&g.type===t)return c}return null}function qi(n,e,t,r){let o=n[t],i=e.data;if(rb(o)){let s=o;s.resolving&&jS(HS(i[t]));let a=su(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Dt(s.injectImpl):null,u=TC(n,r,W.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&tb(t,i[t],e)}finally{l!==null&&Dt(l),su(a),s.resolving=!1,bC()}}return o}function hb(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ta)?n[Ta]:void 0;return typeof e=="number"?e>=0?e&kC:fb:e}function lv(n,e,t){let r=1<<n;return!!(t[e+(n>>OC)]&r)}function uv(n,e){return!(n&W.Self)&&!(n&W.Host&&e)}var po=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return UC(this._tNode,this._lView,e,Tu(r),t)}};function fb(){return new po(xt(),ie())}function Fa(n){return xa(()=>{let e=n.prototype.constructor,t=e[Jl]||Ef(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[Jl]||Ef(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Ef(n){return Ov(n)?()=>{let e=Ef(Yt(n));return e&&e()}:go(n)}function pb(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[U]&2048&&!(s[U]&512);){let a=BC(i,s,t,r|W.Self,Dn);if(a!==Dn)return a;let c=i.parent;if(!c){let l=s[oC];if(l){let u=l.get(t,Dn,r);if(u!==Dn)return u}c=HC(s),s=s[Zi]}i=c}return o}function HC(n){let e=n[z],t=e.type;return t===2?e.declTNode:t===1?n[Nt]:null}function dv(n,e=null,t=null,r){let o=jC(n,e,t,r);return o.resolveInjectorInitializers(),o}function jC(n,e=null,t=null,r,o=new Set){let i=[t||_t,CA(n)];return r=r||(typeof n=="object"?void 0:pt(n)),new Aa(i,e||tp(),r||null,o)}var fo=class fo{static create(e,t){if(Array.isArray(e))return dv({name:""},t,e,"");{let r=e.name??"";return dv({name:r},e.parent,e.providers,r)}}};fo.THROW_IF_NOT_FOUND=wa,fo.NULL=new eu,fo.\u0275prov=R({token:fo,providedIn:"any",factory:()=>M($v)}),fo.__NG_ELEMENT_ID__=-1;var To=fo;var gb=new x("");gb.__NG_ELEMENT_ID__=n=>{let e=xt();if(e===null)throw new L(204,!1);if(e.type&2)return e.value;if(n&W.Optional)return null;throw new L(204,!1)};var mb="ngOriginalError";function Zh(n){return n[mb]}var VC=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=yb,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),If=class extends VC{constructor(e){super(),this._lView=e}onDestroy(e){return pC(this._lView,e),()=>HA(this._lView,e)}};function yb(){return new If(ie())}var _r=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $e(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var Tf=class extends Ne{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,MA()&&(this.destroyRef=T(VC,{optional:!0})??void 0,this.pendingTasks=T(_r,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Le=Tf;function au(...n){}function $C(n){let e,t;function r(){n=au;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function hv(n){return queueMicrotask(()=>n()),()=>{n=au}}var Ie=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,Eb(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new L(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,vb,au,au);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},vb={};function hp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Cb(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{$C(()=>{n.callbackScheduled=!1,wf(n),n.isCheckStableRunning=!0,hp(n),n.isCheckStableRunning=!1})}),wf(n))}function Eb(n){let e=()=>{Cb(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{if(Ib(a))return t.invokeTask(o,i,s,a);try{return fv(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pv(n)}},onInvoke:(t,r,o,i,s,a,c)=>{try{return fv(n),t.invoke(o,i,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Tb(a)&&e(),pv(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&(i.change=="microTask"?(n._hasPendingMicrotasks=i.microTask,wf(n),hp(n)):i.change=="macroTask"&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}function wf(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pv(n){n._nesting--,hp(n)}var Sf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function Ib(n){return GC(n,"__ignore_ng_zone__")}function Tb(n){return GC(n,"__scheduler_tick__")}function GC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var wr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Zh(e);for(;t&&Zh(t);)t=Zh(t);return t||null}},wb=new x("",{providedIn:"root",factory:()=>{let n=T(Ie),e=T(wr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Sb(){return Xi(xt(),ie())}function Xi(n,e){return new Ue(Xt(n,e))}var Ue=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Sb;let n=e;return n})();function Ab(n){return n instanceof Ue?n.nativeElement:n}function bb(){return this._results[Symbol.iterator]()}var Af=class n{get changes(){return this._changes??=new Le}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=bb)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=ZS(e);(this._changesDetected=!JS(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function zC(n){return(n.flags&128)===128}var qC=new Map,Db=0;function _b(){return Db++}function Rb(n){qC.set(n[Au],n)}function Mb(n){qC.delete(n[Au])}var gv="__ngContext__";function Sr(n,e){Ir(e)?(n[gv]=e[Au],Rb(e)):n[gv]=e}function KC(n){return YC(n[Da])}function WC(n){return YC(n[dn])}function YC(n){for(;n!==null&&!Kn(n);)n=n[dn];return n}var bf;function QC(n){bf=n}function Nb(){if(bf!==void 0)return bf;if(typeof document<"u")return document;throw new L(210,!1)}var fp=new x("",{providedIn:"root",factory:()=>kb}),kb="ng",pp=new x(""),Pt=new x("",{providedIn:"platform",factory:()=>"unknown"});var gp=new x("",{providedIn:"root",factory:()=>Nb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ob="h",xb="b";var Pb=()=>null;function mp(n,e,t=!1){return Pb(n,e,t)}var JC=!1,Lb=new x("",{providedIn:"root",factory:()=>JC});var Df=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${MS})`}};function Ua(n){return n instanceof Df?n.changingThisBreaksApplicationSecurity:n}var Fb=/^>|^->|<!--|-->|--!>|<!-$/g,Ub=/(<|>)/g,Bb="\u200B$1\u200B";function Hb(n){return n.replace(Fb,e=>e.replace(Ub,Bb))}function ZC(n){return n instanceof Function?n():n}var Mn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Mn||{}),jb;function yp(n,e){return jb(n,e)}function Ui(n,e,t,r,o){if(r!=null){let i,s=!1;Kn(r)?i=r:Ir(r)&&(s=!0,r=r[qn]);let a=Rn(r);n===0&&t!==null?o==null?rE(e,t,a):lu(e,t,a,o||null,!0):n===1&&t!==null?lu(e,t,a,o||null,!0):n===2?nD(e,a,s):n===3&&e.destroyNode(a),i!=null&&oD(e,n,i,t,o)}}function Vb(n,e){return n.createText(e)}function $b(n,e,t){n.setValue(e,t)}function Gb(n,e){return n.createComment(Hb(e))}function XC(n,e,t){return n.createElement(e,t)}function zb(n,e){eE(n,e),e[qn]=null,e[Nt]=null}function qb(n,e,t,r,o,i){r[qn]=o,r[Nt]=e,xu(n,r,t,1,o,i)}function eE(n,e){e[Gn].changeDetectionScheduler?.notify(8),xu(n,e,e[Fe],2,null,null)}function Kb(n){let e=n[Da];if(!e)return Xh(n[z],n);for(;e;){let t=null;if(Ir(e))t=e[Da];else{let r=e[Rt];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)Ir(e)&&Xh(e[z],e),e=e[ut];e===null&&(e=n),Ir(e)&&Xh(e[z],e),t=e&&e[dn]}e=t}}function Wb(n,e,t,r){let o=Rt+r,i=t.length;r>0&&(t[o-1][dn]=e),r<i-Rt?(e[dn]=t[o],Vv(t,Rt+r,e)):(t.push(e),e[dn]=null),e[ut]=t;let s=e[yo];s!==null&&t!==s&&tE(s,e);let a=e[zn];a!==null&&a.insertView(n),mf(e),e[U]|=128}function tE(n,e){let t=n[Gi],r=e[ut];if(Ir(r))n[U]|=ru.HasTransplantedViews;else{let o=r[ut][Zt];e[Zt]!==o&&(n[U]|=ru.HasTransplantedViews)}t===null?n[Gi]=[e]:t.push(e)}function vp(n,e){let t=n[Gi],r=t.indexOf(e);t.splice(r,1)}function cu(n,e){if(n.length<=Rt)return;let t=Rt+e,r=n[t];if(r){let o=r[yo];o!==null&&o!==n&&vp(o,r),e>0&&(n[t-1][dn]=r[dn]);let i=Xl(n,Rt+e);zb(r[z],r);let s=i[zn];s!==null&&s.detachView(i[z]),r[ut]=null,r[dn]=null,r[U]&=-129}return r}function Cp(n,e){if(!(e[U]&256)){let t=e[Fe];t.destroyNode&&xu(n,e,t,3,null,null),Kb(e)}}function Xh(n,e){if(e[U]&256)return;let t=ce(null);try{e[U]&=-129,e[U]|=256,e[Qt]&&Dh(e[Qt]),Qb(n,e),Yb(n,e),e[z].type===1&&e[Fe].destroy();let r=e[yo];if(r!==null&&Kn(e[ut])){r!==e[ut]&&vp(r,e);let o=e[zn];o!==null&&o.detachView(n)}Mb(e)}finally{ce(t)}}function Yb(n,e){let t=n.cleanup,r=e[tu];if(t!==null)for(let i=0;i<t.length-1;i+=2)if(typeof t[i]=="string"){let s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[t[i+1]];t[i].call(s)}r!==null&&(e[tu]=null);let o=e[Er];if(o!==null){e[Er]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function Qb(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof Ra)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];bn(4,a,c);try{c.call(a)}finally{bn(5,a,c)}}else{bn(4,o,i);try{i.call(o)}finally{bn(5,o,i)}}}}}function nE(n,e,t){return Jb(n,e.parent,t)}function Jb(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qn];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=n.data[r.directiveStart+o];if(i===_n.None||i===_n.Emulated)return null}return Xt(r,t)}}function lu(n,e,t,r,o){n.insertBefore(e,t,r,o)}function rE(n,e,t){n.appendChild(e,t)}function mv(n,e,t,r,o){r!==null?lu(n,e,t,r,o):rE(n,e,t)}function Zb(n,e,t,r){n.removeChild(e,t,r)}function Ep(n,e){return n.parentNode(e)}function Xb(n,e){return n.nextSibling(e)}function oE(n,e,t){return tD(n,e,t)}function eD(n,e,t){return n.type&40?Xt(n,t):null}var tD=eD,yv;function Ou(n,e,t,r){let o=nE(n,r,e),i=e[Fe],s=r.parent||e[Nt],a=oE(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)mv(i,o,t[c],a,!1);else mv(i,o,t,a,!1);yv!==void 0&&yv(i,r,e,t,o)}function Ia(n,e){if(e!==null){let t=e.type;if(t&3)return Xt(e,n);if(t&4)return _f(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ia(n,r);{let o=n[e.index];return Kn(o)?_f(-1,o):Rn(o)}}else{if(t&128)return Ia(n,e.next);if(t&32)return yp(e,n)()||Rn(n[e.index]);{let r=iE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Eo(n[Zt]);return Ia(o,r)}else return Ia(n,e.next)}}}return null}function iE(n,e){if(e!==null){let r=n[Zt][Nt],o=e.projection;return r.projection[o]}return null}function _f(n,e){let t=Rt+n+1;if(t<e.length){let r=e[t],o=r[z].firstChild;if(o!==null)return Ia(r,o)}return e[vo]}function nD(n,e,t){let r=Ep(n,e);r&&Zb(n,r,e,t)}function Ip(n,e,t,r,o,i,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Sr(Rn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Ip(n,e,t.child,r,o,i,!1),Ui(e,n,o,a,i);else if(c&32){let l=yp(t,r),u;for(;u=l();)Ui(e,n,o,u,i);Ui(e,n,o,a,i)}else c&16?sE(n,e,r,t,o,i):Ui(e,n,o,a,i);t=s?t.projectionNext:t.next}}function xu(n,e,t,r,o,i){Ip(t,r,n.firstChild,e,o,i,!1)}function rD(n,e,t){let r=e[Fe],o=nE(n,t,e),i=t.parent||e[Nt],s=oE(i,t,e);sE(r,0,e,t,o,s)}function sE(n,e,t,r,o,i){let s=t[Zt],c=s[Nt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ui(e,n,o,u,i)}else{let l=c,u=s[ut];zC(r)&&(l.flags|=128),Ip(n,e,l,u,o,i,!0)}}function oD(n,e,t,r,o){let i=t[vo],s=Rn(t);i!==s&&Ui(e,n,r,i,o);for(let a=Rt;a<t.length;a++){let c=t[a];xu(c[z],c,n,e,r,i)}}function iD(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:Mn.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Mn.Important),n.setStyle(t,r,o,i))}}function sD(n,e,t){n.setAttribute(e,"style",t)}function aE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function cE(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&lf(n,e,r),o!==null&&aE(n,e,o),i!==null&&sD(n,e,i)}var fn={};function N(n=1){lE(st(),ie(),bo()+n,!1)}function lE(n,e,t,r){if(!r)if((e[U]&3)===3){let i=n.preOrderCheckHooks;i!==null&&Kl(e,i,t)}else{let i=n.preOrderHooks;i!==null&&Wl(e,i,0,t)}Io(t)}function te(n,e=W.Default){let t=ie();if(t===null)return M(n,e);let r=xt();return UC(r,t,Yt(n),e)}function uE(n,e,t,r,o,i){let s=ce(null);try{let a=null;o&Tr.SignalBased&&(a=e[r][Ai]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Tr.HasDecoratorInputTransform&&(i=n.inputTransforms[r].call(e,i)),n.setInput!==null?n.setInput(e,a,i,t,r):sC(e,a,r,i)}finally{ce(s)}}function aD(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)Io(~o);else{let i=o,s=t[++r],a=t[++r];YA(s,i);let c=e[i];a(2,c)}}}finally{Io(-1)}}function Pu(n,e,t,r,o,i,s,a,c,l,u){let d=e.blueprint.slice();return d[qn]=o,d[U]=r|4|128|8|64,(l!==null||n&&n[U]&2048)&&(d[U]|=2048),hC(d),d[ut]=d[Zi]=n,d[Jt]=t,d[Gn]=s||n&&n[Gn],d[Fe]=a||n&&n[Fe],d[$i]=c||n&&n[$i]||null,d[Nt]=i,d[Au]=_b(),d[ba]=u,d[oC]=l,d[Zt]=e.type==2?n[Zt]:d,d}function es(n,e,t,r,o){let i=n.data[e];if(i===null)i=cD(n,e,t,r,o),WA()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=qA();i.injectorIndex=s===null?-1:s.injectorIndex}return Ao(i,!0),i}function cD(n,e,t,r,o){let i=vC(),s=ip(),a=s?i:i&&i.parent,c=n.data[e]=pD(n,a,t,e,r,o);return n.firstChild===null&&(n.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function dE(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function hE(n,e,t,r,o){let i=bo(),s=r&2;try{Io(-1),s&&e.length>gt&&lE(n,e,gt,!1),bn(s?2:0,o),t(r,o)}finally{Io(i),bn(s?3:1,o)}}function Tp(n,e,t){if(np(e)){let r=ce(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ce(r)}}}function wp(n,e,t){mC()&&(ID(n,e,t,Xt(t,e)),(t.flags&64)===64&&gE(n,e,t))}function Sp(n,e,t=Xt){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function fE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ap(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ap(n,e,t,r,o,i,s,a,c,l,u){let d=gt+r,f=d+o,g=lD(d,f),v=typeof l=="function"?l():l;return g[z]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:u}}function lD(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fn);return t}function uD(n,e,t,r){let i=r.get(Lb,JC)||t===_n.ShadowDom,s=n.selectRootElement(e,i);return dD(s),s}function dD(n){hD(n)}var hD=()=>null;function fD(n,e,t,r){let o=vE(e);o.push(t),n.firstCreatePass&&CE(n).push(r,o.length-1)}function pD(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return yC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vv(n,e,t,r,o){for(let i in e){if(!e.hasOwnProperty(i))continue;let s=e[i];if(s===void 0)continue;r??={};let a,c=Tr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=i;if(o!==null){if(!o.hasOwnProperty(i))continue;l=o[i]}n===0?Cv(r,t,l,a,c):Cv(r,t,l,a)}return r}function Cv(n,e,t,r,o){let i;n.hasOwnProperty(t)?(i=n[t]).push(e,r):i=n[t]=[e,r],o!==void 0&&i.push(o)}function gD(n,e,t){let r=e.directiveStart,o=e.directiveEnd,i=n.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<o;u++){let d=i[u],f=t?t.get(d):null,g=f?f.inputs:null,v=f?f.outputs:null;c=vv(0,d.inputs,u,c,g),l=vv(1,d.outputs,u,l,v);let I=c!==null&&s!==null&&!Xf(e)?kD(c,u,s):null;a.push(I)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function mD(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yD(n,e,t,r,o,i,s,a){let c=Xt(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Dp(n,t,u,r,o),bu(e)&&vD(t,e.index)):e.type&3?(r=mD(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)):e.type&12}function vD(n,e){let t=Dr(e,n);t[U]&16||(t[U]|=64)}function bp(n,e,t,r){if(mC()){let o=r===null?null:{"":-1},i=wD(n,t),s,a;i===null?s=a=null:[s,a]=i,s!==null&&pE(n,e,t,s,o,a),o&&SD(t,r,o)}t.mergedAttrs=Sa(t.mergedAttrs,t.attrs)}function pE(n,e,t,r,o,i){for(let l=0;l<r.length;l++)ub(xC(t,e),n,r[l].type);bD(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=dE(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Sa(t.mergedAttrs,u.hostAttrs),DD(n,t,e,c,u),AD(c,u,o),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}gD(n,t,i)}function CD(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;ED(s)!=a&&s.push(a),s.push(t,r,i)}}function ED(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ID(n,e,t,r){let o=t.directiveStart,i=t.directiveEnd;bu(t)&&_D(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||xC(t,e),Sr(r,e);let s=t.initialInputs;for(let a=o;a<i;a++){let c=n.data[a],l=qi(e,n,a,t);if(Sr(l,e),s!==null&&ND(e,a-o,l,c,t,s),Co(c)){let u=Dr(t.index,e);u[Jt]=qi(e,n,a,t)}}}function gE(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=QA();try{Io(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];yf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TD(c,l)}}finally{Io(-1),yf(s)}}function TD(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wD(n,e){let t=n.directiveRegistry,r=null,o=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];if(Kv(e,s.selectors,!1))if(r||(r=[]),Co(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;Rf(n,e,c)}else r.unshift(s),Rf(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function Rf(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SD(n,e,t){if(e){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new L(-301,!1);r.push(e[o],i)}}}function AD(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Co(e)&&(t[""]=n)}}function bD(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function DD(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=go(o.type,!0)),s=new Ra(i,Co(o),te);n.blueprint[r]=s,t[r]=s,CD(n,e,r,dE(n,t,o.hostVars,fn),o)}function _D(n,e,t){let r=Xt(e,n),o=fE(t),i=n[Gn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Lu(n,Pu(n,o,null,s,r,e,null,i.createRenderer(r,t),null,null,null));n[e.index]=a}function RD(n,e,t,r,o,i){let s=Xt(n,e);MD(e[Fe],s,i,n.value,t,r,o)}function MD(n,e,t,r,o,i,s){if(i==null)n.removeAttribute(e,o,t);else{let a=s==null?Yf(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}function ND(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];uE(r,t,c,l,u,d)}}function kD(n,e,t){let r=null,o=0;for(;o<t.length;){let i=t[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(n.hasOwnProperty(i)){r===null&&(r=[]);let s=n[i];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(i,s[a+1],s[a+2],t[o+1]);break}}o+=2}return r}function mE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yE(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];cp(i),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function Lu(n,e){return n[Da]?n[iv][dn]=e:n[Da]=e,n[iv]=e,e}function Mf(n,e,t){cp(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function vE(n){return n[tu]??=[]}function CE(n){return n.cleanup??=[]}function EE(n,e){let t=n[$i],r=t?t.get(wr,null):null;r&&r.handleError(e)}function Dp(n,e,t,r,o){for(let i=0;i<t.length;){let s=t[i++],a=t[i++],c=t[i++],l=e[s],u=n.data[s];uE(u,l,r,a,c,o)}}function OD(n,e,t){let r=dC(e,n);$b(n[Fe],r,t)}function xD(n,e){let t=Dr(e,n),r=t[z];PD(r,t);let o=t[qn];o!==null&&t[ba]===null&&(t[ba]=mp(o,t[$i])),_p(r,t,t[Jt])}function PD(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function _p(n,e,t){lp(e);try{let r=n.viewQuery;r!==null&&Mf(1,r,t);let o=n.template;o!==null&&hE(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[zn]?.finishViewCreation(n),n.staticContentQueries&&yE(n,e),n.staticViewQueries&&Mf(2,n.viewQuery,t);let i=n.components;i!==null&&LD(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[U]&=-5,up()}}function LD(n,e){for(let t=0;t<e.length;t++)xD(n,e[t])}function Rp(n,e,t,r){let o=ce(null);try{let i=e.tView,a=n[U]&4096?4096:16,c=Pu(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[yo]=l;let u=n[zn];return u!==null&&(c[zn]=u.createEmbeddedView(i)),_p(i,c,t),c}finally{ce(o)}}function FD(n,e){let t=Rt+e;if(t<n.length)return n[t]}function uu(n,e){return!e||e.firstChild===null||zC(n)}function Mp(n,e,t,r=!0){let o=e[z];if(Wb(o,e,n,t),r){let s=_f(t,n),a=e[Fe],c=Ep(a,n[vo]);c!==null&&qb(o,n[Nt],a,e,c,s)}let i=e[ba];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function UD(n,e){let t=cu(n,e);return t!==void 0&&Cp(t[z],t),t}function du(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(Rn(i)),Kn(i)&&BD(i,r);let s=t.type;if(s&8)du(n,e,t.child,r);else if(s&32){let a=yp(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=iE(e,t);if(Array.isArray(a))r.push(...a);else{let c=Eo(e[Zt]);du(c[z],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function BD(n,e){for(let t=Rt;t<n.length;t++){let r=n[t],o=r[z].firstChild;o!==null&&du(r[z],r,o,e)}n[vo]!==n[qn]&&e.push(n[vo])}var IE=[];function HD(n){return n[Qt]??jD(n)}function jD(n){let e=IE.pop()??Object.create($D);return e.lView=n,e}function VD(n){n.lView[Qt]!==n&&(n.lView=null,IE.push(n))}var $D=A(m({},El),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{_u(n.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function GD(n){let e=n[Qt]??Object.create(zD);return e.lView=n,e}var zD=A(m({},El),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Eo(n.lView);for(;e&&!TE(e[z]);)e=Eo(e);e&&fC(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function TE(n){return n.type!==2}var qD=100;function wE(n,e=!0,t=0){let r=n[Gn],o=r.rendererFactory,i=!1;i||o.begin?.();try{KD(n,t)}catch(s){throw e&&EE(n,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function KD(n,e){let t=CC();try{av(!0),Nf(n,e);let r=0;for(;_a(n);){if(r===qD)throw new L(103,!1);r++,Nf(n,1)}}finally{av(t)}}function WD(n,e,t,r){let o=e[U];if((o&256)===256)return;let i=!1,s=!1;!i&&e[Gn].inlineEffectRunner?.flush(),lp(e);let a=!0,c=null,l=null;i||(TE(n)?(l=HD(e),c=Ah(l)):cy()===null?(a=!1,l=GD(e),c=Ah(l)):e[Qt]&&(Dh(e[Qt]),e[Qt]=null));try{hC(e),KA(n.bindingStartIndex),t!==null&&hE(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let g=n.preOrderCheckHooks;g!==null&&Kl(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Wl(e,g,0,null),Yh(e,0)}if(s||YD(e),SE(e,0),n.contentQueries!==null&&yE(n,e),!i)if(u){let g=n.contentCheckHooks;g!==null&&Kl(e,g)}else{let g=n.contentHooks;g!==null&&Wl(e,g,1),Yh(e,1)}aD(n,e);let d=n.components;d!==null&&bE(e,d,0);let f=n.viewQuery;if(f!==null&&Mf(2,f,r),!i)if(u){let g=n.viewCheckHooks;g!==null&&Kl(e,g)}else{let g=n.viewHooks;g!==null&&Wl(e,g,2),Yh(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wh]){for(let g of e[Wh])g();e[Wh]=null}i||(e[U]&=-73)}catch(u){throw i||_u(e),u}finally{l!==null&&(hy(l,c),a&&VD(l)),up()}}function SE(n,e){for(let t=KC(n);t!==null;t=WC(t))for(let r=Rt;r<t.length;r++){let o=t[r];AE(o,e)}}function YD(n){for(let e=KC(n);e!==null;e=WC(e)){if(!(e[U]&ru.HasTransplantedViews))continue;let t=e[Gi];for(let r=0;r<t.length;r++){let o=t[r];fC(o)}}}function QD(n,e,t){let r=Dr(e,n);AE(r,t)}function AE(n,e){op(n)&&Nf(n,e)}function Nf(n,e){let r=n[z],o=n[U],i=n[Qt],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&bh(i)),s||=!1,i&&(i.dirty=!1),n[U]&=-9217,s)WD(r,n,r.template,n[Jt]);else if(o&8192){SE(n,1);let a=r.components;a!==null&&bE(n,a,1)}}function bE(n,e,t){for(let r=0;r<e.length;r++)QD(n,e[r],t)}function Np(n,e){let t=CC()?64:1088;for(n[Gn].changeDetectionScheduler?.notify(e);n;){n[U]|=t;let r=Eo(n);if(pf(n)&&!r)return n;n=r}return null}var wo=class{get rootNodes(){let e=this._lView,t=e[z];return du(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jt]}set context(e){this._lView[Jt]=e}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Kn(e)){let t=e[nu],r=t?t.indexOf(this):-1;r>-1&&(cu(e,r),Xl(t,r))}this._attachedToViewContainer=!1}Cp(this._lView[z],this._lView)}onDestroy(e){pC(this._lView,e)}markForCheck(){Np(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[U]&=-129}reattach(){mf(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,wE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pf(this._lView),t=this._lView[yo];t!==null&&!e&&vp(t,this._lView),eE(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e;let t=pf(this._lView),r=this._lView[yo];r!==null&&!t&&tE(r,this._lView),mf(this._lView)}},Ar=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XD;let n=e;return n})(),JD=Ar,ZD=class extends JD{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let o=Rp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new wo(o)}};function XD(){return kp(xt(),ie())}function kp(n,e){return n.type&4?new ZD(e,n,Xi(n,e)):null}var fU=new RegExp(`^(\\d+)*(${xb}|${Ob})*(.*)`);var e_=()=>null;function hu(n,e){return e_(n,e)}var Ma=class{},Op=new x("",{providedIn:"root",factory:()=>!1});var DE=new x(""),kf=class{},fu=class{};function t_(n){let e=Error(`No component factory found for ${pt(n)}.`);return e[n_]=n,e}var n_="ngComponent";var Of=class{resolveComponentFactory(e){throw t_(e)}},$p=class $p{};$p.NULL=new Of;var Ki=$p,Wi=class{},Wn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>r_();let n=e;return n})();function r_(){let n=ie(),e=xt(),t=Dr(e.index,n);return(Ir(t)?t:n)[Fe]}var o_=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();var Ev=new Set;function ts(n){Ev.has(n)||(Ev.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var _E=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function pu(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=of(o,a);else if(i==2){let c=a,l=e[++s];r=of(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}var gu=class extends Ki{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=mo(e);return new Na(t,this.ngModule)}};function Iv(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let o=n[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:Tr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Tr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function i_(n){let e=n.toLowerCase();return e==="svg"?uC:e==="math"?PA:null}var Na=class extends fu{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Iv(e.inputs,!0);if(t!==null)for(let o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return Iv(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=pA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=ce(null);try{o=o||this.ngModule;let s=o instanceof Mt?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new vf(e,s):e,c=a.get(Wi,null);if(c===null)throw new L(407,!1);let l=a.get(o_,null),u=a.get(_E,null),d=a.get(Ma,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",I=r?uD(g,r,this.componentDef.encapsulation,a):XC(g,v,i_(v)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let _=null;I!==null&&(_=mp(I,a,!0));let X=Ap(0,null,null,1,0,null,null,null,null,null,null),ee=Pu(null,X,null,S,null,null,f,g,a,null,_);lp(ee);let he,rt;try{let je=this.componentDef,Wt,Si=null;je.findHostDirectiveDefs?(Wt=[],Si=new Map,je.findHostDirectiveDefs(je,Wt,Si),Wt.push(je)):Wt=[je];let eS=s_(ee,I),tS=a_(eS,I,je,Wt,ee,f,g);rt=rp(X,gt),I&&u_(g,je,I,r),t!==void 0&&d_(rt,this.ngContentSelectors,t),he=l_(tS,je,Wt,Si,ee,[h_]),_p(X,ee,null)}finally{up()}return new xf(this.componentType,he,Xi(rt,ee),ee,rt)}finally{ce(i)}}},xf=class extends kf{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new wo(o,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView;Dp(i[z],i,o,e,t),this.previousInputValues.set(e,t);let s=Dr(this._tNode.index,i);Np(s,1)}}get injector(){return new po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function s_(n,e){let t=n[z],r=gt;return n[r]=e,es(t,r,2,"#host",null)}function a_(n,e,t,r,o,i,s){let a=o[z];c_(r,n,e,s);let c=null;e!==null&&(c=mp(e,o[$i]));let l=i.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=Pu(o,fE(t),null,u,o[n.index],n,i,l,null,null,c);return a.firstCreatePass&&Rf(a,n,r.length-1),Lu(o,d),o[n.index]=d}function c_(n,e,t,r){for(let o of n)e.mergedAttrs=Sa(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(pu(e,e.mergedAttrs,!0),t!==null&&cE(r,t,e))}function l_(n,e,t,r,o,i){let s=xt(),a=o[z],c=Xt(s,o);pE(a,o,s,t,null,r);for(let u=0;u<t.length;u++){let d=s.directiveStart+u,f=qi(o,a,d,s);Sr(f,o)}gE(a,o,s),c&&Sr(c,o);let l=qi(o,a,s.directiveStart+s.componentOffset,s);if(n[Jt]=o[Jt]=l,i!==null)for(let u of i)u(l,e);return Tp(a,s,o),l}function u_(n,e,t,r){if(r)lf(n,t,["ng-version","18.1.3"]);else{let{attrs:o,classes:i}=gA(e.selectors[0]);o&&lf(n,t,o),i&&i.length>0&&aE(n,t,i.join(" "))}}function d_(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null?Array.from(i):null)}}function h_(){let n=xt();ku(ie()[z],n)}var Rr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=f_;let n=e;return n})();function f_(){let n=xt();return ME(n,ie())}var p_=Rr,RE=class extends p_{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xi(this._hostTNode,this._hostLView)}get injector(){return new po(this._hostTNode,this._hostLView)}get parentInjector(){let e=dp(this._hostTNode,this._hostLView);if(NC(e)){let t=iu(e,this._hostLView),r=ou(e),o=t[z].data[r+8];return new po(o,t)}else return new po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Tv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=hu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,uu(this._hostTNode,s)),a}createComponent(e,t,r,o,i){let s=e&&!NA(e),a;if(s)a=t;else{let v=t||{};a=v.index,r=v.injector,o=v.projectableNodes,i=v.environmentInjector||v.ngModuleRef}let c=s?e:new Na(mo(e)),l=r||this.parentInjector;if(!i&&c.ngModule==null){let I=(s?l:this.parentInjector).get(Mt,null);I&&(i=I)}let u=mo(c.componentType??{}),d=hu(this._lContainer,u?.id??null),f=d?.firstChild??null,g=c.create(l,o,f,i);return this.insertImpl(g.hostView,a,uu(this._hostTNode,d)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(UA(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[ut],l=new RE(c,c[Nt],c[ut]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return Mp(s,o,i,r),e.attachToViewContainerRef(),Vv(ef(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Tv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=cu(this._lContainer,t);r&&(Xl(ef(this._lContainer),t),Cp(r[z],r))}detach(e){let t=this._adjustIndex(e,-1),r=cu(this._lContainer,t);return r&&Xl(ef(this._lContainer),t)!=null?new wo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Tv(n){return n[nu]}function ef(n){return n[nu]||(n[nu]=[])}function ME(n,e){let t,r=e[n.index];return Kn(r)?t=r:(t=mE(r,e,null,n),e[n.index]=t,Lu(e,t)),m_(t,e,n,r),new RE(t,n,e)}function g_(n,e){let t=n[Fe],r=t.createComment(""),o=Xt(e,n),i=Ep(t,o);return lu(t,i,r,Xb(t,o),!1),r}var m_=C_,y_=()=>!1;function v_(n,e,t){return y_(n,e,t)}function C_(n,e,t,r){if(n[vo])return;let o;t.type&8?o=Rn(r):o=g_(e,t),n[vo]=o}var Pf=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Lf=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,o=[];for(let i=0;i<r;i++){let s=t.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new n(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)xp(e,t).matches!==null&&this.queries[t].setDirty()}},mu=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=D_(e):this.predicate=e}},Ff=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let o=t!==null?t.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,t!==null?t.push(i):t=[i])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Uf=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(e,t,E_(t,i)),this.matchTNodeWithReadOption(e,t,Yl(t,e,i,!1,!1))}else r===Ar?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Yl(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Ue||o===Rr||o===Ar&&t.type&4)this.addMatch(t.index,-2);else{let i=Yl(t,e,o,!1,!1);i!==null&&this.addMatch(t.index,i)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function E_(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function I_(n,e){return n.type&11?Xi(n,e):n.type&4?kp(n,e):null}function T_(n,e,t,r){return t===-1?I_(e,n):t===-2?w_(n,e,r):qi(n,n[z],t,e)}function w_(n,e,t){if(t===Ue)return Xi(e,n);if(t===Ar)return kp(e,n);if(t===Rr)return ME(e,n)}function NE(n,e,t,r){let o=e[zn].queries[r];if(o.matches===null){let i=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=i[l];a.push(T_(e,u,s[c+1],t.metadata.read))}}o.matches=a}return o.matches}function Bf(n,e,t,r){let o=n.queries.getByIndex(t),i=o.matches;if(i!==null){let s=NE(n,e,o,t);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let l=i[a+1],u=e[-c];for(let d=Rt;d<u.length;d++){let f=u[d];f[yo]===f[ut]&&Bf(f[z],f,l,r)}if(u[Gi]!==null){let d=u[Gi];for(let f=0;f<d.length;f++){let g=d[f];Bf(g[z],g,l,r)}}}}}return r}function S_(n,e){return n[zn].queries[e].queryList}function kE(n,e,t){let r=new Af((t&4)===4);return fD(n,e,r,r.destroy),(e[zn]??=new Lf).queries.push(new Pf(r))-1}function A_(n,e,t){let r=st();return r.firstCreatePass&&(OE(r,new mu(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),kE(r,ie(),e)}function b_(n,e,t,r){let o=st();if(o.firstCreatePass){let i=xt();OE(o,new mu(e,t,r),i.index),__(o,n),(t&2)===2&&(o.staticContentQueries=!0)}return kE(o,ie(),t)}function D_(n){return n.split(",").map(e=>e.trim())}function OE(n,e,t){n.queries===null&&(n.queries=new Ff),n.queries.track(new Uf(e,t))}function __(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function xp(n,e){return n.queries.getByIndex(e)}function R_(n,e){let t=n[z],r=xp(t,e);return r.crossesNgTemplate?Bf(t,n,e,[]):NE(t,n,r,e)}function Pp(n,e){ts("NgSignals");let t=Cy(n),r=t[Ai];return e?.equal&&(r.equal=e.equal),t.set=o=>_h(r,o),t.update=o=>Ey(r,o),t.asReadonly=M_.bind(t),t}function M_(){let n=this[Ai];if(n.readonlyFn===void 0){let e=()=>this();e[Ai]=n,n.readonlyFn=e}return n.readonlyFn}function N_(n){return Object.getPrototypeOf(n.prototype).constructor}function Lp(n){let e=N_(n.type),t=!0,r=[n];for(;e;){let o;if(Co(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);let s=n;s.inputs=Gl(n.inputs),s.inputTransforms=Gl(n.inputTransforms),s.declaredInputs=Gl(n.declaredInputs),s.outputs=Gl(n.outputs);let a=o.hostBindings;a&&L_(n,a);let c=o.viewQuery,l=o.contentQueries;if(c&&x_(n,c),l&&P_(n,l),k_(n,o),kS(n.outputs,o.outputs),Co(o)&&o.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(n),a===Lp&&(t=!1)}}e=Object.getPrototypeOf(e)}O_(r)}function k_(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(o))continue;n.inputTransforms??={},n.inputTransforms[o]=e.inputTransforms[o]}}}function O_(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Sa(o.hostAttrs,t=Sa(t,o.hostAttrs))}}function Gl(n){return n===ji?{}:n===_t?[]:n}function x_(n,e){let t=n.viewQuery;t?n.viewQuery=(r,o)=>{e(r,o),t(r,o)}:n.viewQuery=e}function P_(n,e){let t=n.contentQueries;t?n.contentQueries=(r,o,i)=>{e(r,o,i),t(r,o,i)}:n.contentQueries=e}function L_(n,e){let t=n.hostBindings;t?n.hostBindings=(r,o)=>{e(r,o),t(r,o)}:n.hostBindings=e}function pn(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)&&o[3]&&(t[r]=o[3])}n.inputTransforms=t}var br=class{},ka=class{};var Hf=class extends br{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gu(this);let o=Zv(e);this._bootstrapComponents=ZC(o.bootstrap),this._r3Injector=jC(e,t,[{provide:br,useValue:this},{provide:Ki,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},jf=class extends ka{constructor(e){super(),this.moduleType=e}create(e){return new Hf(this.moduleType,e,[])}};var yu=class extends br{constructor(e){super(),this.componentFactoryResolver=new gu(this),this.instance=null;let t=new Aa([...e.providers,{provide:br,useValue:this},{provide:Ki,useValue:this.componentFactoryResolver}],e.parent||tp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fp(n,e,t=null){return new yu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function xE(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function PE(n,e,t){return n[e]=t}function F_(n,e){return n[e]}function Do(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function U_(n){return(n.flags&32)===32}function B_(n,e,t,r,o,i,s,a,c){let l=e.consts,u=es(e,n,4,s||null,a||null);bp(e,t,u,zi(l,c)),ku(e,u);let d=u.tView=Ap(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function LE(n,e,t,r,o,i,s,a,c,l){let u=t+gt,d=e.firstCreatePass?B_(u,e,n,r,o,i,s,a,c):e.data[u];Ao(d,!1);let f=H_(e,n,d,t);Mu()&&Ou(e,n,f,d),Sr(f,n);let g=mE(f,n,f,d);return n[u]=g,Lu(n,g),v_(g,d,n),Du(d)&&wp(e,n,d),c!=null&&Sp(n,d,l),d}function Be(n,e,t,r,o,i,s,a){let c=ie(),l=st(),u=zi(l.consts,i);return LE(c,l,n,e,t,r,o,u,s,a),Be}var H_=j_;function j_(n,e,t,r){return Nu(!0),e[Fe].createComment("")}function Ae(n,e,t,r){let o=ie(),i=Ru();if(Do(o,i,e)){let s=st(),a=DC();RD(a,o,n,e,t,r)}return Ae}function V_(n,e,t,r){return Do(n,Ru(),t)?e+Yf(t)+r:fn}function zl(n,e){return n<<17|e<<2}function So(n){return n>>17&32767}function $_(n){return(n&2)==2}function G_(n,e){return n&131071|e<<17}function Vf(n){return n|2}function Yi(n){return(n&131068)>>2}function tf(n,e){return n&-131069|e<<2}function z_(n){return(n&1)===1}function $f(n){return n|1}function q_(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=So(s),c=Yi(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Pa(d,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let f=So(n[a+1]);n[r+1]=zl(f,a),f!==0&&(n[f+1]=tf(n[f+1],r)),n[a+1]=G_(n[a+1],r)}else n[r+1]=zl(a,0),a!==0&&(n[a+1]=tf(n[a+1],r)),a=r;else n[r+1]=zl(c,0),a===0?a=r:n[c+1]=tf(n[c+1],r),c=r;l&&(n[r+1]=Vf(n[r+1])),wv(n,u,r,!0),wv(n,u,r,!1),K_(e,u,n,r,i),s=zl(a,c),i?e.classBindings=s:e.styleBindings=s}function K_(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&Pa(i,e)>=0&&(t[r+1]=$f(t[r+1]))}function wv(n,e,t,r){let o=n[t+1],i=e===null,s=r?So(o):Yi(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];W_(c,e)&&(a=!0,n[s+1]=r?$f(l):Vf(l)),s=r?So(l):Yi(l)}a&&(n[t+1]=r?Vf(o):$f(o))}function W_(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Pa(n,e)>=0:!1}var ze={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FE(n){return n.substring(ze.key,ze.keyEnd)}function Y_(n){return n.substring(ze.value,ze.valueEnd)}function Q_(n){return HE(n),UE(n,Qi(n,0,ze.textEnd))}function UE(n,e){let t=ze.textEnd;return t===e?-1:(e=ze.keyEnd=Z_(n,ze.key=e,t),Qi(n,e,t))}function J_(n){return HE(n),BE(n,Qi(n,0,ze.textEnd))}function BE(n,e){let t=ze.textEnd,r=ze.key=Qi(n,e,t);return t===r?-1:(r=ze.keyEnd=X_(n,r,t),r=Sv(n,r,t,58),r=ze.value=Qi(n,r,t),r=ze.valueEnd=eR(n,r,t),Sv(n,r,t,59))}function HE(n){ze.key=0,ze.keyEnd=0,ze.value=0,ze.valueEnd=0,ze.textEnd=n.length}function Qi(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Z_(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function X_(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function Sv(n,e,t,r){return e=Qi(n,e,t),e<t&&e++,e}function eR(n,e,t){let r=-1,o=-1,i=-1,s=e,a=s;for(;s<t;){let c=n.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=Av(n,c,s,t):e===s-4&&i===85&&o===82&&r===76&&c===40?a=s=Av(n,41,s,t):c>32&&(a=s),i=o,o=r,r=c&-33}return a}function Av(n,e,t,r){let o=-1,i=t;for(;i<r;){let s=n.charCodeAt(i++);if(s==e&&o!==92)return i;s==92&&o===92?o=0:o=s}throw new Error}function ne(n,e,t){let r=ie(),o=Ru();if(Do(r,o,e)){let i=st(),s=DC();yD(i,s,r,n,e,r[Fe],t,!1)}return ne}function Gf(n,e,t,r,o){let i=e.inputs,s=o?"class":"style";Dp(n,t,i[s],s,r)}function Up(n,e){return rR(n,e,null,!0),Up}function jE(n){VE(zE,tR,n,!1)}function tR(n,e){for(let t=J_(e);t>=0;t=BE(e,t))zE(n,FE(e),Y_(e))}function Mr(n){VE(lR,nR,n,!0)}function nR(n,e){for(let t=Q_(e);t>=0;t=UE(e,t))wu(n,FE(e),!0)}function rR(n,e,t,r){let o=ie(),i=st(),s=EC(2);if(i.firstUpdatePass&&GE(i,n,s,r),e!==fn&&Do(o,s,e)){let a=i.data[bo()];qE(i,a,o,o[Fe],n,o[s+1]=dR(e,t),r,s)}}function VE(n,e,t,r){let o=st(),i=EC(2);o.firstUpdatePass&&GE(o,null,i,r);let s=ie();if(t!==fn&&Do(s,i,t)){let a=o.data[bo()];if(KE(a,r)&&!$E(o,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=of(c,t||"")),Gf(o,a,s,t,r)}else uR(o,a,s,s[Fe],s[i+1],s[i+1]=cR(n,e,t),r,i)}}function $E(n,e){return e>=n.expandoStartIndex}function GE(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[bo()],s=$E(n,t);KE(i,r)&&e===null&&!s&&(e=!1),e=oR(o,i,e,r),q_(o,i,e,t,s,r)}}function oR(n,e,t,r){let o=JA(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=nf(null,n,e,t,r),t=Oa(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=nf(o,n,e,t,r),i===null){let c=iR(n,e,r);c!==void 0&&Array.isArray(c)&&(c=nf(null,n,e,c[1],r),c=Oa(c,e.attrs,r),sR(n,e,r,c))}else i=aR(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function iR(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Yi(r)!==0)return n[So(r)]}function sR(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[So(o)]=r}function aR(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=Oa(r,s,t)}return Oa(r,e.attrs,t)}function nf(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=Oa(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Oa(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),wu(n,s,t?!0:e[++i]))}return n===void 0?null:n}function cR(n,e,t){if(t==null||t==="")return _t;let r=[],o=Ua(t);if(Array.isArray(o))for(let i=0;i<o.length;i++)n(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&n(r,i,o[i]);else typeof o=="string"&&e(r,o);return r}function zE(n,e,t){wu(n,e,Ua(t))}function lR(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&wu(n,r,t)}function uR(n,e,t,r,o,i,s,a){o===fn&&(o=_t);let c=0,l=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;u!==null||d!==null;){let f=c<o.length?o[c+1]:void 0,g=l<i.length?i[l+1]:void 0,v=null,I;u===d?(c+=2,l+=2,f!==g&&(v=d,I=g)):d===null||u!==null&&u<d?(c+=2,v=u):(l+=2,v=d,I=g),v!==null&&qE(n,e,t,r,v,I,s,a),u=c<o.length?o[c]:null,d=l<i.length?i[l]:null}}function qE(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=z_(l)?bv(c,e,t,o,Yi(l),s):void 0;if(!vu(u)){vu(i)||$_(l)&&(i=bv(c,null,t,o,a,s));let d=dC(bo(),t);iD(r,s,d,o,i)}}function bv(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=t[o+1];f===fn&&(f=d?_t:void 0);let g=d?qh(f,r):u===r?f:void 0;if(l&&!vu(g)&&(g=qh(c,r)),vu(g)&&(a=g,s))return a;let v=n[o+1];o=s?So(v):Yi(v)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=qh(c,r))}return a}function vu(n){return n!==void 0}function dR(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=pt(Ua(n)))),n}function KE(n,e){return(n.flags&(e?8:16))!==0}function Ba(n,e){ts("NgControlFlow");let t=ie(),r=Ru(),o=t[r]!==fn?t[r]:-1,i=o!==-1?Dv(t,gt+o):void 0,s=0;if(Do(t,r,n)){let a=ce(null);try{if(i!==void 0&&UD(i,s),n!==-1){let c=gt+n,l=Dv(t,c),u=hR(t[z],c),d=hu(l,u.tView.ssrId),f=Rp(t,u,e,{dehydratedView:d});Mp(l,f,s,uu(u,d))}}finally{ce(a)}}else if(i!==void 0){let a=FD(i,s);a!==void 0&&(a[Jt]=e)}}function Dv(n,e){return n[e]}function hR(n,e){return rp(n,e)}function fR(n,e,t,r,o,i){let s=e.consts,a=zi(s,o),c=es(e,n,2,r,a);return bp(e,t,c,zi(s,i)),c.attrs!==null&&pu(c,c.attrs,!1),c.mergedAttrs!==null&&pu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function B(n,e,t,r){let o=ie(),i=st(),s=gt+n,a=o[Fe],c=i.firstCreatePass?fR(s,i,o,e,t,r):i.data[s],l=pR(i,o,c,a,e,n);o[s]=l;let u=Du(c);return Ao(c,!0),cE(a,l,c),!U_(c)&&Mu()&&Ou(i,o,l,c),jA()===0&&Sr(l,o),VA(),u&&(wp(i,o,c),Tp(i,c,o)),r!==null&&Sp(o,c),B}function P(){let n=xt();ip()?sp():(n=n.parent,Ao(n,!1));let e=n;GA(e)&&zA(),$A();let t=st();return t.firstCreatePass&&(ku(t,n),np(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&ob(e)&&Gf(t,e,ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ib(e)&&Gf(t,e,ie(),e.stylesWithoutHost,!1),P}function et(n,e,t,r){return B(n,e,t,r),P(),et}var pR=(n,e,t,r,o,i)=>(Nu(!0),XC(r,o,eb()));function gR(n,e,t,r,o){let i=e.consts,s=zi(i,r),a=es(e,n,8,"ng-container",s);s!==null&&pu(a,s,!0);let c=zi(i,o);return bp(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function ns(n,e,t){let r=ie(),o=st(),i=n+gt,s=o.firstCreatePass?gR(i,o,r,e,t):o.data[i];Ao(s,!0);let a=mR(o,r,s,n);return r[i]=a,Mu()&&Ou(o,r,a,s),Sr(a,r),Du(s)&&(wp(o,r,s),Tp(o,s,r)),t!=null&&Sp(r,s),ns}function rs(){let n=xt(),e=st();return ip()?sp():(n=n.parent,Ao(n,!1)),e.firstCreatePass&&(ku(e,n),np(n)&&e.queries.elementEnd(n)),rs}function Yn(n,e,t){return ns(n,e,t),rs(),Yn}var mR=(n,e,t,r)=>(Nu(!0),Gb(e[Fe],""));function Fu(){return ie()}var Cu="en-US";var yR=Cu;function vR(n){typeof n=="string"&&(yR=n.toLowerCase().replace(/_/g,"-"))}var CR=(n,e,t)=>{};function Lt(n,e,t,r){let o=ie(),i=st(),s=xt();return IR(i,o,o[Fe],s,n,e,r),Lt}function ER(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[tu],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function IR(n,e,t,r,o,i,s){let a=Du(r),l=n.firstCreatePass&&CE(n),u=e[Jt],d=vE(e),f=!0;if(r.type&3||s){let I=Xt(r,e),S=s?s(I):I,_=d.length,X=s?he=>s(Rn(he[r.index])):r.index,ee=null;if(!s&&a&&(ee=ER(n,e,o,r.index)),ee!==null){let he=ee.__ngLastListenerFn__||ee;he.__ngNextListenerFn__=i,ee.__ngLastListenerFn__=i,f=!1}else{i=Rv(r,e,u,i),CR(I,o,i);let he=t.listen(S,o,i);d.push(i,he),l&&l.push(o,X,_,_+1)}}else i=Rv(r,e,u,i);let g=r.outputs,v;if(f&&g!==null&&(v=g[o])){let I=v.length;if(I)for(let S=0;S<I;S+=2){let _=v[S],X=v[S+1],rt=e[_][X].subscribe(i),je=d.length;d.push(i,rt),l&&l.push(o,r.index,je,-(je+1))}}}function _v(n,e,t,r){let o=ce(null);try{return bn(6,e,t),t(r)!==!1}catch(i){return EE(n,i),!1}finally{bn(7,e,t),ce(o)}}function Rv(n,e,t,r){return function o(i){if(i===Function)return r;let s=n.componentOffset>-1?Dr(n.index,e):e;Np(s,5);let a=_v(e,t,r,i),c=o.__ngNextListenerFn__;for(;c;)a=_v(e,t,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function He(n=1){return XA(n)}function TR(n,e){let t=null,r=lA(n);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){t=o;continue}if(r===null?Kv(n,i,!0):hA(r,i))return o}return t}function Qn(n){let e=ie()[Zt][Nt];if(!e.projection){let t=n?n.length:1,r=e.projection=XS(t,null),o=r.slice(),i=e.child;for(;i!==null;){if(i.type!==128){let s=n?TR(i,n):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function Jn(n,e=0,t,r,o,i){let s=ie(),a=st(),c=r?n+1:null;c!==null&&LE(s,a,c,r,o,i,null,t);let l=es(a,gt+n,16,null,t||null);l.projection===null&&(l.projection=e),sp();let d=!s[ba]||yC();s[Zt][Nt].projection[l.projection]===null&&c!==null?wR(s,a,c):d&&(l.flags&32)!==32&&rD(a,s,l)}function wR(n,e,t){let r=gt+t,o=e.data[r],i=n[r],s=hu(i,o.tView.ssrId),a=Rp(n,o,void 0,{dehydratedView:s});Mp(i,a,0,uu(o,s))}function _o(n,e,t,r){b_(n,e,t,r)}function Ha(n,e,t){A_(n,e,t)}function gn(n){let e=ie(),t=st(),r=IC();cp(r+1);let o=xp(t,r);if(n.dirty&&FA(e)===((o.metadata.flags&2)===2)){if(o.matches===null)n.reset([]);else{let i=R_(e,r);n.reset(i,Ab),n.notifyOnChanges()}return!0}return!1}function mn(){return S_(ie(),IC())}function SR(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ve(n,e=""){let t=ie(),r=st(),o=n+gt,i=r.firstCreatePass?es(r,o,1,e,null):r.data[o],s=AR(r,t,i,e,n);t[o]=s,Mu()&&Ou(r,t,s,i),Ao(i,!1)}var AR=(n,e,t,r,o)=>(Nu(!0),Vb(e[Fe],r));function Uu(n){return be("",n,""),Uu}function be(n,e,t){let r=ie(),o=V_(r,n,e,t);return o!==fn&&OD(r,bo(),o),be}var bR=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let o=tC(!1,r.type),i=o.length>0?Fp([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,i)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(M(Mt))});let n=e;return n})();function ge(n){ts("NgStandalone"),n.getStandaloneInjector=e=>e.get(bR).getOrCreateStandaloneInjector(n)}function WE(n,e,t){let r=ap()+n,o=ie();return o[r]===fn?PE(o,r,t?e.call(t):e()):F_(o,r)}function Bp(n,e,t,r){return YE(ie(),ap(),n,e,t,r)}function DR(n,e){let t=n[e];return t===fn?void 0:t}function YE(n,e,t,r,o,i){let s=e+t;return Do(n,s,o)?PE(n,s+1,i?r.call(i,o):r(o)):DR(n,s+1)}function qe(n,e){let t=st(),r,o=n+gt;t.firstCreatePass?(r=_R(e,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];let i=r.factory||(r.factory=go(r.type,!0)),s,a=Dt(te);try{let c=su(!1),l=i();return su(c),SR(t,ie(),o,l),l}finally{Dt(a)}}function _R(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ke(n,e,t){let r=n+gt,o=ie(),i=LA(o,r);return RR(o,r)?YE(o,ap(),e,i.transform,t,i):i.transform(t)}function RR(n,e){return n[z].data[e].pure}var Bu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var QE=new x("");function ja(n){return!!n&&typeof n.then=="function"}function JE(n){return!!n&&typeof n.subscribe=="function"}var ZE=new x(""),XE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=T(ZE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let i of this.appInits){let s=i();if(ja(s))r.push(s);else if(JE(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(i=>{this.reject(i)}),r.length===0&&o(),this.initialized=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Hu=new x("");function MR(){vy(()=>{throw new L(600,!1)})}function NR(n){return n.isBoundToModule}var kR=10;function OR(n,e,t){try{let r=t();return ja(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ro=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=T(wb),this.afterRenderEffectManager=T(_E),this.zonelessEnabled=T(Op),this.externalTestViews=new Set,this.beforeRender=new Ne,this.afterTick=new Ne,this.componentTypes=[],this.components=[],this.isStable=T(_r).hasPendingTasks.pipe(G(r=>!r)),this._injector=T(Mt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){let i=r instanceof fu;if(!this._injector.get(XE).done){let g=!i&&Jv(r),v=!1;throw new L(405,v)}let a;i?a=r:a=this._injector.get(Ki).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=NR(a)?void 0:this._injector.get(br),l=o||a.selector,u=a.create(To.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(QE,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),rf(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new L(101,!1);let o=ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ce(o),this.afterTick.next()}}detectChangesInAttachedViews(r){let o=null;this._injector.destroyed||(o=this._injector.get(Wi,null,{optional:!0}));let i=0,s=this.afterRenderEffectManager;for(;i<kR;){let a=i===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)xR(c,l,a,this.zonelessEnabled)}else o?.begin?.(),o?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>_a(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>_a(c))))break}}attachView(r){let o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){let o=r;rf(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let o=this._injector.get(Hu,[]);[...this._bootstrapListeners,...o].forEach(i=>i(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>rf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new L(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function rf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xR(n,e,t,r){if(!t&&!_a(n))return;wE(n,e,t&&!r?0:1)}var zf=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Hp=(()=>{let e=class e{compileModuleSync(r){return new jf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let o=this.compileModuleSync(r),i=Zv(r),s=ZC(i.declarations).reduce((a,c)=>{let l=mo(c);return l&&a.push(new Na(l)),a},[]);return new zf(o,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var PR=(()=>{let e=class e{constructor(){this.zone=T(Ie),this.changeDetectionScheduler=T(Ma),this.applicationRef=T(Ro)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),LR=new x("",{factory:()=>!1});function eI({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new Ie(nI()),[{provide:Ie,useFactory:n},{provide:Vi,multi:!0,useFactory:()=>{let t=T(PR,{optional:!0});return()=>t.initialize()}},{provide:Vi,multi:!0,useFactory:()=>{let t=T(FR);return()=>{t.initialize()}}},e===!0?{provide:DE,useValue:!0}:[]]}function tI(n){let e=n?.ignoreChangesOutsideZone,t=eI({ngZoneFactory:()=>{let r=nI(n);return r.shouldCoalesceEventChangeDetection&&ts("NgZone_CoalesceEvent"),new Ie(r)},ignoreChangesOutsideZone:e});return Ji([{provide:LR,useValue:!0},{provide:Op,useValue:!1},t])}function nI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var FR=(()=>{let e=class e{constructor(){this.subscription=new Pe,this.initialized=!1,this.zone=T(Ie),this.pendingTasks=T(_r)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var UR=(()=>{let e=class e{constructor(){this.appRef=T(Ro),this.taskService=T(_r),this.ngZone=T(Ie),this.zonelessEnabled=T(Op),this.disableScheduling=T(DE,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Pe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Sf||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?hv:$C;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=o(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ie.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let o=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(o),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(o)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function BR(){return typeof $localize<"u"&&$localize.locale||Cu}var jp=new x("",{providedIn:"root",factory:()=>T(jp,W.Optional|W.SkipSelf)||BR()});var rI=new x("");var Ql=null;function HR(n=[],e){return To.create({name:e,providers:[{provide:Su,useValue:"platform"},{provide:rI,useValue:new Set([()=>Ql=null])},...n]})}function jR(n=[]){if(Ql)return Ql;let e=HR(n);return Ql=e,MR(),VR(e),e}function VR(n){n.get(pp,null)?.forEach(t=>t())}var Mo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$R;let n=e;return n})();function $R(n){return GR(xt(),ie(),(n&16)===16)}function GR(n,e,t){if(bu(n)&&!t){let r=Dr(n.index,e);return new wo(r,r)}else if(n.type&175){let r=e[Zt];return new wo(r,e)}return null}var qf=class{constructor(){}supports(e){return e instanceof Map||xE(e)}create(){return new Kf}},Kf=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||xE(e)))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let i=this._getOrCreateRecordForKey(o,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let o=this._records.get(e);this._maybeAddToChanges(o,t);let i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}let r=new Wf(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Wf=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Mv(){return new Vp([new qf])}var Vp=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,o){if(o){let i=o.factories.slice();r=r.concat(i)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||Mv()),deps:[[e,new jv,new Jf]]}}find(r){let o=this.factories.find(i=>i.supports(r));if(o)return o;throw new L(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:Mv});let n=e;return n})();function oI(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,o=jR(r),i=[eI({}),{provide:Ma,useExisting:UR},...t||[]],a=new yu({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Ie);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(wr,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:g=>{l.handleError(g)}})});let d=()=>a.destroy(),f=o.get(rI);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),OR(l,c,()=>{let g=a.get(XE);return g.runInitializers(),g.donePromise.then(()=>{let v=a.get(jp,Cu);vR(v||Cu);let I=a.get(Ro);return e!==void 0&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}var iI=new x("");function ke(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Va(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}var dI=null;function os(){return dI}function hI(n){dI??=n}var ju=class{};var Se=new x(""),fI=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>T(KR),providedIn:"platform"});let n=e;return n})();var KR=(()=>{let e=class e extends fI{constructor(){super(),this._doc=T(Se),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return os().getBaseHref(this._doc)}onPopState(r){let o=os().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",r,!1),()=>o.removeEventListener("popstate",r)}onHashChange(r){let o=os().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",r,!1),()=>o.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,o,i){this._history.pushState(r,o,i)}replaceState(r,o,i){this._history.replaceState(r,o,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function pI(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function sI(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function No(n){return n&&n[0]!=="?"?"?"+n:n}var Vu=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>T(gI),providedIn:"root"});let n=e;return n})(),WR=new x(""),gI=(()=>{let e=class e extends Vu{constructor(r,o){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??T(Se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return pI(this._baseHref,r)}path(r=!1){let o=this._platformLocation.pathname+No(this._platformLocation.search),i=this._platformLocation.hash;return i&&r?`${o}${i}`:o}pushState(r,o,i,s){let a=this.prepareExternalUrl(i+No(s));this._platformLocation.pushState(r,o,a)}replaceState(r,o,i,s){let a=this.prepareExternalUrl(i+No(s));this._platformLocation.replaceState(r,o,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(o){return new(o||e)(M(fI),M(WR,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Nr=(()=>{let e=class e{constructor(r){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let o=this._locationStrategy.getBaseHref();this._basePath=JR(sI(aI(o))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,o=""){return this.path()==this.normalize(r+No(o))}normalize(r){return e.stripTrailingSlash(QR(this._basePath,aI(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,o="",i=null){this._locationStrategy.pushState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+No(o)),i)}replaceState(r,o="",i=null){this._locationStrategy.replaceState(i,"",r,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+No(o)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)}),()=>{let o=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(o,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",o){this._urlChangeListeners.forEach(i=>i(r,o))}subscribe(r,o,i){return this._subject.subscribe({next:r,error:o,complete:i})}};e.normalizeQueryParams=No,e.joinWithSlash=pI,e.stripTrailingSlash=sI,e.\u0275fac=function(o){return new(o||e)(M(Vu))},e.\u0275prov=R({token:e,factory:()=>YR(),providedIn:"root"});let n=e;return n})();function YR(){return new Nr(M(Vu))}function QR(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function aI(n){return n.replace(/\/index.html$/,"")}function JR(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function $u(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var Gp=/\s+/,cI=[],ss=(()=>{let e=class e{constructor(r,o){this._ngEl=r,this._renderer=o,this.initialClasses=cI,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Gp):cI}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Gp):r}ngDoCheck(){for(let o of this.initialClasses)this._updateState(o,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let o of r)this._updateState(o,!0);else if(r!=null)for(let o of Object.keys(r))this._updateState(o,!!r[o]);this._applyStateDiff()}_updateState(r,o){let i=this.stateMap.get(r);i!==void 0?(i.enabled!==o&&(i.changed=!0,i.enabled=o),i.touched=!0):this.stateMap.set(r,{enabled:o,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let o=r[0],i=r[1];i.changed?(this._toggleClass(o,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(o,!1),this.stateMap.delete(o)),i.touched=!1}}_toggleClass(r,o){r=r.trim(),r.length>0&&r.split(Gp).forEach(i=>{o?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}};e.\u0275fac=function(o){return new(o||e)(te(Ue),te(Wn))},e.\u0275dir=mt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Gu=(()=>{let e=class e{constructor(r,o){this._viewContainer=r,this._context=new zp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){lI("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){lI("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}};e.\u0275fac=function(o){return new(o||e)(te(Rr),te(Ar))},e.\u0275dir=mt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),zp=class{constructor(){this.$implicit=null,this.ngIf=null}};function lI(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${pt(e)}'.`)}var as=(()=>{let e=class e{constructor(r,o,i){this._ngEl=r,this._differs=o,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,o){let[i,s]=r.split("."),a=i.indexOf("-")===-1?void 0:Mn.DashCase;o!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${o}${s}`:o,a):this._renderer.removeStyle(this._ngEl.nativeElement,i,a)}_applyChanges(r){r.forEachRemovedItem(o=>this._setStyle(o.key,null)),r.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),r.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}};e.\u0275fac=function(o){return new(o||e)(te(Ue),te(Vp),te(Wn))},e.\u0275dir=mt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})(),cs=(()=>{let e=class e{constructor(r){this._viewContainerRef=r,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(r){if(this._shouldRecreateView(r)){let o=this._viewContainerRef;if(this._viewRef&&o.remove(o.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=o.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(r){return!!r.ngTemplateOutlet||!!r.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(r,o,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,o,i):!1,get:(r,o,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,o,i)}})}};e.\u0275fac=function(o){return new(o||e)(te(Rr))},e.\u0275dir=mt({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[La]});let n=e;return n})();var dt=(()=>{let e=class e{transform(r){return JSON.stringify(r,null,2)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=Wv({name:"json",type:e,pure:!1,standalone:!0});let n=e;return n})();var ko=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=it({type:e}),e.\u0275inj=ot({});let n=e;return n})(),qp="browser",ZR="server";function ls(n){return n===qp}function zu(n){return n===ZR}var is=class{};var Ga=class{},Wu=class{},Zn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Wp=class{encodeKey(e){return mI(e)}encodeValue(e){return mI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function XR(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var eM=/%(\d[a-f0-9])/gi,tM={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mI(n){return encodeURIComponent(n).replace(eM,(e,t)=>tM[t]??e)}function Ku(n){return`${n}`}var Or=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Wp,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=XR(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(Ku):[Ku(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ku(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(Ku(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Yp=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function nM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function yI(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function vI(n){return typeof Blob<"u"&&n instanceof Blob}function CI(n){return typeof FormData<"u"&&n instanceof FormData}function rM(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var $a=class n{constructor(e,t,r,o){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let i;if(nM(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new Zn,this.context??=new Yp,!this.params)this.params=new Or,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||yI(this.body)||vI(this.body)||CI(this.body)||rM(this.body)?this.body:this.body instanceof Or?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||CI(this.body)?null:vI(this.body)?this.body.type||null:yI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Or?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new n(t,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}},xr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(xr||{}),za=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Zn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Yu=class n extends za{constructor(e={}){super(e),this.type=xr.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},qa=class n extends za{constructor(e={}){super(e),this.type=xr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},kr=class extends za{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},wI=200,oM=204;function Kp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Zp=(()=>{let e=class e{constructor(r){this.handler=r}request(r,o,i={}){let s;if(r instanceof $a)s=r;else{let l;i.headers instanceof Zn?l=i.headers:l=new Zn(i.headers);let u;i.params&&(i.params instanceof Or?u=i.params:u=new Or({fromObject:i.params})),s=new $a(r,o,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=k(s).pipe(ln(l=>this.handler.handle(l)));if(r instanceof $a||i.observe==="events")return a;let c=a.pipe(At(l=>l instanceof qa));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(G(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(G(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(G(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(G(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(r,o={}){return this.request("DELETE",r,o)}get(r,o={}){return this.request("GET",r,o)}head(r,o={}){return this.request("HEAD",r,o)}jsonp(r,o){return this.request("JSONP",r,{params:new Or().append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,o={}){return this.request("OPTIONS",r,o)}patch(r,o,i={}){return this.request("PATCH",r,Kp(i,o))}post(r,o,i={}){return this.request("POST",r,Kp(i,o))}put(r,o,i={}){return this.request("PUT",r,Kp(i,o))}};e.\u0275fac=function(o){return new(o||e)(M(Ga))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),iM=/^\)\]\}',?\n/,sM="X-Request-URL";function EI(n){if(n.url)return n.url;let e=sM.toLocaleLowerCase();return n.headers.get(e)}var aM=(()=>{let e=class e{constructor(){this.fetchImpl=T(Qp,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=T(Ie)}handle(r){return new de(o=>{let i=new AbortController;return this.doRequest(r,i.signal,o).then(Jp,s=>o.error(new kr({error:s}))),()=>i.abort()})}doRequest(r,o,i){return p(this,null,function*(){let s=this.createRequestInit(r),a;try{let v=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,m({signal:o},s)));cM(v),i.next({type:xr.Sent}),a=yield v}catch(v){i.error(new kr({error:v,status:v.status??0,statusText:v.statusText,url:r.urlWithParams,headers:v.headers}));return}let c=new Zn(a.headers),l=a.statusText,u=EI(a)??r.urlWithParams,d=a.status,f=null;if(r.reportProgress&&i.next(new Yu({headers:c,status:d,statusText:l,url:u})),a.body){let v=a.headers.get("content-length"),I=[],S=a.body.getReader(),_=0,X,ee,he=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>p(this,null,function*(){for(;;){let{done:je,value:Wt}=yield S.read();if(je)break;if(I.push(Wt),_+=Wt.length,r.reportProgress){ee=r.responseType==="text"?(ee??"")+(X??=new TextDecoder).decode(Wt,{stream:!0}):void 0;let Si=()=>i.next({type:xr.DownloadProgress,total:v?+v:void 0,loaded:_,partialText:ee});he?he.run(Si):Si()}}}));let rt=this.concatChunks(I,_);try{let je=a.headers.get("Content-Type")??"";f=this.parseBody(r,rt,je)}catch(je){i.error(new kr({error:je,headers:new Zn(a.headers),status:a.status,statusText:a.statusText,url:EI(a)??r.urlWithParams}));return}}d===0&&(d=f?wI:0),d>=200&&d<300?(i.next(new qa({body:f,headers:c,status:d,statusText:l,url:u})),i.complete()):i.error(new kr({error:f,headers:c,status:d,statusText:l,url:u}))})}parseBody(r,o,i){switch(r.responseType){case"json":let s=new TextDecoder().decode(o).replace(iM,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(o);case"blob":return new Blob([o],{type:i});case"arraybuffer":return o.buffer}}createRequestInit(r){let o={},i=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>o[s]=a.join(",")),r.headers.has("Accept")||(o.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let s=r.detectContentTypeHeader();s!==null&&(o["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:o,credentials:i}}concatChunks(r,o){let i=new Uint8Array(o),s=0;for(let a of r)i.set(a,s),s+=a.length;return i}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),Qp=class{};function Jp(){}function cM(n){n.then(Jp,Jp)}function lM(n,e){return e(n)}function uM(n,e,t){return(r,o)=>hn(t,()=>e(r,i=>n(i,o)))}var SI=new x(""),dM=new x(""),hM=new x("",{providedIn:"root",factory:()=>!0});var II=(()=>{let e=class e extends Ga{constructor(r,o){super(),this.backend=r,this.injector=o,this.chain=null,this.pendingTasks=T(_r),this.contributeToStability=T(hM)}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(SI),...this.injector.get(dM,[])]));this.chain=o.reduceRight((i,s)=>uM(i,s,this.injector),lM)}if(this.contributeToStability){let o=this.pendingTasks.add();return this.chain(r,i=>this.backend.handle(i)).pipe(ho(()=>this.pendingTasks.remove(o)))}else return this.chain(r,o=>this.backend.handle(o))}};e.\u0275fac=function(o){return new(o||e)(M(Wu),M(Mt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})();var fM=/^\)\]\}',?\n/;function pM(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var TI=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new L(-2800,!1);let o=this.xhrFactory;return(o.\u0275loadImpl?le(o.\u0275loadImpl()):k(null)).pipe(bt(()=>new de(s=>{let a=o.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((S,_)=>a.setRequestHeader(S,_.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let S=r.detectContentTypeHeader();S!==null&&a.setRequestHeader("Content-Type",S)}if(r.responseType){let S=r.responseType.toLowerCase();a.responseType=S!=="json"?S:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let S=a.statusText||"OK",_=new Zn(a.getAllResponseHeaders()),X=pM(a)||r.url;return l=new Yu({headers:_,status:a.status,statusText:S,url:X}),l},d=()=>{let{headers:S,status:_,statusText:X,url:ee}=u(),he=null;_!==oM&&(he=typeof a.response>"u"?a.responseText:a.response),_===0&&(_=he?wI:0);let rt=_>=200&&_<300;if(r.responseType==="json"&&typeof he=="string"){let je=he;he=he.replace(fM,"");try{he=he!==""?JSON.parse(he):null}catch(Wt){he=je,rt&&(rt=!1,he={error:Wt,text:he})}}rt?(s.next(new qa({body:he,headers:S,status:_,statusText:X,url:ee||void 0})),s.complete()):s.error(new kr({error:he,headers:S,status:_,statusText:X,url:ee||void 0}))},f=S=>{let{url:_}=u(),X=new kr({error:S,status:a.status||0,statusText:a.statusText||"Unknown Error",url:_||void 0});s.error(X)},g=!1,v=S=>{g||(s.next(u()),g=!0);let _={type:xr.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(_.total=S.total),r.responseType==="text"&&a.responseText&&(_.partialText=a.responseText),s.next(_)},I=S=>{let _={type:xr.UploadProgress,loaded:S.loaded};S.lengthComputable&&(_.total=S.total),s.next(_)};return a.addEventListener("load",d),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),r.reportProgress&&(a.addEventListener("progress",v),c!==null&&a.upload&&a.upload.addEventListener("progress",I)),a.send(c),s.next({type:xr.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",d),a.removeEventListener("timeout",f),r.reportProgress&&(a.removeEventListener("progress",v),c!==null&&a.upload&&a.upload.removeEventListener("progress",I)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(o){return new(o||e)(M(is))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),AI=new x(""),gM="XSRF-TOKEN",mM=new x("",{providedIn:"root",factory:()=>gM}),yM="X-XSRF-TOKEN",vM=new x("",{providedIn:"root",factory:()=>yM}),Qu=class{},CM=(()=>{let e=class e{constructor(r,o,i){this.doc=r,this.platform=o,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=$u(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(o){return new(o||e)(M(Se),M(Pt),M(mM))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})();function EM(n,e){let t=n.url.toLowerCase();if(!T(AI)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=T(Qu).getToken(),o=T(vM);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}function bI(...n){let e=[Zp,TI,II,{provide:Ga,useExisting:II},{provide:Wu,useFactory:()=>T(aM,{optional:!0})??T(TI)},{provide:SI,useValue:EM,multi:!0},{provide:AI,useValue:!0},{provide:Qu,useClass:CM}];for(let t of n)e.push(...t.\u0275providers);return Ji(e)}var tg=class extends ju{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ng=class n extends tg{static makeCurrent(){hI(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=IM();return t==null?null:TM(t)}resetBaseElement(){Ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $u(document.cookie,e)}},Ka=null;function IM(){return Ka=Ka||document.querySelector("base"),Ka?Ka.getAttribute("href"):null}function TM(n){return new URL(n,document.baseURI).pathname}var wM=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),Ju=new x(""),MI=(()=>{let e=class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(i=>{i.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,o,i){return this._findPluginFor(o).addEventListener(r,o,i)}getZone(){return this._zone}_findPluginFor(r){let o=this._eventNameToPlugin.get(r);if(o)return o;if(o=this._plugins.find(s=>s.supports(r)),!o)throw new L(5101,!1);return this._eventNameToPlugin.set(r,o),o}};e.\u0275fac=function(o){return new(o||e)(M(Ju),M(Ie))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),Wa=class{constructor(e){this._doc=e}},Xp="ng-app-id",NI=(()=>{let e=class e{constructor(r,o,i,s={}){this.doc=r,this.appId=o,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zu(s),this.resetHostNodes()}addStyles(r){for(let o of r)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(r){for(let o of r)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(o=>o.remove()),r.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let o of this.getAllStyles())this.addStyleToHost(r,o)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let o of this.hostNodes)this.addStyleToHost(o,r)}onStyleRemoved(r){let o=this.styleRef;o.get(r)?.elements?.forEach(i=>i.remove()),o.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Xp}="${this.appId}"]`);if(r?.length){let o=new Map;return r.forEach(i=>{i.textContent!=null&&o.set(i.textContent,i)}),o}return null}changeUsageCount(r,o){let i=this.styleRef;if(i.has(r)){let s=i.get(r);return s.usage+=o,s.usage}return i.set(r,{usage:o,elements:[]}),o}getStyleElement(r,o){let i=this.styleNodesInDOM,s=i?.get(o);if(s?.parentNode===r)return i.delete(o),s.removeAttribute(Xp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(Xp,this.appId),r.appendChild(a),a}}addStyleToHost(r,o){let i=this.getStyleElement(r,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(i):s.set(o,{elements:[i],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(o){return new(o||e)(M(Se),M(fp),M(gp,8),M(Pt))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),eg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},og=/%COMP%/g,kI="%COMP%",SM=`_nghost-${kI}`,AM=`_ngcontent-${kI}`,bM=!0,DM=new x("",{providedIn:"root",factory:()=>bM});function _M(n){return AM.replace(og,n)}function RM(n){return SM.replace(og,n)}function OI(n,e){return e.map(t=>t.replace(og,n))}var DI=(()=>{let e=class e{constructor(r,o,i,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=zu(c),this.defaultRenderer=new Ya(r,a,l,this.platformIsServer)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===_n.ShadowDom&&(o=A(m({},o),{encapsulation:_n.Emulated}));let i=this.getOrCreateRenderer(r,o);return i instanceof Zu?i.applyToHost(r):i instanceof Qa&&i.applyStyles(),i}getOrCreateRenderer(r,o){let i=this.rendererByCompId,s=i.get(o.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(o.encapsulation){case _n.Emulated:s=new Zu(l,u,o,this.appId,d,a,c,f);break;case _n.ShadowDom:return new rg(l,u,r,o,a,c,this.nonce,f);default:s=new Qa(l,u,o,d,a,c,f);break}i.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(o){return new(o||e)(M(MI),M(NI),M(fp),M(DM),M(Se),M(Pt),M(Ie),M(gp))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),Ya=class{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(eg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_I(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_I(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=eg[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=eg[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Mn.DashCase|Mn.Important)?e.style.setProperty(t,r,o&Mn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Mn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=os().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function _I(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rg=class extends Ya{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=OI(o.id,o.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qa=class extends Ya{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?OI(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Zu=class extends Qa{constructor(e,t,r,o,i,s,a,c){let l=o+"-"+r.id;super(e,t,r,i,s,a,c,l),this.contentAttr=_M(l),this.hostAttr=RM(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},MM=(()=>{let e=class e extends Wa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,i){return r.addEventListener(o,i,!1),()=>this.removeEventListener(r,o,i)}removeEventListener(r,o,i){return r.removeEventListener(o,i)}};e.\u0275fac=function(o){return new(o||e)(M(Se))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),NM=(()=>{let e=class e extends Wa{constructor(r){super(r),this.delegate=T(iI,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,o,i){return this.delegate.addEventListener(r,o,i)}removeEventListener(r,o,i){return this.delegate.removeEventListener(r,o,i)}};e.\u0275fac=function(o){return new(o||e)(M(Se))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})(),RI=["alt","control","meta","shift"],kM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OM={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xM=(()=>{let e=class e extends Wa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,o,i){let s=e.parseEventName(o),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>os().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let o=r.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let s=e._normalizeKey(o.pop()),a="",c=o.indexOf("code");if(c>-1&&(o.splice(c,1),a="code."),RI.forEach(u=>{let d=o.indexOf(u);d>-1&&(o.splice(d,1),a+=u+".")}),a+=s,o.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(r,o){let i=kM[r.key]||r.key,s="";return o.indexOf("code.")>-1&&(i=r.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),RI.forEach(a=>{if(a!==i){let c=OM[a];c(r)&&(s+=a+".")}}),s+=i,s===o)}static eventCallback(r,o,i){return s=>{e.matchEventFullKeyCode(s,r)&&i.runGuarded(()=>o(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(o){return new(o||e)(M(Se))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let n=e;return n})();function xI(n,e){return oI(m({rootComponent:n},PM(e)))}function PM(n){return{appProviders:[...HM,...n?.providers??[]],platformProviders:BM}}function LM(){ng.makeCurrent()}function FM(){return new wr}function UM(){return QC(document),document}var BM=[{provide:Pt,useValue:qp},{provide:pp,useValue:LM,multi:!0},{provide:Se,useFactory:UM,deps:[]}];var HM=[{provide:Su,useValue:"root"},{provide:wr,useFactory:FM,deps:[]},{provide:Ju,useClass:MM,multi:!0,deps:[Se,Ie,Pt]},{provide:Ju,useClass:xM,multi:!0,deps:[Se]},{provide:Ju,useClass:NM,multi:!0},DI,NI,MI,{provide:Wi,useExisting:DI},{provide:is,useClass:wM,deps:[]},[]];var PI=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(o){return new(o||e)(M(Se))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var q="primary",fc=Symbol("RouteTitle"),lg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function gs(n){return new lg(n)}function VM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function $M(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nn(n[t],e[t]))return!1;return!0}function Nn(n,e){let t=n?ug(n):void 0,r=e?ug(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!$I(n[o],e[o]))return!1;return!0}function ug(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $I(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function GI(n){return n.length>0?n[n.length-1]:null}function Pr(n){return Bh(n)?n:ja(n)?le(Promise.resolve(n)):k(n)}var GM={exact:qI,subset:KI},zI={exact:zM,subset:qM,ignored:()=>!0};function LI(n,e,t){return GM[t.paths](n.root,e.root,t.matrixParams)&&zI[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function zM(n,e){return Nn(n,e)}function qI(n,e,t){if(!xo(n.segments,e.segments)||!td(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!qI(n.children[r],e.children[r],t))return!1;return!0}function qM(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$I(n[t],e[t]))}function KI(n,e,t){return WI(n,e,e.segments,t)}function WI(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!xo(o,t)||e.hasChildren()||!td(o,t,r))}else if(n.segments.length===t.length){if(!xo(n.segments,t)||!td(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!KI(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!xo(n.segments,o)||!td(n.segments,o,r)||!n.children[q]?!1:WI(n.children[q],e,i,r)}}function td(n,e,t){return e.every((r,o)=>zI[t](n[o].parameters,r.parameters))}var er=class{constructor(e=new fe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){return YM.serialize(this)}},fe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}},Oo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gs(this.parameters),this._parameterMap}toString(){return QI(this)}};function KM(n,e){return xo(n,e)&&n.every((t,r)=>Nn(t.parameters,e[r].parameters))}function xo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function WM(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===q&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==q&&(t=t.concat(e(o,r)))}),t}var Lg=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>new rc,providedIn:"root"});let n=e;return n})(),rc=class{parse(e){let t=new hg(e);return new er(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ja(e.root,!0)}`,r=ZM(e.queryParams),o=typeof e.fragment=="string"?`#${QM(e.fragment)}`:"";return`${t}${r}${o}`}},YM=new rc;function nd(n){return n.segments.map(e=>QI(e)).join("/")}function Ja(n,e){if(!n.hasChildren())return nd(n);if(e){let t=n.children[q]?Ja(n.children[q],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==q&&r.push(`${o}:${Ja(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=WM(n,(r,o)=>o===q?[Ja(n.children[q],!1)]:[`${o}:${Ja(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[q]!=null?`${nd(n)}/${t[0]}`:`${nd(n)}/(${t.join("//")})`}}function YI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xu(n){return YI(n).replace(/%3B/gi,";")}function QM(n){return encodeURI(n)}function dg(n){return YI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rd(n){return decodeURIComponent(n)}function FI(n){return rd(n.replace(/\+/g,"%20"))}function QI(n){return`${dg(n.path)}${JM(n.parameters)}`}function JM(n){return Object.entries(n).map(([e,t])=>`;${dg(e)}=${dg(t)}`).join("")}function ZM(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${Xu(t)}=${Xu(o)}`).join("&"):`${Xu(t)}=${Xu(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var XM=/^[^\/()?;#]+/;function ig(n){let e=n.match(XM);return e?e[0]:""}var eN=/^[^\/()?;=#]+/;function tN(n){let e=n.match(eN);return e?e[0]:""}var nN=/^[^=?&#]+/;function rN(n){let e=n.match(nN);return e?e[0]:""}var oN=/^[^&#]+/;function iN(n){let e=n.match(oN);return e?e[0]:""}var hg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[q]=new fe(e,t)),r}parseSegment(){let e=ig(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new Oo(rd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=tN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=ig(this.remaining);o&&(r=o,this.capture(r))}e[rd(t)]=rd(r)}parseQueryParam(e){let t=rN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=iN(this.remaining);s&&(r=s,this.capture(r))}let o=FI(t),i=FI(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ig(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new L(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=q);let s=this.parseChildren();t[i]=Object.keys(s).length===1?s[q]:new fe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function JI(n){return n.segments.length>0?new fe([],{[q]:n}):n}function ZI(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=ZI(o);if(r===q&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new fe(n.segments,e);return sN(t)}function sN(n){if(n.numberOfChildren===1&&n.children[q]){let e=n.children[q];return new fe(n.segments.concat(e.segments),e.children)}return n}function oc(n){return n instanceof er}function aN(n,e,t=null,r=null){let o=XI(n);return eT(o,e,t,r)}function XI(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new fe(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=JI(r);return e??o}function eT(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return sg(o,o,o,t,r);let i=cN(e);if(i.toRoot())return sg(o,o,new fe([],{}),t,r);let s=lN(i,o,n),a=s.processChildren?ec(s.segmentGroup,s.index,i.commands):nT(s.segmentGroup,s.index,i.commands);return sg(o,s.segmentGroup,a,t,r)}function od(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ic(n){return typeof n=="object"&&n!=null&&n.outlets}function sg(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=tT(n,e,t);let a=JI(ZI(s));return new er(a,i,o)}function tT(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=tT(i,e,t)}),new fe(n.segments,r)}var id=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&od(r[0]))throw new L(4003,!1);let o=r.find(ic);if(o&&o!==GI(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new id(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new id(t,e,r)}var hs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function lN(n,e,t){if(n.isAbsolute)return new hs(e,!0,0);if(!t)return new hs(e,!1,NaN);if(t.parent===null)return new hs(t,!0,0);let r=od(n.commands[0])?0:1,o=t.segments.length-1+r;return uN(t,o,n.numberOfDoubleDots)}function uN(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new L(4005,!1);o=r.segments.length}return new hs(r,!1,o-i)}function dN(n){return ic(n[0])?n[0].outlets:{[q]:n}}function nT(n,e,t){if(n??=new fe([],{}),n.segments.length===0&&n.hasChildren())return ec(n,e,t);let r=hN(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new fe(n.segments.slice(0,r.pathIndex),{});return i.children[q]=new fe(n.segments.slice(r.pathIndex),n.children),ec(i,0,o)}else return r.match&&o.length===0?new fe(n.segments,{}):r.match&&!n.hasChildren()?fg(n,e,t):r.match?ec(n,0,o):fg(n,e,t)}function ec(n,e,t){if(t.length===0)return new fe(n.segments,{});{let r=dN(t),o={};if(Object.keys(r).some(i=>i!==q)&&n.children[q]&&n.numberOfChildren===1&&n.children[q].segments.length===0){let i=ec(n.children[q],e,t);return new fe(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=nT(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new fe(n.segments,o)}}function hN(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(ic(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!BI(c,l,s))return i;r+=2}else{if(!BI(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function fg(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(ic(i)){let c=fN(i.outlets);return new fe(r,c)}if(o===0&&od(t[0])){let c=n.segments[e];r.push(new Oo(c.path,UI(t[0]))),o++;continue}let s=ic(i)?i.outlets[q]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&od(a)?(r.push(new Oo(s,UI(a))),o+=2):(r.push(new Oo(s,{})),o++)}return new fe(r,{})}function fN(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=fg(new fe([],{}),0,r))}),e}function UI(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function BI(n,e,t){return n==t.path&&Nn(e,t.parameters)}var tc="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),en=class{constructor(e,t){this.id=e,this.url=t}},sc=class extends en{constructor(e,t,r="imperative",o=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Po=class extends en{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($t||{}),pg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(pg||{}),Xn=class extends en{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lo=class extends en{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=at.NavigationSkipped}},ac=class extends en{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sd=class extends en{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gg=class extends en{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mg=class extends en{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yg=class extends en{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vg=class extends en{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Eg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ig=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wg=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sg=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var cc=class{},ms=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function pN(n,e){return n.providers&&!n._injector&&(n._injector=Fp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yn(n){return n.outlet||q}function gN(n,e){let t=n.filter(r=>yn(r)===e);return t.push(...n.filter(r=>yn(r)!==e)),t}function pc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ag=class{get injector(){return pc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new fd(this.rootInjector),this.attachRef=null}},fd=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,o){let i=this.getOrCreateContext(r);i.outlet=o,this.contexts.set(r,i)}onChildOutletDestroyed(r){let o=this.getContext(r);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let o=this.getContext(r);return o||(o=new Ag(this.rootInjector),this.contexts.set(r,o)),o}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(o){return new(o||e)(M(Mt))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ad=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=bg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=bg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Dg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Dg(e,this._root).map(t=>t.value)}};function bg(n,e){if(n===e.value)return e;for(let t of e.children){let r=bg(n,t);if(r)return r}return null}function Dg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Dg(n,t);if(r.length)return r.unshift(e),r}return[]}var Vt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var cd=class extends ad{constructor(e,t){super(e),this.snapshot=t,Fg(this,e)}toString(){return this.snapshot.toString()}};function rT(n){let e=mN(n),t=new $e([new Oo("",{})]),r=new $e({}),o=new $e({}),i=new $e({}),s=new $e(""),a=new ys(t,r,i,s,o,q,n,e.root);return a.snapshot=e.root,new cd(new Vt(a,[]),e)}function mN(n){let e={},t={},r={},o="",i=new fs([],e,r,o,t,q,n,null,{});return new ud("",new Vt(i,[]))}var ys=class{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(l=>l[fc]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>gs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>gs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ld(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:m(m({},e.params),n.params),data:m(m({},e.data),n.data),resolve:m(m(m(m({},n.data),e.data),o?.data),n._resolvedData)}:r={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},o&&iT(o)&&(r.resolve[fc]=o.title),r}var fs=class{get title(){return this.data?.[fc]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ud=class extends ad{constructor(e,t){super(t),this.url=e,Fg(this,t)}toString(){return oT(this._root)}};function Fg(n,e){e.value._routerState=n,e.children.forEach(t=>Fg(n,t))}function oT(n){let e=n.children.length>0?` { ${n.children.map(oT).join(", ")} } `:"";return`${n.value}${e}`}function ag(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nn(e.params,t.params)||n.paramsSubject.next(t.params),$M(e.url,t.url)||n.urlSubject.next(t.url),Nn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _g(n,e){let t=Nn(n.params,e.params)&&KM(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||_g(n.parent,e.parent))}function iT(n){return typeof n.title=="string"||n.title===null}var Ug=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=q,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=T(fd),this.location=T(Rr),this.changeDetector=T(Mo),this.inputBinder=T(Bg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:o,previousValue:i}=r.name;if(o)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,o){this.activated=r,this._activatedRoute=o,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,o){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=r;let i=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Rg(r,c,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:o}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275dir=mt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[La]});let n=e;return n})(),Rg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ys?this.route:e===fd?this.childContexts:this.parent.get(e,t)}},Bg=new x("");function yN(n,e,t){let r=lc(n,e._root,t?t._root:void 0);return new cd(r,e)}function lc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=vN(n,e,t);return new Vt(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>lc(n,a)),s}}let r=CN(e.value),o=e.children.map(i=>lc(n,i));return new Vt(r,o)}}function vN(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return lc(n,r,o);return lc(n,r)})}function CN(n){return new ys(new $e(n.url),new $e(n.params),new $e(n.queryParams),new $e(n.fragment),new $e(n.data),n.outlet,n.component,n)}var uc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},sT="ngNavigationCancelingError";function dd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=oc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=aT(!1,$t.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function aT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[sT]=!0,t.cancellationCode=e,t}function EN(n){return cT(n)&&oc(n.url)}function cT(n){return!!n&&n[sT]}var IN=(n,e,t,r)=>G(o=>(new Mg(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),Mg=class{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ag(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=ds(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=ds(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=ds(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=ds(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Sg(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Tg(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(ag(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ag(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},hd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ps=class{constructor(e,t){this.component=e,this.route=t}};function TN(n,e,t){let r=n._root,o=e?e._root:null;return Za(r,o,t,[r.value])}function wN(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Cs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xv(n)?n:e.get(n):r}function Za(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=ds(e);return n.children.forEach(s=>{SN(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>nc(a,t.getContext(s),o)),o}function SN(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=AN(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new hd(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?Za(n,e,a?a.children:null,r,o):Za(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ps(a.outlet.component,s))}else s&&nc(e,a,o),o.canActivateChecks.push(new hd(r)),i.component?Za(n,null,a?a.children:null,r,o):Za(n,null,t,r,o);return o}function AN(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!xo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xo(n.url,e.url)||!Nn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_g(n,e)||!Nn(n.queryParams,e.queryParams);case"paramsChange":default:return!_g(n,e)}}function nc(n,e,t){let r=ds(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?nc(s,e.children.getContext(i),t):nc(s,null,t):nc(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ps(e.outlet.component,o)):t.canDeactivateChecks.push(new ps(null,o)):t.canDeactivateChecks.push(new ps(null,o))}function gc(n){return typeof n=="function"}function bN(n){return typeof n=="boolean"}function DN(n){return n&&gc(n.canLoad)}function _N(n){return n&&gc(n.canActivate)}function RN(n){return n&&gc(n.canActivateChild)}function MN(n){return n&&gc(n.canDeactivate)}function NN(n){return n&&gc(n.canMatch)}function lT(n){return n instanceof $n||n?.name==="EmptyError"}var ed=Symbol("INITIAL_VALUE");function vs(){return bt(n=>Hl(n.map(e=>e.pipe(Sn(1),Gh(ed)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===ed)return ed;if(t===!1||kN(t))return t}return!0}),At(e=>e!==ed),Sn(1)))}function kN(n){return oc(n)||n instanceof uc}function ON(n,e){return Ge(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?k(A(m({},t),{guardsResult:!0})):xN(s,r,o,n).pipe(Ge(a=>a&&bN(a)?PN(r,i,n,e):k(a)),G(a=>A(m({},t),{guardsResult:a})))})}function xN(n,e,t,r){return le(n).pipe(Ge(o=>HN(o.component,o.route,t,e,r)),An(o=>o!==!0,!0))}function PN(n,e,t,r){return le(e).pipe(ln(o=>xi(FN(o.route.parent,r),LN(o.route,r),BN(n,o.path,t),UN(n,o.route,t))),An(o=>o!==!0,!0))}function LN(n,e){return n!==null&&e&&e(new wg(n)),k(!0)}function FN(n,e){return n!==null&&e&&e(new Ig(n)),k(!0)}function UN(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return k(!0);let o=r.map(i=>jl(()=>{let s=pc(e)??t,a=Cs(i,s),c=_N(a)?a.canActivate(e,n):hn(s,()=>a(e,n));return Pr(c).pipe(An())}));return k(o).pipe(vs())}function BN(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>wN(s)).filter(s=>s!==null).map(s=>jl(()=>{let a=s.guards.map(c=>{let l=pc(s.node)??t,u=Cs(c,l),d=RN(u)?u.canActivateChild(r,n):hn(l,()=>u(r,n));return Pr(d).pipe(An())});return k(a).pipe(vs())}));return k(i).pipe(vs())}function HN(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return k(!0);let s=i.map(a=>{let c=pc(e)??o,l=Cs(a,c),u=MN(l)?l.canDeactivate(n,e,t,r):hn(c,()=>l(n,e,t,r));return Pr(u).pipe(An())});return k(s).pipe(vs())}function jN(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return k(!0);let i=o.map(s=>{let a=Cs(s,n),c=DN(a)?a.canLoad(e,t):hn(n,()=>a(e,t));return Pr(c)});return k(i).pipe(vs(),uT(r))}function uT(n){return xh(Xe(e=>{if(typeof e!="boolean")throw dd(n,e)}),G(e=>e===!0))}function VN(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return k(!0);let i=o.map(s=>{let a=Cs(s,n),c=NN(a)?a.canMatch(e,t):hn(n,()=>a(e,t));return Pr(c)});return k(i).pipe(vs(),uT(r))}var dc=class{constructor(e){this.segmentGroup=e||null}},hc=class extends Error{constructor(e){super(),this.urlTree=e}};function us(n){return Oi(new dc(n))}function $N(n){return Oi(new L(4e3,!1))}function GN(n){return Oi(aT(!1,$t.GuardRejected))}var Ng=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return k(r);if(o.numberOfChildren>1||!o.children[q])return $N(`${e.redirectTo}`);o=o.children[q]}}applyRedirectCommands(e,t,r,o,i){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:g,data:v,title:I}=o,S=hn(i,()=>a({params:g,data:v,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:I}));if(S instanceof er)throw new hc(S);t=S}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new hc(s);return s}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new er(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new fe(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new L(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}},kg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zN(n,e,t,r,o){let i=Hg(n,e,t);return i.matched?(r=pN(e,r),VN(r,e,t,o).pipe(G(s=>s===!0?i:m({},kg)))):k(i)}function Hg(n,e,t){if(e.path==="**")return qN(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?m({},kg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||VM)(t,n,e);if(!o)return m({},kg);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?m(m({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function qN(n){return{matched:!0,parameters:n.length>0?GI(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function HI(n,e,t,r){return t.length>0&&YN(n,t,r)?{segmentGroup:new fe(e,WN(r,new fe(t,n.children))),slicedSegments:[]}:t.length===0&&QN(n,t,r)?{segmentGroup:new fe(n.segments,KN(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new fe(n.segments,n.children),slicedSegments:t}}function KN(n,e,t,r){let o={};for(let i of t)if(pd(n,e,i)&&!r[yn(i)]){let s=new fe([],{});o[yn(i)]=s}return m(m({},r),o)}function WN(n,e){let t={};t[q]=e;for(let r of n)if(r.path===""&&yn(r)!==q){let o=new fe([],{});t[yn(r)]=o}return t}function YN(n,e,t){return t.some(r=>pd(n,e,r)&&yn(r)!==q)}function QN(n,e,t){return t.some(r=>pd(n,e,r))}function pd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function JN(n,e,t,r){return yn(n)!==r&&(r===q||!pd(e,t,n))?!1:Hg(e,n,t).matched}function ZN(n,e,t){return e.length===0&&!n.children[t]}var Og=class{};function XN(n,e,t,r,o,i,s="emptyOnly"){return new xg(n,e,t,r,o,s,i).recognize()}var e0=31,xg=class{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ng(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}recognize(){let e=HI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let o=new Vt(r,t),i=new ud("",o),s=aN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let t=new fs([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),q,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,q,t).pipe(G(r=>({children:r,rootSnapshot:t})),wn(r=>{if(r instanceof hc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,i):this.processSegment(e,t,r,r.segments,o,!0,i).pipe(G(s=>s instanceof Vt?[s]:[]))}processChildren(e,t,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return le(i).pipe(ln(s=>{let a=r.children[s],c=gN(t,s);return this.processSegmentGroup(e,c,a,s,o)}),$h((s,a)=>(s.push(...a),s)),vr(null),Vh(),Ge(s=>{if(s===null)return us(r);let a=dT(s);return t0(a),k(a)}))}processSegment(e,t,r,o,i,s,a){return le(t).pipe(ln(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a).pipe(wn(l=>{if(l instanceof dc)return k(null);throw l}))),An(c=>!!c),wn(c=>{if(lT(c))return ZN(r,o,i)?k(new Og):us(r);throw c}))}processSegmentAgainstRoute(e,t,r,o,i,s,a,c){return JN(r,o,i,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c):us(o):us(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=Hg(t,o,i);if(!c)return us(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>e0&&(this.allowRedirects=!1));let g=new fs(i,l,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,jI(o),yn(o),o.component??o._loadedComponent??null,o,VI(o)),v=ld(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let I=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,g,e);return this.applyRedirects.lineralizeSegments(o,I).pipe(Ge(S=>this.processSegment(e,r,t,S.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a=zN(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(bt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(bt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:g}=c,v=new fs(f,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,jI(r),yn(r),r.component??r._loadedComponent??null,r,VI(r)),I=ld(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(I.params),v.data=Object.freeze(I.data);let{segmentGroup:S,slicedSegments:_}=HI(t,f,g,l);if(_.length===0&&S.hasChildren())return this.processChildren(u,l,S,v).pipe(G(ee=>new Vt(v,ee)));if(l.length===0&&_.length===0)return k(new Vt(v,[]));let X=yn(r)===i;return this.processSegment(u,l,S,_,X?q:i,!0,v).pipe(G(ee=>new Vt(v,ee instanceof Vt?[ee]:[])))}))):us(t)))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?k({routes:t._loadedRoutes,injector:t._loadedInjector}):jN(e,t,r,this.urlSerializer).pipe(Ge(o=>o?this.configLoader.loadChildren(e,t).pipe(Xe(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):GN(t))):k({routes:[],injector:e})}};function t0(n){n.sort((e,t)=>e.value.outlet===q?-1:t.value.outlet===q?1:e.value.outlet.localeCompare(t.value.outlet))}function n0(n){let e=n.value.routeConfig;return e&&e.path===""}function dT(n){let e=[],t=new Set;for(let r of n){if(!n0(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=dT(r.children);e.push(new Vt(r.value,o))}return e.filter(r=>!t.has(r))}function jI(n){return n.data||{}}function VI(n){return n.resolve||{}}function r0(n,e,t,r,o,i){return Ge(s=>XN(n,e,t,r,s.extractedUrl,o,i).pipe(G(({state:a,tree:c})=>A(m({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function o0(n,e){return Ge(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return k(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of hT(c))s.add(l);let a=0;return le(s).pipe(ln(c=>i.has(c)?i0(c,r,n,e):(c.data=ld(c,c.parent,n).resolve,k(void 0))),Xe(()=>a++),Pi(1),Ge(c=>a===s.size?k(t):wt))})}function hT(n){let e=n.children.map(t=>hT(t)).flat();return[n,...e]}function i0(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!iT(o)&&(i[fc]=o.title),s0(i,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=ld(n,n.parent,t).resolve,null)))}function s0(n,e,t,r){let o=ug(n);if(o.length===0)return k({});let i={};return le(o).pipe(Ge(s=>a0(n[s],e,t,r).pipe(An(),Xe(a=>{if(a instanceof uc)throw dd(new rc,a);i[s]=a}))),Pi(1),jh(i),wn(s=>lT(s)?wt:Oi(s)))}function a0(n,e,t,r){let o=pc(e)??r,i=Cs(n,o),s=i.resolve?i.resolve(e,t):hn(o,()=>i(e,t));return Pr(s)}function cg(n){return bt(e=>{let t=n(e);return t?le(t).pipe(G(()=>e)):k(e)})}var fT=(()=>{let e=class e{buildTitle(r){let o,i=r.root;for(;i!==void 0;)o=this.getResolvedTitleForRoute(i)??o,i=i.children.find(s=>s.outlet===q);return o}getResolvedTitleForRoute(r){return r.data[fc]}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>T(c0),providedIn:"root"});let n=e;return n})(),c0=(()=>{let e=class e extends fT{constructor(r){super(),this.title=r}updateTitle(r){let o=this.buildTitle(r);o!==void 0&&this.title.setTitle(o)}};e.\u0275fac=function(o){return new(o||e)(M(PI))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jg=new x("",{providedIn:"root",factory:()=>({})}),l0=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=se({type:e,selectors:[["ng-component"]],standalone:!0,features:[ge],decls:1,vars:0,template:function(o,i){o&1&&et(0,"router-outlet")},dependencies:[Ug],encapsulation:2});let n=e;return n})();function Vg(n){let e=n.children&&n.children.map(Vg),t=e?A(m({},n),{children:e}):m({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==q&&(t.component=l0),t}var $g=new x(""),u0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(Hp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return k(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Pr(r.loadComponent()).pipe(G(pT),Xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ho(()=>{this.componentLoaders.delete(r)})),i=new ki(o,()=>new Ne).pipe(Ni());return this.componentLoaders.set(r,i),i}loadChildren(r,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return k({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=d0(o,this.compiler,r,this.onLoadEndListener).pipe(ho(()=>{this.childrenLoaders.delete(o)})),a=new ki(s,()=>new Ne).pipe(Ni());return this.childrenLoaders.set(o,a),a}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function d0(n,e,t,r){return Pr(n.loadChildren()).pipe(G(pT),Ge(o=>o instanceof ka||Array.isArray(o)?k(o):le(e.compileModuleAsync(o))),G(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get($g,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vg),injector:i}}))}function h0(n){return n&&typeof n=="object"&&"default"in n}function pT(n){return h0(n)?n.default:n}var Gg=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>T(f0),providedIn:"root"});let n=e;return n})(),f0=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,o){return r}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),p0=new x("");var g0=new x(""),m0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ne,this.transitionAbortSubject=new Ne,this.configLoader=T(u0),this.environmentInjector=T(Mt),this.urlSerializer=T(Lg),this.rootContexts=T(fd),this.location=T(Nr),this.inputBindingEnabled=T(Bg,{optional:!0})!==null,this.titleStrategy=T(fT),this.options=T(jg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T(Gg),this.createViewTransition=T(p0,{optional:!0}),this.navigationErrorHandler=T(g0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null;let r=i=>this.events.next(new Cg(i)),o=i=>this.events.next(new Eg(i));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let o=++this.navigationId;this.transitions?.next(A(m(m({},this.transitions.value),r),{id:o}))}setupNavigations(r,o,i){return this.transitions=new $e({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:tc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(s=>s.id!==0),G(s=>A(m({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),bt(s=>{let a=!1,c=!1;return k(s).pipe(bt(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),wt;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?A(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Lo(l.id,this.urlSerializer.serialize(l.rawUrl),f,pg.IgnoredSameUrlNavigation)),l.resolve(!1),wt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return k(l).pipe(bt(f=>{let g=this.transitions?.getValue();return this.events.next(new sc(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?wt:Promise.resolve(f)}),r0(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=A(m({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new sd(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:g,source:v,restoredState:I,extras:S}=l,_=new sc(f,this.urlSerializer.serialize(g),v,I);this.events.next(_);let X=rT(this.rootComponentType).snapshot;return this.currentTransition=s=A(m({},l),{targetSnapshot:X,urlAfterRedirects:g,extras:A(m({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,k(s)}else{let f="";return this.events.next(new Lo(l.id,this.urlSerializer.serialize(l.extractedUrl),f,pg.IgnoredByUrlHandlingStrategy)),l.resolve(!1),wt}}),Xe(l=>{let u=new gg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),G(l=>(this.currentTransition=s=A(m({},l),{guards:TN(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),ON(this.environmentInjector,l=>this.events.next(l)),Xe(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw dd(this.urlSerializer,l.guardsResult);let u=new mg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),At(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$t.GuardRejected),!1)),cg(l=>{if(l.guards.canActivateChecks.length)return k(l).pipe(Xe(u=>{let d=new yg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),bt(u=>{let d=!1;return k(u).pipe(o0(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",$t.NoDataFromResolver)}}))}),Xe(u=>{let d=new vg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),cg(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Xe(g=>{d.component=g}),G(()=>{})));for(let g of d.children)f.push(...u(g));return f};return Hl(u(l.targetSnapshot.root)).pipe(vr(null),Sn(1))}),cg(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?le(d).pipe(G(()=>s)):k(s)}),G(l=>{let u=yN(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=A(m({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Xe(()=>{this.events.next(new cc)}),IN(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Sn(1),Xe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Po(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),zh(this.transitionAbortSubject.pipe(Xe(l=>{throw l}))),ho(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),wn(l=>{if(c=!0,cT(l))this.events.next(new Xn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),EN(l)?this.events.next(new ms(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new ac(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let d=hn(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof uc){let{message:f,cancellationCode:g}=dd(this.urlSerializer,d);this.events.next(new Xn(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new ms(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=r.errorHandler(l);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return wt}))}))}cancelNavigationTransition(r,o,i){let s=new Xn(r.id,this.urlSerializer.serialize(r.extractedUrl),o,i);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),o=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==o?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function y0(n){return n!==tc}var v0=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>T(C0),providedIn:"root"});let n=e;return n})(),Pg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},C0=(()=>{let e=class e extends Pg{};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Fa(e)))(i||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),gT=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:()=>T(E0),providedIn:"root"});let n=e;return n})(),E0=(()=>{let e=class e extends gT{constructor(){super(...arguments),this.location=T(Nr),this.urlSerializer=T(Lg),this.options=T(jg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T(Gg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(o=>{o.type==="popstate"&&r(o.url,o.state)})}handleRouterEvent(r,o){if(r instanceof sc)this.stateMemento=this.createStateMemento();else if(r instanceof Lo)this.rawUrlTree=o.initialUrl;else if(r instanceof sd){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(o.targetBrowserUrl??i,o)}}else r instanceof cc?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&!o.extras.skipLocationChange&&this.setBrowserUrl(o.targetBrowserUrl??this.rawUrlTree,o)):r instanceof Xn&&(r.code===$t.GuardRejected||r.code===$t.NoDataFromResolver)?this.restoreHistory(o):r instanceof ac?this.restoreHistory(o,!0):r instanceof Po&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,o){let i=r instanceof er?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(i)||o.extras.replaceUrl){let s=this.browserPageId,a=m(m({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(i,"",a)}else{let s=m(m({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(r,o=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,o){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:o}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(i){return(r||(r=Fa(e)))(i||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Xa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Xa||{});function I0(n,e){n.events.pipe(At(t=>t instanceof Po||t instanceof Xn||t instanceof ac||t instanceof Lo),G(t=>t instanceof Po||t instanceof Lo?Xa.COMPLETE:(t instanceof Xn?t.code===$t.Redirect||t.code===$t.SupersededByNewNavigation:!1)?Xa.REDIRECTING:Xa.FAILED),At(t=>t!==Xa.REDIRECTING),Sn(1)).subscribe(()=>{e()})}function T0(n){throw n}var w0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gd=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=T(Bu),this.stateManager=T(gT),this.options=T(jg,{optional:!0})||{},this.pendingTasks=T(_r),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(m0),this.urlSerializer=T(Lg),this.location=T(Nr),this.urlHandlingStrategy=T(Gg),this._events=new Ne,this.errorHandler=this.options.errorHandler||T0,this.navigated=!1,this.routeReuseStrategy=T(v0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T($g,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(Bg,{optional:!0}),this.eventsSubscription=new Pe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(o=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof Xn&&o.code!==$t.Redirect&&o.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Po)this.navigated=!0;else if(o instanceof ms){let a=o.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(o.url,i.currentRawUrl),l=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||y0(i.source)},a);this.scheduleNavigation(c,tc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}b0(o)&&this._events.next(o)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),tc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",o)},0)})}navigateToSyncWithBrowser(r,o,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=m({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,o,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Vg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,o={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=o,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=m(m({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=XI(g)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return eT(f,r,d,u??null)}navigateByUrl(r,o={skipLocationChange:!1}){let i=oc(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,tc,null,o)}navigate(r,o={skipLocationChange:!1}){return A0(r),this.navigateByUrl(this.createUrlTree(r,o),o)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,o){let i;if(o===!0?i=m({},w0):o===!1?i=m({},S0):i=o,oc(r))return LI(this.currentUrlTree,r,i);let s=this.parseUrl(r);return LI(this.currentUrlTree,s,i)}removeEmptyProps(r){return Object.entries(r).reduce((o,[i,s])=>(s!=null&&(o[i]=s),o),{})}scheduleNavigation(r,o,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,g)=>{c=f,l=g});let d=this.pendingTasks.add();return I0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function A0(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new L(4008,!1)}function b0(n){return!(n instanceof cc)&&!(n instanceof ms)}var D0=new x("");function mT(n,...e){return Ji([{provide:$g,multi:!0,useValue:n},[],{provide:ys,useFactory:_0,deps:[gd]},{provide:Hu,multi:!0,useFactory:R0},e.map(t=>t.\u0275providers)])}function _0(n){return n.routerState.root}function R0(){let n=T(To);return e=>{let t=n.get(Ro);if(e!==t.components[0])return;let r=n.get(gd),o=n.get(M0);n.get(N0)===1&&r.initialNavigation(),n.get(k0,null,W.Optional)?.setUpPreloading(),n.get(D0,null,W.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var M0=new x("",{factory:()=>new Ne}),N0=new x("",{providedIn:"root",factory:()=>1});var k0=new x("");var th={};an(th,{blockAPICallsBeforeInitialize:()=>Xd,blockAcquireTokenInPopups:()=>ew,blockNonBrowserEnvironment:()=>tw,blockRedirectInIframe:()=>XT,blockReloadInHiddenIframes:()=>ZT,clearHash:()=>ny,createGuid:()=>Ak,getCurrentUri:()=>Ut,getHomepage:()=>oy,invoke:()=>Et,invokeAsync:()=>E,isInIframe:()=>il,isInPopup:()=>JT,preconnect:()=>al,preflightCheck:()=>sl,redirectPreflightCheck:()=>eh,replaceHash:()=>ry});var Vr={};an(Vr,{checkMaxAge:()=>Lc,extractTokenClaims:()=>ir,getJWSPayload:()=>ET});var y={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Es={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Gt=[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE],zg=[...Gt,y.EMAIL_SCOPE],ht={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Oe={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},vn={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Is={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Te={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},md={PLAIN:"plain",S256:"S256"},Cn={QUERY:"query",FRAGMENT:"fragment"},qg=A(m({},Cn),{FORM_POST:"form_post"}),mc={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Ts={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Me={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},O={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var yc="appmetadata",yT="client_info",Lr="1",ws={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},yt={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},We={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Q={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},tr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},yd={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},vd={username:"username",password:"password"},vc={httpSuccess:200,httpBadRequest:400},Fo={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Cd={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},En={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Ed={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var Kg=300;var Uo={};an(Uo,{postRequestFailed:()=>Ec,unexpectedError:()=>Cc});var Cc="unexpected_error",Ec="post_request_failed";var Id={[Cc]:"Unexpected error in authentication.",[Ec]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},vT={unexpectedError:{code:Cc,desc:Id[Cc]},postRequestFailed:{code:Ec,desc:Id[Ec]}},K=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||y.EMPTY_STRING,this.errorMessage=t||y.EMPTY_STRING,this.subError=r||y.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Ic(n,e){return new K(n,e?`${Id[n]} ${e}`:Id[n])}var Ye={};an(Ye,{authTimeNotFound:()=>nr,authorizationCodeMissingFromServerResponse:()=>Xo,bindingKeyNotRemoved:()=>ei,cannotAppendScopeSet:()=>Qo,cannotRemoveEmptyScope:()=>Yo,clientInfoDecodingError:()=>Fr,clientInfoEmptyError:()=>Bo,deviceCodeExpired:()=>Ac,deviceCodePollingCancelled:()=>Sc,deviceCodeUnknownError:()=>bc,emptyInputScopeSet:()=>Hr,endSessionEndpointNotSupported:()=>ti,endpointResolutionError:()=>vt,hashNotDeserialized:()=>$o,invalidAssertion:()=>Rc,invalidCacheEnvironment:()=>or,invalidCacheRecord:()=>Jo,invalidClientCredential:()=>Mc,invalidState:()=>In,keyIdMissing:()=>ni,maxAgeTranspired:()=>qo,methodNotImplemented:()=>H,missingTenantIdError:()=>xc,multipleMatchingAccounts:()=>wc,multipleMatchingAppMetadata:()=>Ko,multipleMatchingTokens:()=>Tc,nestedAppAuthBridgeDisabled:()=>Pc,networkError:()=>jo,noAccountFound:()=>Dc,noAccountInSilentRequest:()=>rr,noCryptoObject:()=>jr,noNetworkConnectivity:()=>kc,nonceMismatch:()=>zo,nullOrEmptyToken:()=>Ho,openIdConfigError:()=>Vo,requestCannotBeMade:()=>Wo,stateMismatch:()=>Go,stateNotFound:()=>Br,tokenClaimsCnfRequiredForSignedJwt:()=>Zo,tokenParsingError:()=>Ur,tokenRefreshRequired:()=>kn,unexpectedCredentialType:()=>_c,userCanceled:()=>Oc,userTimeoutReached:()=>Nc});var Fr="client_info_decoding_error",Bo="client_info_empty_error",Ur="token_parsing_error",Ho="null_or_empty_token",vt="endpoints_resolution_error",jo="network_error",Vo="openid_config_error",$o="hash_not_deserialized",In="invalid_state",Go="state_mismatch",Br="state_not_found",zo="nonce_mismatch",nr="auth_time_not_found",qo="max_age_transpired",Tc="multiple_matching_tokens",wc="multiple_matching_accounts",Ko="multiple_matching_appMetadata",Wo="request_cannot_be_made",Yo="cannot_remove_empty_scope",Qo="cannot_append_scopeset",Hr="empty_input_scopeset",Sc="device_code_polling_cancelled",Ac="device_code_expired",bc="device_code_unknown_error",rr="no_account_in_silent_request",Jo="invalid_cache_record",or="invalid_cache_environment",Dc="no_account_found",jr="no_crypto_object",_c="unexpected_credential_type",Rc="invalid_assertion",Mc="invalid_client_credential",kn="token_refresh_required",Nc="user_timeout_reached",Zo="token_claims_cnf_required_for_signedjwt",Xo="authorization_code_missing_from_server_response",ei="binding_key_not_removed",ti="end_session_endpoint_not_supported",ni="key_id_missing",kc="no_network_connectivity",Oc="user_canceled",xc="missing_tenant_id_error",H="method_not_implemented",Pc="nested_app_auth_bridge_disabled";var j={[Fr]:"The client info could not be parsed/decoded correctly",[Bo]:"The client info was empty",[Ur]:"Token cannot be parsed",[Ho]:"The token is null or empty",[vt]:"Endpoints cannot be resolved",[jo]:"Network request failed",[Vo]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[$o]:"The hash parameters could not be deserialized",[In]:"State was not the expected format",[Go]:"State mismatch error",[Br]:"State not found",[zo]:"Nonce mismatch error",[nr]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[qo]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Tc]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[wc]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ko]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Wo]:"Token request cannot be made without authorization code or refresh token.",[Yo]:"Cannot remove null or empty scope from ScopeSet",[Qo]:"Cannot append ScopeSet",[Hr]:"Empty input ScopeSet cannot be processed",[Sc]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Ac]:"Device code is expired.",[bc]:"Device code stopped polling for unknown reasons.",[rr]:"Please pass an account object, silent flow is not supported without account information",[Jo]:"Cache record object was null or undefined.",[or]:"Invalid environment when attempting to create cache entry",[Dc]:"No account found in cache for given key.",[jr]:"No crypto object detected.",[_c]:"Unexpected credential type.",[Rc]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Mc]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[kn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Nc]:"User defined timeout for device code polling reached",[Zo]:"Cannot generate a POP jwt if the token_claims are not populated",[Xo]:"Server response does not contain an authorization code to proceed",[ei]:"Could not remove the credential's binding key from storage.",[ti]:"The provided authority does not support logout",[ni]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[kc]:"No network connectivity. Check your internet connection.",[Oc]:"User cancelled the flow.",[xc]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[H]:"This method has not been implemented",[Pc]:"The nested app auth bridge is disabled"},CT={clientInfoDecodingError:{code:Fr,desc:j[Fr]},clientInfoEmptyError:{code:Bo,desc:j[Bo]},tokenParsingError:{code:Ur,desc:j[Ur]},nullOrEmptyToken:{code:Ho,desc:j[Ho]},endpointResolutionError:{code:vt,desc:j[vt]},networkError:{code:jo,desc:j[jo]},unableToGetOpenidConfigError:{code:Vo,desc:j[Vo]},hashNotDeserialized:{code:$o,desc:j[$o]},invalidStateError:{code:In,desc:j[In]},stateMismatchError:{code:Go,desc:j[Go]},stateNotFoundError:{code:Br,desc:j[Br]},nonceMismatchError:{code:zo,desc:j[zo]},authTimeNotFoundError:{code:nr,desc:j[nr]},maxAgeTranspired:{code:qo,desc:j[qo]},multipleMatchingTokens:{code:Tc,desc:j[Tc]},multipleMatchingAccounts:{code:wc,desc:j[wc]},multipleMatchingAppMetadata:{code:Ko,desc:j[Ko]},tokenRequestCannotBeMade:{code:Wo,desc:j[Wo]},removeEmptyScopeError:{code:Yo,desc:j[Yo]},appendScopeSetError:{code:Qo,desc:j[Qo]},emptyInputScopeSetError:{code:Hr,desc:j[Hr]},DeviceCodePollingCancelled:{code:Sc,desc:j[Sc]},DeviceCodeExpired:{code:Ac,desc:j[Ac]},DeviceCodeUnknownError:{code:bc,desc:j[bc]},NoAccountInSilentRequest:{code:rr,desc:j[rr]},invalidCacheRecord:{code:Jo,desc:j[Jo]},invalidCacheEnvironment:{code:or,desc:j[or]},noAccountFound:{code:Dc,desc:j[Dc]},noCryptoObj:{code:jr,desc:j[jr]},unexpectedCredentialType:{code:_c,desc:j[_c]},invalidAssertion:{code:Rc,desc:j[Rc]},invalidClientCredential:{code:Mc,desc:j[Mc]},tokenRefreshRequired:{code:kn,desc:j[kn]},userTimeoutReached:{code:Nc,desc:j[Nc]},tokenClaimsRequired:{code:Zo,desc:j[Zo]},noAuthorizationCodeFromServer:{code:Xo,desc:j[Xo]},bindingKeyNotRemovedError:{code:ei,desc:j[ei]},logoutNotSupported:{code:ti,desc:j[ti]},keyIdMissing:{code:ni,desc:j[ni]},noNetworkConnectivity:{code:kc,desc:j[kc]},userCanceledError:{code:Oc,desc:j[Oc]},missingTenantIdError:{code:xc,desc:j[xc]},nestedAppAuthBridgeDisabled:{code:Pc,desc:j[Pc]}},ri=class n extends K{constructor(e,t){super(e,t?`${j[e]}: ${t}`:j[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function C(n,e){return new ri(n,e)}function ir(n,e){let t=ET(n);try{let r=e(t);return JSON.parse(r)}catch{throw C(Ur)}}function ET(n){if(!n)throw C(Ho);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw C(Ur);return t[2]}function Lc(n,e){if(e===0||Date.now()-3e5>n+e)throw C(qo)}var bd={};an(bd,{createDiscoveredInstance:()=>om});var Ct={Default:0,Adfs:1,Dsts:2,Ciam:3};function IT(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}var Tn={};an(Tn,{authorityMismatch:()=>$c,authorityUriInsecure:()=>ii,cannotAllowNativeBroker:()=>Vc,cannotSetOIDCOptions:()=>jc,claimsRequestParsingError:()=>Fc,emptyInputScopesError:()=>ai,invalidAuthenticationHeader:()=>Hc,invalidAuthorityMetadata:()=>hi,invalidClaims:()=>sr,invalidCloudDiscoveryMetadata:()=>$r,invalidCodeChallengeMethod:()=>di,invalidPromptValue:()=>ci,logoutRequestEmpty:()=>ui,missingNonceAuthenticationHeader:()=>Bc,missingSshJwk:()=>cr,missingSshKid:()=>Uc,pkceParamsMissing:()=>ar,redirectUriEmpty:()=>oi,tokenRequestEmpty:()=>li,untrustedAuthority:()=>fi,urlEmptyError:()=>si,urlParseError:()=>On});var oi="redirect_uri_empty",Fc="claims_request_parsing_error",ii="authority_uri_insecure",On="url_parse_error",si="empty_url_error",ai="empty_input_scopes_error",ci="invalid_prompt_value",sr="invalid_claims",li="token_request_empty",ui="logout_request_empty",di="invalid_code_challenge_method",ar="pkce_params_missing",$r="invalid_cloud_discovery_metadata",hi="invalid_authority_metadata",fi="untrusted_authority",cr="missing_ssh_jwk",Uc="missing_ssh_kid",Bc="missing_nonce_authentication_header",Hc="invalid_authentication_header",jc="cannot_set_OIDCOptions",Vc="cannot_allow_native_broker",$c="authority_mismatch";var _e={[oi]:"A redirect URI is required for all calls, and none has been set.",[Fc]:"Could not parse the given claims request object.",[ii]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[On]:"URL could not be parsed into appropriate segments.",[si]:"URL was empty or null.",[ai]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[ci]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[sr]:"Given claims parameter must be a stringified JSON object.",[li]:"Token request was empty and not found in cache.",[ui]:"The logout request was null or undefined.",[di]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[ar]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[$r]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[hi]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[fi]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[cr]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Uc]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Bc]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Hc]:"Invalid authentication header provided",[jc]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Vc]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[$c]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},TT={redirectUriNotSet:{code:oi,desc:_e[oi]},claimsRequestParsingError:{code:Fc,desc:_e[Fc]},authorityUriInsecure:{code:ii,desc:_e[ii]},urlParseError:{code:On,desc:_e[On]},urlEmptyError:{code:si,desc:_e[si]},emptyScopesError:{code:ai,desc:_e[ai]},invalidPrompt:{code:ci,desc:_e[ci]},invalidClaimsRequest:{code:sr,desc:_e[sr]},tokenRequestEmptyError:{code:li,desc:_e[li]},logoutRequestEmptyError:{code:ui,desc:_e[ui]},invalidCodeChallengeMethod:{code:di,desc:_e[di]},invalidCodeChallengeParams:{code:ar,desc:_e[ar]},invalidCloudDiscoveryMetadata:{code:$r,desc:_e[$r]},invalidAuthorityMetadata:{code:hi,desc:_e[hi]},untrustedAuthority:{code:fi,desc:_e[fi]},missingSshJwk:{code:cr,desc:_e[cr]},missingSshKid:{code:Uc,desc:_e[Uc]},missingNonceAuthenticationHeader:{code:Bc,desc:_e[Bc]},invalidAuthenticationHeader:{code:Hc,desc:_e[Hc]},cannotSetOIDCOptions:{code:jc,desc:_e[jc]},cannotAllowNativeBroker:{code:Vc,desc:_e[Vc]},authorityMismatch:{code:$c,desc:_e[$c]}},Gc=class n extends K{constructor(e){super(e,_e[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function J(n){return new Gc(n)}var Re=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var Gr={};an(Gr,{getDeserializedResponse:()=>Wg,stripLeadingHashOrQuery:()=>wT});function wT(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Wg(n){if(!n||n.indexOf("=")<0)return null;try{let e=wT(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw C($o)}return null}var V=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw J(si);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Re.endsWith(t,"?")?t=t.slice(0,-1):Re.endsWith(t,"?/")&&(t=t.slice(0,-2)),Re.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw J(On)}if(!e.HostNameAndPort||!e.PathSegments)throw J(On);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw J(ii)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===vn.COMMON||r[0]===vn.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw J(On);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw J(On);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===y.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Wg(e)}};var AT={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Yg=AT.endpointMetadata,Qg=AT.instanceDiscoveryMetadata,Jg=new Set;Qg.metadata.forEach(n=>{n.aliases.forEach(e=>{Jg.add(e)})});function bT(n,e){let t,r=n.canonicalAuthority;if(r){let o=new V(r).getUrlComponents().HostNameAndPort;t=ST(o,n.cloudDiscoveryMetadata?.metadata,yt.CONFIG,e)||ST(o,Qg.metadata,yt.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function ST(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=zc(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function DT(n){return zc(Qg.metadata,n)}function zc(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var ct={AAD:"AAD",OIDC:"OIDC"};var zr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};function _T(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function RT(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var h={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},_H=new Map([[h.AcquireTokenByCode,"ATByCode"],[h.AcquireTokenByRefreshToken,"ATByRT"],[h.AcquireTokenSilent,"ATS"],[h.AcquireTokenSilentAsync,"ATSAsync"],[h.AcquireTokenPopup,"ATPopup"],[h.AcquireTokenRedirect,"ATRedirect"],[h.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[h.CryptoOptsSignJwt,"CryptoSignJwt"],[h.SilentCacheClientAcquireToken,"SltCacheClientAT"],[h.SilentIframeClientAcquireToken,"SltIframeClientAT"],[h.SilentRefreshClientAcquireToken,"SltRClientAT"],[h.SsoSilent,"SsoSlt"],[h.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[h.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[h.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[h.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[h.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[h.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[h.BrokerHandhshake,"BrokerHandshake"],[h.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[h.AcquireTokenByBroker,"ATByBroker"],[h.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[h.RefreshTokenClientAcquireToken,"RTClientAT"],[h.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[h.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[h.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[h.AcquireTokenFromCache,"ATFromCache"],[h.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[h.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[h.AcquireTokenBySilentIframe,"ATBySltIframe"],[h.InitializeBaseRequest,"InitBaseReq"],[h.InitializeSilentRequest,"InitSltReq"],[h.InitializeClientApplication,"InitClientApplication"],[h.SilentIframeClientTokenHelper,"SIClientTHelper"],[h.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[h.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[h.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[h.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[h.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[h.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[h.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[h.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[h.GetAuthCodeUrl,"GetAuthCodeUrl"],[h.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[h.HandleCodeResponse,"HandleCodeResp"],[h.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[h.AuthClientAcquireToken,"AuthClientAT"],[h.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[h.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[h.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[h.PopTokenGenerateCnf,"PopTGenCnf"],[h.PopTokenGenerateKid,"PopTGenKid"],[h.HandleServerTokenResponse,"HandleServerTRes"],[h.DeserializeResponse,"DeserializeRes"],[h.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[h.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[h.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[h.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[h.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[h.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[h.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[h.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[h.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[h.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[h.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[h.AcquireTokenByCodeAsync,"ATByCodeAsync"],[h.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[h.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[h.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[h.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[h.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[h.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[h.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[h.NativeGenerateAuthResult,"NtvGenAuthRes"],[h.RemoveHiddenIframe,"RemoveHiddenIframe"],[h.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[h.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[h.GeneratePkceCodes,"GenPkceCodes"],[h.GenerateCodeVerifier,"GenCodeVerifier"],[h.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[h.Sha256Digest,"Sha256Digest"],[h.GetRandomValues,"GetRandomValues"]]),Zg={NotStarted:0,InProgress:1,Completed:2};var Et=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},E=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var MT=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=Fo.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield E(this.getRegionFromIMDS.bind(this),h.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(y.IMDS_VERSION,i);if(s.status===vc.httpSuccess&&(o=s.body,r.region_source=Fo.IMDS),s.status===vc.httpBadRequest){let a=yield E(this.getCurrentVersion.bind(this),h.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=Fo.FAILED_AUTO_DETECTION,null;let c=yield E(this.getRegionFromIMDS.bind(this),h.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===vc.httpSuccess&&(o=c.body,r.region_source=Fo.IMDS)}}catch{return r.region_source=Fo.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=Fo.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return p(this,null,function*(){return this.performanceClient?.addQueueMeasurement(h.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,y.IMDS_TIMEOUT)})}getCurrentVersion(t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?format=json`,t);return r.status===vc.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var Ce={};an(Ce,{createAccessTokenEntity:()=>tm,createIdTokenEntity:()=>em,createRefreshTokenEntity:()=>nm,generateAppMetadataKey:()=>z0,generateAuthorityMetadataExpiresAt:()=>wd,generateCredentialKey:()=>Kc,isAccessTokenEntity:()=>P0,isAppMetadataEntity:()=>q0,isAuthorityMetadataEntity:()=>K0,isAuthorityMetadataExpired:()=>Sd,isCredentialEntity:()=>Td,isIdTokenEntity:()=>L0,isRefreshTokenEntity:()=>F0,isServerTelemetryEntity:()=>$0,isThrottlingEntity:()=>G0,updateAuthorityEndpointMetadata:()=>As,updateCloudDiscoveryMetadata:()=>Wc});var qc={};an(qc,{delay:()=>x0,isTokenExpired:()=>Ss,nowSeconds:()=>zt,wasClockTurnedBack:()=>Xg});function zt(){return Math.round(new Date().getTime()/1e3)}function Ss(n,e){let t=Number(n)||0;return zt()+e>t}function Xg(n){return Number(n)>zt()}function x0(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function Kc(n){return[U0(n),B0(n),H0(n),j0(n),V0(n)].join(Me.CACHE_KEY_SEPARATOR).toLowerCase()}function em(n,e,t,r,o){return{credentialType:O.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function tm(n,e,t,r,o,i,s,a,c,l,u,d,f,g,v){let I={homeAccountId:n,credentialType:O.ACCESS_TOKEN,secret:t,cachedAt:zt().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||Q.BEARER};if(d&&(I.userAssertionHash=d),l&&(I.refreshOn=l.toString()),g&&(I.requestedClaims=g,I.requestedClaimsHash=v),I.tokenType?.toLowerCase()!==Q.BEARER.toLowerCase())switch(I.credentialType=O.ACCESS_TOKEN_WITH_AUTH_SCHEME,I.tokenType){case Q.POP:let S=ir(t,c);if(!S?.cnf?.kid)throw C(Zo);I.keyId=S.cnf.kid;break;case Q.SSH:I.keyId=f}return I}function nm(n,e,t,r,o,i,s){let a={credentialType:O.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function Td(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function P0(n){return n?Td(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===O.ACCESS_TOKEN||n.credentialType===O.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function L0(n){return n?Td(n)&&n.hasOwnProperty("realm")&&n.credentialType===O.ID_TOKEN:!1}function F0(n){return n?Td(n)&&n.credentialType===O.REFRESH_TOKEN:!1}function U0(n){return[n.homeAccountId,n.environment].join(Me.CACHE_KEY_SEPARATOR).toLowerCase()}function B0(n){let e=n.credentialType===O.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(Me.CACHE_KEY_SEPARATOR).toLowerCase()}function H0(n){return(n.target||"").toLowerCase()}function j0(n){return(n.requestedClaimsHash||"").toLowerCase()}function V0(n){return n.tokenType&&n.tokenType.toLowerCase()!==Q.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function $0(n,e){let t=n.indexOf(We.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function G0(n,e){let t=!1;n&&(t=n.indexOf(tr.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function z0({environment:n,clientId:e}){return[yc,n,e].join(Me.CACHE_KEY_SEPARATOR).toLowerCase()}function q0(n,e){return e?n.indexOf(yc)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function K0(n,e){return e?n.indexOf(ws.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function wd(){return zt()+ws.REFRESH_TIME_SECONDS}function As(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Wc(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Sd(n){return n.expiresAt<=zt()}var tn=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new MT(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(y.CIAM_AUTH_URL))return Ct.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case y.ADFS:return Ct.Adfs;case y.DSTS:return Ct.Dsts}return Ct.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new V(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw C(vt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw C(vt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw C(vt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw C(ti);return this.replacePath(this.metadata.end_session_endpoint)}else throw C(vt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw C(vt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw C(vt)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Ct.Default&&this.protocolMode===ct.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new V(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new V(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Ct.Adfs||this.protocolMode!==ct.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield E(this.updateCloudDiscoveryMetadata.bind(this),h.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield E(this.updateEndpointMetadata.bind(this),h.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:wd(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==yt.CACHE&&r?.source!==yt.CACHE&&(e.expiresAt=wd(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===yt.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield E(this.updateMetadataWithRegionalInformation.bind(this),h.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);As(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield E(this.getEndpointMetadataFromNetwork.bind(this),h.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield E(this.updateMetadataWithRegionalInformation.bind(this),h.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),As(e,r,!0),yt.NETWORK;throw C(Vo,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),As(e,t,!1),{source:yt.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return As(e,o,!1),{source:yt.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=Sd(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:yt.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new V(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw J(hi)}return null}getEndpointMetadataFromNetwork(){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return IT(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Yg?Yg[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==y.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Cd.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield E(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),h.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Cd.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=Cd.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield E(this.getCloudDiscoveryMetadataFromNetwork.bind(this),h.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Wc(e,r,!0),yt.NETWORK;throw J(fi)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||y.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Wc(e,t,!1),yt.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=DT(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Wc(e,o,!1),yt.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=Sd(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),yt.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ct.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=zc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),J($r)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${y.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(_T(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(RT(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===y.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=zc(s,this.hostnameAndPort)}catch(o){if(o instanceof K)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&V.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==zr.None){let o=t.tenant?t.tenant:y.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return y.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw C(vt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Jg.has(e)}static isPublicCloudAuthority(e){return y.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new V(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${y.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=V.constructAuthorityUriFromObject(A(m({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=m({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new V(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(y.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${y.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};tn.reservedTenantDomains=new Set(["{tenant}","{tenantid}",vn.COMMON,vn.CONSUMERS,vn.ORGANIZATIONS]);function NT(n){let r=new V(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case vn.COMMON:case vn.ORGANIZATIONS:case vn.CONSUMERS:return;default:return r}}function Ad(n){return n.endsWith(y.FORWARD_SLASH)?n:`${n}${y.FORWARD_SLASH}`}function rm(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw J($r)}return{canonicalAuthority:n.authority?Ad(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function om(n,e,t,r,o,i,s){return p(this,null,function*(){s?.addQueueMeasurement(h.AuthorityFactoryCreateDiscoveredInstance,i);let a=tn.transformCIAMAuthority(Ad(n)),c=new tn(a,e,t,r,o,i,s);try{return yield E(c.resolveEndpointsAsync.bind(c),h.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw C(vt)}})}function Dd(n,e,t){return p(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var bs={};an(bs,{ACCESS_TOKEN:()=>Q0,CCS_HEADER:()=>ok,CLAIMS:()=>cm,CLIENT_ASSERTION:()=>km,CLIENT_ASSERTION_TYPE:()=>Om,CLIENT_ID:()=>qr,CLIENT_INFO:()=>tk,CLIENT_REQUEST_ID:()=>vm,CLIENT_SECRET:()=>Nm,CODE:()=>pm,CODE_CHALLENGE:()=>gm,CODE_CHALLENGE_METHOD:()=>mm,CODE_VERIFIER:()=>ym,DEVICE_CODE:()=>Mm,DOMAIN_HINT:()=>Hm,ERROR:()=>W0,ERROR_DESCRIPTION:()=>Y0,EXPIRES_IN:()=>Z0,FOCI:()=>rk,GRANT_TYPE:()=>am,ID_TOKEN:()=>J0,ID_TOKEN_HINT:()=>Rm,LOGIN_HINT:()=>Bm,LOGOUT_HINT:()=>Fm,NATIVE_BROKER:()=>Lm,NONCE:()=>hm,OBO_ASSERTION:()=>xm,ON_BEHALF_OF:()=>nk,POST_LOGOUT_URI:()=>_m,PROMPT:()=>fm,REDIRECT_URI:()=>im,REFRESH_TOKEN:()=>um,REFRESH_TOKEN_EXPIRES_IN:()=>X0,REQUESTED_TOKEN_USE:()=>Pm,REQ_CNF:()=>Md,RESPONSE_MODE:()=>sm,RESPONSE_TYPE:()=>_d,RETURN_SPA_CODE:()=>Nd,SCOPE:()=>lm,SESSION_STATE:()=>ek,SID:()=>Um,STATE:()=>dm,TOKEN_TYPE:()=>Rd,X_APP_NAME:()=>bm,X_APP_VER:()=>Dm,X_CLIENT_CPU:()=>Tm,X_CLIENT_CURR_TELEM:()=>wm,X_CLIENT_EXTRA_SKU:()=>ik,X_CLIENT_LAST_TELEM:()=>Sm,X_CLIENT_OS:()=>Im,X_CLIENT_SKU:()=>Cm,X_CLIENT_VER:()=>Em,X_MS_LIB_CAPABILITY:()=>Am});var qr="client_id",im="redirect_uri",_d="response_type",sm="response_mode",am="grant_type",cm="claims",lm="scope",W0="error",Y0="error_description",Q0="access_token",J0="id_token",um="refresh_token",Z0="expires_in",X0="refresh_token_expires_in",dm="state",hm="nonce",fm="prompt",ek="session_state",tk="client_info",pm="code",gm="code_challenge",mm="code_challenge_method",ym="code_verifier",vm="client-request-id",Cm="x-client-SKU",Em="x-client-VER",Im="x-client-OS",Tm="x-client-CPU",wm="x-client-current-telemetry",Sm="x-client-last-telemetry",Am="x-ms-lib-capability",bm="x-app-name",Dm="x-app-ver",_m="post_logout_redirect_uri",Rm="id_token_hint",Mm="device_code",Nm="client_secret",km="client_assertion",Om="client_assertion_type",Rd="token_type",Md="req_cnf",xm="assertion",Pm="requested_token_use",nk="on_behalf_of",rk="foci",ok="X-AnchorMailbox",Nd="return_spa_code",Lm="nativebroker",Fm="logout_hint",Um="sid",Bm="login_hint",Hm="domain_hint",ik="x-client-xtra-sku";var Kr={createNewGuid:()=>{throw C(H)},base64Decode:()=>{throw C(H)},base64Encode:()=>{throw C(H)},base64UrlEncode:()=>{throw C(H)},encodeKid:()=>{throw C(H)},getPublicKeyThumbprint(){return p(this,null,function*(){throw C(H)})},removeTokenBindingKey(){return p(this,null,function*(){throw C(H)})},clearKeystore(){return p(this,null,function*(){throw C(H)})},signJwt(){return p(this,null,function*(){throw C(H)})},hashString(){return p(this,null,function*(){throw C(H)})}};var pe=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(pe||{}),nn=class n{constructor(e,t,r){this.level=pe.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:pe.Info,this.correlationId=i.correlationId||y.EMPTY_STRING,this.packageName=t||y.EMPTY_STRING,this.packageVersion=r||y.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:pe.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${pe[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:pe.Error,containsPii:!1,correlationId:t||y.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:pe.Error,containsPii:!0,correlationId:t||y.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:pe.Warning,containsPii:!1,correlationId:t||y.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:pe.Warning,containsPii:!0,correlationId:t||y.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:pe.Info,containsPii:!1,correlationId:t||y.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:pe.Info,containsPii:!0,correlationId:t||y.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:pe.Verbose,containsPii:!1,correlationId:t||y.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:pe.Verbose,containsPii:!0,correlationId:t||y.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:pe.Trace,containsPii:!1,correlationId:t||y.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:pe.Trace,containsPii:!0,correlationId:t||y.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var kd="@azure/msal-common",Ds="14.14.2";var we=class n{constructor(e){let t=e?Re.trimArrayEntries([...e]):[],r=t?Re.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||y.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=new n(e);return t.containsOnlyOIDCScopes()?t.removeScope(y.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw J(ai)}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return zg.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw C(Qo)}}removeScope(e){if(!e)throw C(Yo);this.scopes.delete(e.trim())}removeOIDCScopes(){zg.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw C(Hr);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw C(Hr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):y.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function _s(n,e){if(!n)throw C(Bo);try{let t=e(n);return JSON.parse(t)}catch{throw C(Fr)}}function lr(n){if(!n)throw C(Fr);let e=n.split(Me.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?y.EMPTY_STRING:e[1]}}function Rs(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Ms(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:Rs(u,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:Rs(t,n)}}function pi(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=Vn(i,["isHomeTenant"]);o=m(m({},n),c)}if(t){let s=Ms(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=Vn(s,["isHomeTenant"]);return o=A(m(m({},o),c),{idTokenClaims:t,idToken:r}),o}return o}function Od(n){return n&&(n.tid||n.tfp||n.acr)||null}var Ee=class n{generateAccountId(){return[this.homeAccountId,this.environment].join(Me.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Me.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){let o=new n;t.authorityType===Ct.Adfs?o.authorityType=Ts.ADFS_ACCOUNT_TYPE:t.protocolMode===ct.AAD?o.authorityType=Ts.MSSTS_ACCOUNT_TYPE:o.authorityType=Ts.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=_s(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw C(or);o.environment=s,o.realm=i?.utid||Od(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=Ms(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||Ts.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===Ct.Adfs||t===Ct.Dsts)){if(e)try{let s=_s(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var xd="cache_quota_exceeded",Yc="cache_error_unknown";var jm={[xd]:"Exceeded cache storage capacity.",[Yc]:"Unexpected error occurred when using cache storage."},ur=class n extends Error{constructor(e,t){let r=t||(jm[e]?jm[e]:jm[Yc]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};var dr=class n{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(kd,Ds),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;let a=this.getIdToken(e,t,r.tenantId);return a&&(s=ir(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=pi(e,r,s,a?.secret),i)}getTenantProfilesFromAccountEntity(e,t,r){let o=e.getAccountInfo(),i=o.tenantProfiles||new Map,s=this.getTokenKeys();if(t){let c=i.get(t);if(c)i=new Map([[t,c]]);else return[]}let a=[];return i.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(o,s,c,r);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){return p(this,null,function*(){if(!e)throw C(Jo);try{e.account&&this.setAccount(e.account),e.idToken&&t?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&t?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken)),e.refreshToken&&t?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o.message}`,r),o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED"||o.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new ur(xd)):new ur(o.name,o.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o}`,r),new ur(Yc))}})}saveAccessToken(e){return p(this,null,function*(){let t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=we.fromString(e.target),i=[];r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,t,!1))return;let a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,t)&&we.fromString(a.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(s))}),yield Promise.all(i),this.setAccessTokenCredential(e)})}getAccountsFilteredBy(e){let t=this.getAccountKeys(),r=[];return t.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,t,r){return!(e.split(Me.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(Me.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(O.ID_TOKEN.toLowerCase())===-1&&t.indexOf(O.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(O.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(O.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(O.REFRESH_TOKEN.toLowerCase())>-1){let r=`${O.REFRESH_TOKEN}${Me.CACHE_KEY_SEPARATOR}${this.clientId}${Me.CACHE_KEY_SEPARATOR}`,o=`${O.REFRESH_TOKEN}${Me.CACHE_KEY_SEPARATOR}${Lr}${Me.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===O.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Q.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(){return p(this,null,function*(){let e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),yield Promise.all(t)})}removeAccount(e){return p(this,null,function*(){let t=this.getAccount(e,this.commonLogger);t&&(yield this.removeAccountContext(t),this.removeItem(e))})}removeAccountContext(e){return p(this,null,function*(){let t=this.getTokenKeys(),r=e.generateAccountId(),o=[];t.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),t.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),t.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),yield Promise.all(o)})}updateOutdatedCachedAccount(e,t,r){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let o=this.getAccountKeys().filter(l=>l.startsWith(t.homeAccountId)),i=[];o.forEach(l=>{let u=this.getCachedAccountEntity(l);u&&i.push(u)});let s=i.find(l=>Rs(l.realm,l.homeAccountId))||i[0];s.tenantProfiles=i.map(l=>({tenantId:l.realm,localAccountId:l.localAccountId,name:l.name,isHomeTenant:Rs(l.realm,l.homeAccountId)}));let a=n.toObject(new Ee,m({},s)),c=a.generateAccountKey();return o.forEach(l=>{l!==c&&this.removeOutdatedAccount(e)}),this.setAccount(a),r?.verbose("Updated an outdated account entity in the cache"),a}return t}removeAccessToken(e){return p(this,null,function*(){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===O.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Q.POP){let o=t.keyId;if(o)try{yield this.cryptoImpl.removeTokenBindingKey(o)}catch{throw C(ei)}}return this.removeItem(e)}})}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=Ee.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:O.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!r){let u=new Map;a.forEach((f,g)=>{f.realm===e.tenantId&&u.set(g,f)});let d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,m({clientId:this.clientId},e)))return;let s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");let a=we.createSearchScopes(t.scopes),c=t.authenticationScheme||Q.BEARER,l=c&&c.toLowerCase()!==Q.BEARER.toLowerCase()?O.ACCESS_TOKEN_WITH_AUTH_SCHEME:O.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,f=[];d.forEach(v=>{if(this.accessTokenKeyMatchesFilter(v,u,!0)){let I=this.getAccessTokenCredential(v);I&&this.credentialMatchesFilter(I,u)&&f.push(I)}});let g=f.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),f.forEach(v=>{this.removeAccessToken(Kc(v))}),i&&s&&i.addFields({multiMatchedAT:f.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),f[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Lr:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:O.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let f=this.getRefreshTokenCredential(d);f&&this.credentialMatchesFilter(f,a)&&l.push(f)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&o&&i&&o.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw C(Ko);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Lr)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=bT(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==O.ACCESS_TOKEN&&e.credentialType!==O.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:we.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(yc)!==-1}isAuthorityMetadata(e){return e.indexOf(ws.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${ws.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},Qc=class extends dr{setAccount(){throw C(H)}getAccount(){throw C(H)}getCachedAccountEntity(){throw C(H)}setIdTokenCredential(){throw C(H)}getIdTokenCredential(){throw C(H)}setAccessTokenCredential(){throw C(H)}getAccessTokenCredential(){throw C(H)}setRefreshTokenCredential(){throw C(H)}getRefreshTokenCredential(){throw C(H)}setAppMetadata(){throw C(H)}getAppMetadata(){throw C(H)}setServerTelemetry(){throw C(H)}getServerTelemetry(){throw C(H)}setAuthorityMetadata(){throw C(H)}getAuthorityMetadata(){throw C(H)}getAuthorityMetadataKeys(){throw C(H)}setThrottlingCache(){throw C(H)}getThrottlingCache(){throw C(H)}removeItem(){throw C(H)}getKeys(){throw C(H)}getAccountKeys(){throw C(H)}getTokenKeys(){throw C(H)}clear(){return p(this,null,function*(){throw C(H)})}updateCredentialCacheKey(){throw C(H)}removeOutdatedAccount(){throw C(H)}};var Pd={tokenRenewalOffsetSeconds:Kg,preventCorsPreflight:!1},sk={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:pe.Info,correlationId:y.EMPTY_STRING},ak={claimsBasedCachingEnabled:!1},ck={sendGetRequestAsync(){return p(this,null,function*(){throw C(H)})},sendPostRequestAsync(){return p(this,null,function*(){throw C(H)})}},lk={sku:y.SKU,version:Ds,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},uk={clientSecret:y.EMPTY_STRING,clientAssertion:void 0},dk={azureCloudInstance:zr.None,tenant:`${y.DEFAULT_COMMON_TENANT}`},hk={application:{appName:"",appVersion:""}};function kT({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:f}){let g=m(m({},sk),t);return{authOptions:fk(n),systemOptions:m(m({},Pd),e),loggerOptions:g,cacheOptions:m(m({},ak),r),storageInterface:o||new Qc(n.clientId,Kr,new nn(g)),networkInterface:i||ck,cryptoInterface:s||Kr,clientCredentials:a||uk,libraryInfo:m(m({},lk),c),telemetry:m(m({},hk),l),serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:f||null}}function fk(n){return m({clientCapabilities:[],azureCloudOptions:dk,skipAuthorityMetadataCache:!1},n)}function Jc(n){return n.authOptions.authority.options.protocolMode===ct.OIDC}var It=class n extends K{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};var xn=class n{static generateThrottlingStorageKey(e){return`${tr.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let r=n.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new It(o.errorCodes?.join(" ")||y.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let o={throttleTime:n.calculateThrottleTime(parseInt(r.headers[ht.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(ht.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||tr.DEFAULT_THROTTLE_TIME_SECONDS),r+tr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}};var Ld=class{constructor(e,t){this.networkClient=e,this.cacheManager=t}sendPostRequest(e,t,r){return p(this,null,function*(){xn.preProcess(this.cacheManager,e);let o;try{o=yield this.networkClient.sendPostRequestAsync(t,r)}catch(i){throw i instanceof K?i:C(jo)}return xn.postProcess(this.cacheManager,e,o),o})}};var Qe={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var Pn=class{static validateRedirectUri(e){if(!e)throw J(oi)}static validatePrompt(e){let t=[];for(let r in Te)t.push(Te[r]);if(t.indexOf(e)<0)throw J(ci)}static validateClaims(e){try{JSON.parse(e)}catch{throw J(sr)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw J(ar);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([md.PLAIN,md.S256].indexOf(e)<0)throw J(di)}};var Ln=class{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(_d,encodeURIComponent(y.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(_d,encodeURIComponent(`${y.TOKEN_RESPONSE_TYPE} ${y.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(sm,encodeURIComponent(e||qg.QUERY))}addNativeBroker(){this.parameters.set(Lm,encodeURIComponent("1"))}addScopes(e,t=!0,r=Gt){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new we(o);this.parameters.set(lm,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(qr,encodeURIComponent(e))}addRedirectUri(e){Pn.validateRedirectUri(e),this.parameters.set(im,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Pn.validateRedirectUri(e),this.parameters.set(_m,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(Rm,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(Hm,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(Bm,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(ht.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(ht.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(Um,encodeURIComponent(e))}addClaims(e,t){let r=this.addClientCapabilitiesToClaims(e,t);Pn.validateClaims(r),this.parameters.set(cm,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(vm,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(Cm,e.sku),this.parameters.set(Em,e.version),e.os&&this.parameters.set(Im,e.os),e.cpu&&this.parameters.set(Tm,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(bm,e.appName),e?.appVersion&&this.parameters.set(Dm,e.appVersion)}addPrompt(e){Pn.validatePrompt(e),this.parameters.set(`${fm}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(dm,encodeURIComponent(e))}addNonce(e){this.parameters.set(hm,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Pn.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(gm,encodeURIComponent(e)),this.parameters.set(mm,encodeURIComponent(t));else throw J(ar)}addAuthorizationCode(e){this.parameters.set(pm,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(Mm,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(um,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(ym,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(Nm,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(km,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(Om,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(xm,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(Pm,encodeURIComponent(e))}addGrantType(e){this.parameters.set(am,encodeURIComponent(e))}addClientInfo(){this.parameters.set(yT,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,r])=>{!this.parameters.has(t)&&r&&this.parameters.set(t,r)})}addClientCapabilitiesToClaims(e,t){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw J(sr)}return t&&t.length>0&&(r.hasOwnProperty(Is.ACCESS_TOKEN)||(r[Is.ACCESS_TOKEN]={}),r[Is.ACCESS_TOKEN][Is.XMS_CC]={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set(vd.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(vd.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(Rd,Q.POP),this.parameters.set(Md,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(Rd,Q.SSH),this.parameters.set(Md,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(wm,e.generateCurrentRequestHeaderValue()),this.parameters.set(Sm,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(Am,tr.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(Fm,encodeURIComponent(e))}createQueryString(){let e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),e.join("&")}};var Wr=class{constructor(e,t){this.config=kT(e),this.logger=new nn(this.config.loggerOptions,kd,Ds),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Ld(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[ht.CONTENT_TYPE]=y.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Qe.HOME_ACCOUNT_ID:try{let r=lr(e.credential);t[ht.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Qe.UPN:t[ht.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return p(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.networkManager.sendPostRequest(o,e,{body:t,headers:r});return this.performanceClient?.addFields({refreshTokenSize:a.body.refresh_token?.length||0,httpVerToken:a.headers?.[ht.X_MS_HTTP_VERSION]||""},i),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}updateAuthority(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield om(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new Ln;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()}};var hr={};an(hr,{badToken:()=>Qr,consentRequired:()=>$m,interactionRequired:()=>Vm,loginRequired:()=>Gm,nativeAccountUnavailable:()=>Zc,noTokensFound:()=>Yr,refreshTokenExpired:()=>Xc});var Yr="no_tokens_found",Zc="native_account_unavailable",Xc="refresh_token_expired",Vm="interaction_required",$m="consent_required",Gm="login_required",Qr="bad_token";var OT=[Vm,$m,Gm,Qr],pk=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Fd={[Yr]:"No refresh token found in the cache. Please sign-in.",[Zc]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Xc]:"Refresh token has expired.",[Qr]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},xT={noTokensFoundError:{code:Yr,desc:Fd[Yr]},native_account_unavailable:{code:Zc,desc:Fd[Zc]},bad_token:{code:Qr,desc:Fd[Qr]}},lt=class n extends K{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||y.EMPTY_STRING,this.traceId=i||y.EMPTY_STRING,this.correlationId=s||y.EMPTY_STRING,this.claims=a||y.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function zm(n,e,t){let r=!!n&&OT.indexOf(n)>-1,o=!!t&&pk.indexOf(t)>-1,i=!!e&&OT.some(s=>e.indexOf(s)>-1);return r||i||o}function Ns(n){return new lt(n,Fd[n])}var Je=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${y.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw C(jr);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw C(jr);if(!t)throw C(In);try{let r=t.split(y.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(y.RESOURCE_DELIM):y.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||y.EMPTY_STRING,libraryState:a}}catch{throw C(In)}}};var gk={SW:"sw",UHW:"uhw"},qt=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.PopTokenGenerateCnf,e.correlationId);let r=yield E(this.generateKid.bind(this),h.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return p(this,null,function*(){return this.performanceClient?.addQueueMeasurement(h.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:gk.SW}})}signPopToken(e,t,r){return p(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return p(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,d=(s?new V(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(m({at:e,ts:zt(),m:i?.toUpperCase(),u:d?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var Ud=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function mk(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}var Fn=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?C(Br,"Cached State"):C(Br,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw C(In,e.state)}try{o=decodeURIComponent(t)}catch{throw C(In,e.state)}if(r!==o)throw C(Go);if(e.error||e.error_description||e.suberror){let i=mk(e);throw zm(e.error,e.error_description,e.suberror)?new lt(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new It(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||y.NOT_AVAILABLE} - Timestamp: ${e.timestamp||y.NOT_AVAILABLE} - Description: ${e.error_description||y.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||y.NOT_AVAILABLE} - Trace ID: ${e.trace_id||y.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new It(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=Es.SERVER_ERROR_RANGE_START&&e.status<=Es.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=Es.CLIENT_ERROR_RANGE_START&&e.status<=Es.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw zm(e.error,e.error_description,e.suberror)?new lt(e.error,e.error_description,e.suberror,e.timestamp||y.EMPTY_STRING,e.trace_id||y.EMPTY_STRING,e.correlation_id||y.EMPTY_STRING,e.claims||y.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=ir(e.id_token||y.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw C(zo);if(o.maxAge||o.maxAge===0){let v=u.auth_time;if(!v)throw C(nr);Lc(v,o.maxAge)}}this.homeAccountIdentifier=Ee.generateHomeAccountId(e.client_info||y.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let d;i&&i.state&&(d=Je.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let f=this.generateCacheRecord(e,t,r,o,u,s,i),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Ud(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(g)),a&&!c&&f.account){let v=f.account.generateAccountKey();if(!this.cacheStorage.getAccount(v,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,f,!1,o,u,d,void 0,l)}yield this.cacheStorage.saveCacheRecord(f,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(g))}return n.generateAuthenticationResult(this.cryptoObj,t,f,!1,o,u,d,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw C(or);let l=Od(i),u,d;e.id_token&&i&&(u=em(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=ks(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,l,a,void 0,this.logger));let f=null;if(e.access_token){let I=e.scope?we.fromString(e.scope):new we(o.scopes||[]),S=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,_=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,X=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ee=r+S,he=ee+_,rt=X&&X>0?r+X:void 0;f=tm(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",I.printScopes(),ee,he,this.cryptoObj.base64Decode,rt,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let I;if(e.refresh_token_expires_in){let S=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;I=r+S}g=nm(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,I)}let v=null;return e.foci&&(v={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:f,refreshToken:g,appMetadata:v}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return p(this,null,function*(){let u=y.EMPTY_STRING,d=[],f=null,g,v,I=y.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Q.POP&&!i.popKid){let ee=new qt(e),{secret:he,keyId:rt}=r.accessToken;if(!rt)throw C(ni);u=yield ee.signPopToken(he,rt,i)}else u=r.accessToken.secret;d=we.fromString(r.accessToken.target).asArray(),f=new Date(Number(r.accessToken.expiresOn)*1e3),g=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(v=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(I=r.appMetadata.familyId===Lr?Lr:"");let S=s?.oid||s?.sub||"",_=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let X=r.account?pi(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:S,tenantId:_,scopes:d,account:X,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:f,extExpiresOn:g,refreshOn:v,correlationId:i.correlationId,requestId:l||y.EMPTY_STRING,familyId:I,tokenType:r.accessToken?.tokenType||y.EMPTY_STRING,state:a?a.userRequestState:y.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||y.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||y.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function ks(n,e,t,r,o,i,s,a,c,l,u){u?.verbose("setCachedAccount called");let f=n.getAccountKeys().find(_=>_.startsWith(t)),g=null;f&&(g=n.getAccount(f,u));let v=g||Ee.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,r),I=v.tenantProfiles||[],S=a||v.realm;if(S&&!I.find(_=>_.tenantId===S)){let _=Ms(t,v.localAccountId,S,o);I.push(_)}return v.tenantProfiles=I,v}var gi=class extends Wr{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.GetAuthCodeUrl,e.correlationId);let t=yield E(this.createAuthCodeUrlQueryString.bind(this),h.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return V.appendQueryString(this.authority.authorizationEndpoint,t)})}acquireToken(e,t){return p(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(h.AuthClientAcquireToken,e.correlationId),!e.code)throw C(Wo);let r=zt(),o=yield E(this.executeTokenRequest.bind(this),h.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[ht.X_MS_REQUEST_ID],s=new Fn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),E(s.handleServerTokenResponse.bind(s),h.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}handleFragmentResponse(e,t){if(new Fn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw C(Xo);return e}getLogoutUri(e){if(!e)throw J(ui);let t=this.createLogoutUrlQueryString(e);return V.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=V.appendQueryString(e.tokenEndpoint,r),i=yield E(this.createTokenRequestBody.bind(this),h.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=_s(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${Me.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Qe.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return E(this.executePostToTokenEndpoint.bind(this),h.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,h.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Ln;if(t.addClientId(e.tokenBodyParameters?.[qr]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):Pn.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!Jc(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;t.addClientAssertion(yield Dd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(i.assertionType)}if(t.addGrantType(mc.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Q.POP){let i=new qt(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(yield E(i.generateCnf.bind(i),h.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(s)}else if(e.authenticationScheme===Q.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw J(cr);let r=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(r),(!Re.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let o;if(e.clientInfo)try{let i=_s(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${i.uid}${Me.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Qe.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case Qe.HOME_ACCOUNT_ID:try{let i=lr(o.credential);t.addCcsOid(i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Qe.UPN:t.addCcsUpn(o.credential);break}return e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Nd])&&t.addExtraQueryParameters({[Nd]:"1"}),t.createQueryString()})}createAuthCodeUrlQueryString(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.AuthClientCreateQueryString,e.correlationId);let t=new Ln;t.addClientId(e.extraQueryParameters?.[qr]||this.config.authOptions.clientId);let r=[...e.scopes||[],...e.extraScopesToConsent||[]];t.addScopes(r,!0,this.oidcDefaultScopes),t.addRedirectUri(e.redirectUri);let o=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(o),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),Jc(this.config)||t.addApplicationTelemetry(this.config.telemetry.application),t.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.prompt!==Te.SELECT_ACCOUNT)if(e.sid&&e.prompt===Te.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),t.addSid(e.sid);else if(e.account){let i=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account);if(s&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),t.addLoginHint(s);try{let a=lr(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i&&e.prompt===Te.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),t.addSid(i);try{let a=lr(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t.addLoginHint(e.account.username);try{let a=lr(e.account.homeAccountId);t.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(t.addNativeBroker(),e.authenticationScheme===Q.POP)){let i=new qt(this.cryptoUtils),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(yield E(i.generateCnf.bind(i),h.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(s)}return t.createQueryString()})}createLogoutUrlQueryString(e){let t=new Ln;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var yk=300,Jr=class extends Wr{constructor(e,t){super(e,t)}acquireToken(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.RefreshTokenClientAcquireToken,e.correlationId);let t=zt(),r=yield E(this.executeTokenRequest.bind(this),h.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[ht.X_MS_REQUEST_ID],i=new Fn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),E(i.handleServerTokenResponse.bind(i),h.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return p(this,null,function*(){if(!e)throw J(li);if(this.performanceClient?.addQueueMeasurement(h.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw C(rr);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield E(this.acquireTokenWithCachedRefreshToken.bind(this),h.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof lt&&r.errorCode===Yr,i=r instanceof It&&r.errorCode===yd.INVALID_GRANT_ERROR&&r.subError===yd.CLIENT_MISMATCH_ERROR;if(o||i)return E(this.acquireTokenWithCachedRefreshToken.bind(this),h.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return E(this.acquireTokenWithCachedRefreshToken.bind(this),h.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=Et(this.cacheManager.getRefreshToken.bind(this.cacheManager),h.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw Ns(Yr);if(r.expiresOn&&Ss(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||yk))throw Ns(Xc);let o=A(m({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Q.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Qe.HOME_ACCOUNT_ID}});try{return yield E(this.acquireToken.bind(this),h.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof lt&&i.subError===Qr){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=Kc(r);this.cacheManager.removeRefreshToken(s)}throw i}})}executeTokenRequest(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=V.appendQueryString(t.tokenEndpoint,r),i=yield E(this.createTokenRequestBody.bind(this),h.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return E(this.executePostToTokenEndpoint.bind(this),h.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,h.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,r=new Ln;if(r.addClientId(e.tokenBodyParameters?.[qr]||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),r.addGrantType(mc.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!Jc(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addCorrelationId(t),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;r.addClientAssertion(yield Dd(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(o.assertionType)}if(e.authenticationScheme===Q.POP){let o=new qt(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield E(o.generateCnf.bind(o),h.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(i)}else if(e.authenticationScheme===Q.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw J(cr);if((!Re.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Qe.HOME_ACCOUNT_ID:try{let o=lr(e.ccsCredential.credential);r.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Qe.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()})}};var el=class extends Wr{constructor(e,t){super(e,t)}acquireToken(e){return p(this,null,function*(){try{let[t,r]=yield this.acquireCachedToken(A(m({},e),{scopes:e.scopes?.length?e.scopes:[...Gt]}));return r===En.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Jr(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof ri&&t.errorCode===kn)return new Jr(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}})}acquireCachedToken(e){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.SilentFlowClientAcquireCachedToken,e.correlationId);let t=En.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Re.isEmptyObj(e.claims))throw this.setCacheOutcome(En.FORCE_REFRESH_OR_CLAIMS,e.correlationId),C(kn);if(!e.account)throw C(rr);let r=e.account.tenantId||NT(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(Xg(i.cachedAt)||Ss(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(En.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),C(kn);i.refreshOn&&Ss(i.refreshOn,0)&&(t=En.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(En.NO_CACHED_ACCESS_TOKEN,e.correlationId),C(kn);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield E(this.generateResultFromCacheRecord.bind(this),h.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==En.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return p(this,null,function*(){this.performanceClient?.addQueueMeasurement(h.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=ir(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw C(nr);Lc(o,t.maxAge)}return Fn.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var qm={sendGetRequestAsync:()=>Promise.reject(C(H)),sendPostRequestAsync:()=>Promise.reject(C(H))};var Bd="missing_kid_error",Hd="missing_alg_error";var vk={[Bd]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Hd]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},Km=class n extends K{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function Wm(n){return new Km(n,vk[n])}var tl=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Wm(Bd);if(!e.alg)throw Wm(Hd);let t=new n({typ:e.typ||Ed.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var PT=",",LT="|";function Ck(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(PT),a.length<4)return e}else a=Array.from({length:4},()=>LT);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&Ek({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(PT)}function Ek(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(LT))}var mi=class n{constructor(e,t){this.cacheOutcome=En.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||y.EMPTY_STRING,this.wrapperVer=e.wrapperVer||y.EMPTY_STRING,this.telemetryCacheKey=We.CACHE_KEY+Me.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${We.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(We.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(We.VALUE_SEPARATOR);return[We.SCHEMA_VERSION,s,o].join(We.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(We.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(We.VALUE_SEPARATOR),i=e.errors.length,s=t<i?We.OVERFLOW_TRUE:We.OVERFLOW_FALSE,a=[i,s].join(We.VALUE_SEPARATOR);return[We.SCHEMA_VERSION,e.cacheHits,r,o,a].join(We.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=We.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof K?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(We.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||y.EMPTY_STRING,a=e.failedRequests[2*t+1]||y.EMPTY_STRING,c=e.errors[t]||y.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<We.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||y.EMPTY_STRING),e.push(this.regionSource||y.EMPTY_STRING),e.push(this.regionOutcome||y.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Ck(e)}};var jd=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Os=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Zg.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new jd}}startPerformanceMeasurement(){return new jd}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var yi="pkce_not_created",xs="crypto_nonexistent",Un="empty_navigate_uri",Ps="hash_empty_error",Zr="no_state_in_hash",Ls="hash_does_not_contain_known_properties",Fs="unable_to_parse_state",Us="state_interaction_type_mismatch",Bs="interaction_in_progress",Hs="popup_window_error",js="empty_window_error",Ft="user_cancelled",Vd="monitor_popup_timeout",Vs="monitor_window_timeout",$s="redirect_in_iframe",Gs="block_iframe_reload",zs="block_nested_popups",$d="iframe_closed_prematurely",Bn="silent_logout_unsupported",qs="no_account_error",Gd="silent_prompt_value_error",Ks="no_token_request_cache_error",Ws="unable_to_parse_token_request_cache_error",Xr="no_cached_authority_error",zd="auth_request_not_set_error",qd="invalid_cache_type",eo="non_browser_environment",Hn="database_not_open",fr="no_network_connectivity",Ys="post_request_failed",Qs="get_request_failed",vi="failed_to_parse_response",Js="unable_to_load_token",to="crypto_key_not_found",Zs="auth_code_required",Xs="auth_code_or_nativeAccountId_required",ea="spa_code_and_nativeAccountId_present",no="database_unavailable",ta="unable_to_acquire_token_from_native_platform",na="native_handshake_timeout",ra="native_extension_not_installed",rn="native_connection_not_established",oa="uninitialized_public_client_application",ia="native_prompt_not_supported",sa="invalid_base64_string",aa="invalid_pop_token_request";var pr="For more visit: aka.ms/msaljs/browser-errors",F={[yi]:"The PKCE code challenge and verifier could not be generated.",[xs]:"The crypto object or function is not available.",[Un]:"Navigation URI is empty. Please check stack trace for more info.",[Ps]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${pr}`,[Zr]:"Hash does not contain state. Please verify that the request originated from msal.",[Ls]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${pr}`,[Fs]:"Unable to parse state. Please verify that the request originated from msal.",[Us]:"Hash contains state but the interaction type does not match the caller.",[Bs]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${pr}`,[Hs]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[js]:"window.open returned null or undefined window object.",[Ft]:"User cancelled the flow.",[Vd]:`Token acquisition in popup failed due to timeout.  ${pr}`,[Vs]:`Token acquisition in iframe failed due to timeout.  ${pr}`,[$s]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Gs]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${pr}`,[zs]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[$d]:"The iframe being monitored was closed prematurely.",[Bn]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[qs]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Gd]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Ks]:"No token request found in cache.",[Ws]:"The cached token request could not be parsed.",[Xr]:"No cached authority found.",[zd]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[qd]:"Invalid cache type",[eo]:"Login and token requests are not supported in non-browser environments.",[Hn]:"Database is not open!",[fr]:"No network connectivity. Check your internet connection.",[Ys]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Qs]:"Network request failed. Please check the network trace to determine root cause.",[vi]:"Failed to parse network response. Check network trace.",[Js]:"Error loading token to cache.",[to]:"Cryptographic Key or Keypair not found in browser storage.",[Zs]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Xs]:"An authorization code or nativeAccountId must be provided to this flow.",[ea]:"Request cannot contain both spa code and native account id.",[no]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[ta]:`Unable to acquire token from native platform.  ${pr}`,[na]:"Timed out while attempting to establish connection to browser extension",[ra]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[rn]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${pr}`,[oa]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${pr}`,[ia]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[sa]:"Invalid base64 encoded string.",[aa]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true."},VG={pkceNotGenerated:{code:yi,desc:F[yi]},cryptoDoesNotExist:{code:xs,desc:F[xs]},emptyNavigateUriError:{code:Un,desc:F[Un]},hashEmptyError:{code:Ps,desc:F[Ps]},hashDoesNotContainStateError:{code:Zr,desc:F[Zr]},hashDoesNotContainKnownPropertiesError:{code:Ls,desc:F[Ls]},unableToParseStateError:{code:Fs,desc:F[Fs]},stateInteractionTypeMismatchError:{code:Us,desc:F[Us]},interactionInProgress:{code:Bs,desc:F[Bs]},popupWindowError:{code:Hs,desc:F[Hs]},emptyWindowError:{code:js,desc:F[js]},userCancelledError:{code:Ft,desc:F[Ft]},monitorPopupTimeoutError:{code:Vd,desc:F[Vd]},monitorIframeTimeoutError:{code:Vs,desc:F[Vs]},redirectInIframeError:{code:$s,desc:F[$s]},blockTokenRequestsInHiddenIframeError:{code:Gs,desc:F[Gs]},blockAcquireTokenInPopupsError:{code:zs,desc:F[zs]},iframeClosedPrematurelyError:{code:$d,desc:F[$d]},silentLogoutUnsupportedError:{code:Bn,desc:F[Bn]},noAccountError:{code:qs,desc:F[qs]},silentPromptValueError:{code:Gd,desc:F[Gd]},noTokenRequestCacheError:{code:Ks,desc:F[Ks]},unableToParseTokenRequestCacheError:{code:Ws,desc:F[Ws]},noCachedAuthorityError:{code:Xr,desc:F[Xr]},authRequestNotSet:{code:zd,desc:F[zd]},invalidCacheType:{code:qd,desc:F[qd]},notInBrowserEnvironment:{code:eo,desc:F[eo]},databaseNotOpen:{code:Hn,desc:F[Hn]},noNetworkConnectivity:{code:fr,desc:F[fr]},postRequestFailed:{code:Ys,desc:F[Ys]},getRequestFailed:{code:Qs,desc:F[Qs]},failedToParseNetworkResponse:{code:vi,desc:F[vi]},unableToLoadTokenError:{code:Js,desc:F[Js]},signingKeyNotFoundInStorage:{code:to,desc:F[to]},authCodeRequired:{code:Zs,desc:F[Zs]},authCodeOrNativeAccountRequired:{code:Xs,desc:F[Xs]},spaCodeAndNativeAccountPresent:{code:ea,desc:F[ea]},databaseUnavailable:{code:no,desc:F[no]},unableToAcquireTokenFromNativePlatform:{code:ta,desc:F[ta]},nativeHandshakeTimeout:{code:na,desc:F[na]},nativeExtensionNotInstalled:{code:ra,desc:F[ra]},nativeConnectionNotEstablished:{code:rn,desc:F[rn]},uninitializedPublicClientApplication:{code:oa,desc:F[oa]},nativePromptNotSupported:{code:ia,desc:F[ia]},invalidBase64StringError:{code:sa,desc:F[sa]},invalidPopTokenRequest:{code:aa,desc:F[aa]}},Ci=class n extends K{constructor(e){super(e,F[e]),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function w(n){return new Ci(n)}var xe={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ro={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},gr={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},me={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Ym={GET:"GET",POST:"POST"},ae={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},mr={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},nl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},ue={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},b=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(b||{}),tt={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Qm={scopes:Gt},Jm="jwk",Zm={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Kd="msal.db",FT=1,UT=`${Kd}.keys`,Tt={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},BT=[Tt.Default,Tt.Skip,Tt.RefreshTokenAndNetwork],HT="msal.browser.log.level",jT="msal.browser.log.pii";function rl(n){return encodeURIComponent(ol(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Ei(n){return VT(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ol(n){return VT(new TextEncoder().encode(n))}function VT(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}var Ik="RSASSA-PKCS1-v1_5",zT="SHA-256",Tk=2048,wk=new Uint8Array([1,0,1]),$T="0123456789abcdef",GT=new Uint32Array(1),ey={name:Ik,hash:zT,modulusLength:Tk,publicExponent:wk};function qT(n){if("crypto"in window)n.verbose("BrowserCrypto: modern crypto interface available");else throw n.error("BrowserCrypto: crypto interface is unavailable"),w(xs)}function ty(n,e,t){return p(this,null,function*(){e?.addQueueMeasurement(h.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(zT,o)})}function KT(n){return window.crypto.getRandomValues(n)}function Xm(){return window.crypto.getRandomValues(GT),GT[0]}function nt(){let n=Date.now(),e=Xm()*1024+(Xm()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Xm();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=$T.charAt(t[a]>>>4),s+=$T.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function WT(n,e){return p(this,null,function*(){return window.crypto.subtle.generateKey(ey,n,e)})}function Wd(n){return p(this,null,function*(){return window.crypto.subtle.exportKey(Jm,n)})}function YT(n,e,t){return p(this,null,function*(){return window.crypto.subtle.importKey(Jm,n,ey,e,t)})}function QT(n,e){return p(this,null,function*(){return window.crypto.subtle.sign(ey,n,e)})}function Yd(n){return p(this,null,function*(){let e=yield ty(n),t=new Uint8Array(e);return Ei(t)})}var ca="storage_not_supported",Qd="stubbed_public_client_application_called",la="in_mem_redirect_unavailable";var Jd={[ca]:"Given storage configuration option was not supported.",[Qd]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[la]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},Sk={storageNotSupportedError:{code:ca,desc:Jd[ca]},stubPcaInstanceCalled:{code:Qd,desc:Jd[Qd]},inMemRedirectUnavailable:{code:la,desc:Jd[la]}},ua=class n extends K{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function Zd(n){return new ua(n,Jd[n])}function ny(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function ry(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function il(){return window.parent!==window}function JT(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${xe.POPUP_NAME_PREFIX}.`)===0}function Ut(){return window.location.href.split("?")[0].split("#")[0]}function oy(){let e=new V(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function ZT(){if(V.hashContainsKnownProperties(window.location.hash)&&il())throw w(Gs)}function XT(n){if(il()&&!n)throw w($s)}function ew(){if(JT())throw w(zs)}function tw(){if(typeof window>"u")throw w(eo)}function Xd(n){if(!n)throw w(oa)}function sl(n){tw(),ZT(),ew(),Xd(n)}function eh(n,e){if(sl(n),XT(e.system.allowRedirectInIframe),e.cache.cacheLocation===me.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Zd(la)}function al(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function Ak(){return nt()}var cl=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}};var nh=class{sendGetRequestAsync(e,t){return p(this,null,function*(){let r;try{r=yield fetch(e,{method:Ym.GET,headers:this.getFetchHeaders(t)})}catch{throw window.navigator.onLine?w(Qs):w(fr)}try{return{headers:this.getHeaderDict(r.headers),body:yield r.json(),status:r.status}}catch{throw w(vi)}})}sendPostRequestAsync(e,t){return p(this,null,function*(){let r=t&&t.body||y.EMPTY_STRING,o;try{o=yield fetch(e,{method:Ym.POST,headers:this.getFetchHeaders(t),body:r})}catch{throw window.navigator.onLine?w(Ys):w(fr)}try{return{headers:this.getHeaderDict(o.headers),body:yield o.json(),status:o.status}}catch{throw w(vi)}})}getFetchHeaders(e){let t=new Headers;if(!(e&&e.headers))return t;let r=e.headers;return Object.keys(r).forEach(o=>{t.append(o,r[o])}),t}getHeaderDict(e){let t={};return e.forEach((r,o)=>{t[o]=r}),t}};var bk=6e4,rh=1e4,Dk=3e4,_k=2e3;function nw({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:y.EMPTY_STRING,authority:`${y.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:y.EMPTY_STRING,authorityMetadata:y.EMPTY_STRING,redirectUri:y.EMPTY_STRING,postLogoutRedirectUri:y.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ct.AAD,OIDCOptions:{serverResponseType:Cn.FRAGMENT,defaultScopes:[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:zr.None,tenant:y.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},s={cacheLocation:me.SessionStorage,temporaryCacheLocation:me.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===me.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:pe.Info,piiLoggingEnabled:!1},c=A(m({},Pd),{loggerOptions:a,networkClient:o?new nh:qm,navigationClient:new cl,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||bk,iframeHashTimeout:t?.loadFrameTimeout||rh,navigateFrameWait:0,redirectNavigationTimeout:Dk,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||_k,pollIntervalMilliseconds:xe.DEFAULT_POLL_INTERVAL_MS}),l=A(m(m({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:y.EMPTY_STRING,appVersion:y.EMPTY_STRING},client:new Os};if(n?.protocolMode!==ct.OIDC&&n?.OIDCOptions&&new nn(l.loggerOptions).warning(JSON.stringify(J(Tn.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode!==ct.AAD&&l?.allowNativeBroker)throw J(Tn.cannotAllowNativeBroker);return{auth:A(m(m({},i),n),{OIDCOptions:m(m({},i.OIDCOptions),n?.OIDCOptions)}),cache:m(m({},s),e),system:l,telemetry:m(m({},u),r)}}var rw="@azure/msal-browser",oo="3.23.0";var oh=class n{static loggerCallback(e,t){switch(e){case pe.Error:console.error(t);return;case pe.Info:console.info(t);return;case pe.Verbose:console.debug(t);return;case pe.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=nw(e,this.browserEnvironment);let t;try{t=window[me.SessionStorage]}catch{}let r=t?.getItem(HT),o=t?.getItem(jT)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=m({},this.config.system.loggerOptions),a=r&&Object.keys(pe).includes(r)?pe[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new nn(s,rw,oo),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var ih=(()=>{class n extends oh{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return p(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();function Bt(n){return new TextDecoder().decode(Rk(n))}function Rk(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw w(sa)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var sh=class{constructor(){this.dbName=Kd,this.version=FT,this.tableName=UT,this.dbOpen=!1}open(){return p(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(w(no)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return p(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(w(Hn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(w(Hn));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(w(Hn));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(w(Hn));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return p(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(w(Hn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return p(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(Kd),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var Ii=class{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}};var ah=class{constructor(e){this.inMemoryCache=new Ii,this.indexedDBCache=new sh,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Ci&&e.errorCode===no)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return p(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return p(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return p(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return p(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return p(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return p(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var iw=(()=>{class n{constructor(t,r){this.logger=t,qT(t),this.cache=new ah(this.logger),this.performanceClient=r}createNewGuid(){return nt()}base64Encode(t){return ol(t)}base64Decode(t){return Bt(t)}base64UrlEncode(t){return rl(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return p(this,null,function*(){let r=this.performanceClient?.startMeasurement(h.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield WT(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield Wd(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=ow(s),c=yield this.hashString(a),l=yield Wd(o.privateKey),u=yield YT(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return p(this,null,function*(){return yield this.cache.removeItem(t),!(yield this.cache.containsKey(t))})}clearKeystore(){return p(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return p(this,null,function*(){let s=this.performanceClient?.startMeasurement(h.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw w(to);let c=yield Wd(a.publicKey),l=ow(c),u=rl(JSON.stringify({kid:r})),d=tl.getShrHeaderString(A(m({},o?.header),{alg:c.alg,kid:u})),f=rl(d);t.cnf={jwk:JSON.parse(l)};let g=rl(JSON.stringify(t)),v=`${f}.${g}`,S=new TextEncoder().encode(v),_=yield QT(a.privateKey,S),X=Ei(new Uint8Array(_)),ee=`${v}.${X}`;return s&&s.end({success:!0}),ee})}hashString(t){return p(this,null,function*(){return Yd(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function ow(n){return JSON.stringify(n,Object.keys(n).sort())}var ll=class{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==me.LocalStorage&&e!==me.SessionStorage||!window[e])throw Zd(ca)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,t){this.windowStorage.setItem(e,t)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}};function ch(n,e){if(!e)return null;try{return Je.parseRequestState(n,e).libraryState.meta}catch{throw C(Ye.invalidState)}}var da=class n extends dr{constructor(e,t,r,o,i,s){super(e,r,o,i),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=t,this.logger=o,this.internalStorage=new Ii,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){switch(e){case me.LocalStorage:case me.SessionStorage:try{return new ll(e)}catch(t){this.logger.verbose(t);break}}return this.cacheConfig.cacheLocation=me.MemoryStorage,new Ii}setupTemporaryCacheStorage(e,t){switch(t){case me.LocalStorage:case me.SessionStorage:try{return new ll(e||me.SessionStorage)}catch(r){return this.logger.verbose(r),this.internalStorage}case me.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){let e=`${y.CACHE_PREFIX}.${Oe.ID_TOKEN}`,t=`${y.CACHE_PREFIX}.${Oe.CLIENT_INFO}`,r=`${y.CACHE_PREFIX}.${Oe.ERROR}`,o=`${y.CACHE_PREFIX}.${Oe.ERROR_DESC}`,i=this.browserStorage.getItem(e),s=this.browserStorage.getItem(t),a=this.browserStorage.getItem(r),c=this.browserStorage.getItem(o),l=[i,s,a,c];[Oe.ID_TOKEN,Oe.CLIENT_INFO,Oe.ERROR,Oe.ERROR_DESC].forEach((d,f)=>{let g=l[f];g&&this.setTemporaryCache(d,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");let e=this.getItem(mr.ACCOUNT_KEYS),t=this.getItem(`${mr.TOKEN_KEYS}.${this.clientId}`);if(e&&t){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){let i=this.getItem(o);if(i){let s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case O.ID_TOKEN:if(Ce.isIdTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);let a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,O.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case O.ACCESS_TOKEN:case O.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(Ce.isAccessTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);let a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,O.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case O.REFRESH_TOKEN:if(Ce.isRefreshTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);let a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,O.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){let i=this.getItem(o);if(i){let s=this.validateAndParseJson(i);s&&Ee.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,t)}getCachedAccountEntity(e){let t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;let r=this.validateAndParseJson(t);return!r||!Ee.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):dr.toObject(new Ee,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");let t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");let e=this.getItem(mr.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let t=this.getAccountKeys();t.indexOf(e)===-1?(t.push(e),this.setItem(mr.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.setItem(mr.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e){return p(this,null,function*(){ma(n.prototype,this,"removeAccount").call(this,e),this.removeAccountKeyFromMap(e)})}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,O.ID_TOKEN)}removeAccessToken(e){return p(this,null,function*(){ma(n.prototype,this,"removeAccessToken").call(this,e),this.removeTokenKey(e,O.ACCESS_TOKEN)})}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,O.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");let e=this.getItem(`${mr.TOKEN_KEYS}.${this.clientId}`);if(e){let t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");let r=this.getTokenKeys();switch(t){case O.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case O.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case O.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),C(Ye.unexpectedCredentialType)}this.setItem(`${mr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");let r=this.getTokenKeys();switch(t){case O.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case O.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case O.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),C(Ye.unexpectedCredentialType)}this.setItem(`${mr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,O.ID_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!Ce.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,O.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let t=Ce.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,O.ID_TOKEN)}getAccessTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,O.ACCESS_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!Ce.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,O.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let t=Ce.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,O.ACCESS_TOKEN)}getRefreshTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,O.REFRESH_TOKEN),null;let r=this.validateAndParseJson(t);return!r||!Ce.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,O.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let t=Ce.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,O.REFRESH_TOKEN)}getAppMetadata(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!Ce.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let t=Ce.generateAppMetadataKey(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!Ce.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&Ce.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(nl.WRAPPER_SKU,e),this.internalStorage.setItem(nl.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(nl.WRAPPER_SKU)||y.EMPTY_STRING,t=this.internalStorage.getItem(nl.WRAPPER_VER)||y.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){let e=this.generateCacheKey(Oe.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");let o=this.generateCacheKey(Oe.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;let s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}let r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){let t=this.generateCacheKey(Oe.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(Oe.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(o)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(r)}getThrottlingCache(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!Ce.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.getItemCookie(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===me.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,t))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}clear(){return p(this,null,function*(){yield this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(y.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(y.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(e,t){return p(this,null,function*(){e.addQueueMeasurement(h.ClearTokensAndKeysWithClaims,t);let r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{let s=this.getAccessTokenCredential(i);s?.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),yield Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)})}setItemCookie(e,t,r){let o=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(r){let i=this.getCookieExpirationTime(r);o+=`expires=${i};`}this.cacheConfig.secureCookies&&(o+="Secure;"),document.cookie=o}getItemCookie(e){let t=`${encodeURIComponent(e)}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}return y.EMPTY_STRING}clearMsalCookies(){let e=`${y.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(r=>{for(;r.charAt(0)===" ";)r=r.substring(1);if(r.indexOf(e)===0){let o=r.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,y.EMPTY_STRING,-1)}getCookieExpirationTime(e){let t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Re.startsWith(e,y.CACHE_PREFIX)||Re.startsWith(e,Oe.ADAL_ID_TOKEN)?e:`${y.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){let{libraryState:{id:t}}=Je.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ae.AUTHORITY}.${t}`)}generateNonceKey(e){let{libraryState:{id:t}}=Je.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ae.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){let{libraryState:{id:t}}=Je.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ae.REQUEST_STATE}.${t}`)}getCachedAuthority(e){let t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;let o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);let a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);let c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){let l={credential:i.homeAccountId,type:Qe.HOME_ACCOUNT_ID};this.setTemporaryCache(ae.CCS_CREDENTIAL,JSON.stringify(l),!0)}else if(o){let l={credential:o,type:Qe.UPN};this.setTemporaryCache(ae.CCS_CREDENTIAL,JSON.stringify(l),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(ae.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(ae.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(ae.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(ae.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(ae.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(ae.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){let t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||y.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(ae.REQUEST_STATE)===-1)return;let r=this.temporaryCacheStorage.getItem(t);if(!r)return;let o=ch(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let t=ol(JSON.stringify(e));this.setTemporaryCache(ae.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");let t=this.getTemporaryCache(ae.REQUEST_PARAMS,!0);if(!t)throw w(Ks);let r;try{r=JSON.parse(Bt(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),w(Ws)}if(this.removeTemporaryItem(this.generateCacheKey(ae.REQUEST_PARAMS)),!r.authority){let o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw w(Xr);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(ae.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${y.CACHE_PREFIX}.${ae.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){let t=`${y.CACHE_PREFIX}.${ae.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw w(Bs);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){let e=this.getTemporaryCache(Oe.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(Oe.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));let t=this.getTemporaryCache(Oe.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(Oe.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));let r=t||e;if(r){let o=Vr.extractTokenClaims(r,Bt);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){let r=Ce.generateCredentialKey(t);if(e!==r){let o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){return p(this,null,function*(){let r=Ce.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=Ce.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Bt,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s)})}saveCacheRecord(e,t,r){return p(this,null,function*(){try{yield ma(n.prototype,this,"saveCacheRecord").call(this,e,t,r)}catch(o){if(o instanceof ur&&this.performanceClient&&r)try{let i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},r)}catch{}throw o}})}},sw=(n,e)=>{let t={cacheLocation:me.MemoryStorage,temporaryCacheLocation:me.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new da(n,t,Kr,e)};function aw(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}function cw(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;let r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function lw(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function uw(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function dw(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function hw(n,e){e.setActiveAccount(n)}function fw(n){return n.getActiveAccount()}var D={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var lh=class{constructor(e,t){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=t,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(e){if(typeof window<"u"){let t=nt();return this.eventCallbacks.set(t,e),this.logger.verbose(`Event callback registered with id: ${t}`),t}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(e,t,r,o){if(typeof window<"u"){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${e}`),this.eventCallbacks.forEach((s,a)=>{this.logger.verbose(`Emitting event to callback ${a}: ${e}`),s.apply(null,[i])})}}handleAccountCacheChange(e){try{e.key?.includes(Oe.ACTIVE_ACCOUNT_FILTERS)&&this.emitEvent(D.ACTIVE_ACCOUNT_CHANGED);let t=e.newValue||e.oldValue;if(!t)return;let r=JSON.parse(t);if(typeof r!="object"||!Ee.isAccountEntity(r))return;let i=dr.toObject(new Ee,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(D.ACCOUNT_ADDED,void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(D.ACCOUNT_REMOVED,void 0,i))}catch{return}}};var ha=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||nt(),this.logger=o.clone(xe.MSAL_SKU,oo,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){return p(this,null,function*(){if(e){Ee.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{yield this.browserStorage.removeAccount(Ee.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri||Ut();return V.getAbsoluteUrl(t,Ut())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new mi(r,this.browserStorage)}getDiscoveredAuthority(e,t,r){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e||this.config.auth.authority,s=tn.generateAuthority(i,t||this.config.auth.azureCloudOptions),a=yield E(bd.createDiscoveredInstance,h.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(r&&!a.isAlias(r.environment))throw J(Tn.authorityMismatch);return a})}};var Mk=32;function pw(n,e,t){return p(this,null,function*(){n.addQueueMeasurement(h.GeneratePkceCodes,t);let r=Et(Nk,h.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield E(kk,h.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function Nk(n,e,t){try{let r=new Uint8Array(Mk);return Et(KT,h.GetRandomValues,e,n,t)(r),Ei(r)}catch{throw w(yi)}}function kk(n,e,t,r){return p(this,null,function*(){e.addQueueMeasurement(h.GenerateCodeChallengeFromVerifier,r);try{let o=yield E(ty,h.Sha256Digest,t,e,r)(n,e,r);return Ei(new Uint8Array(o))}catch{throw w(yi)}})}function ul(n,e,t,r){return p(this,null,function*(){t.addQueueMeasurement(h.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=A(m({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=Q.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Q.SSH){if(!n.sshJwk)throw J(Tn.missingSshJwk);if(!n.sshKid)throw J(Tn.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!Re.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield Yd(n.claims)),s})}function gw(n,e,t,r,o){return p(this,null,function*(){r.addQueueMeasurement(h.InitializeSilentRequest,n.correlationId);let i=yield E(ul,h.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return A(m(m({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}var Ht=class extends ha{initializeAuthorizationCodeRequest(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);let t=yield E(pw,h.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r=A(m({},e),{redirectUri:e.redirectUri,code:y.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=y.S256_CODE_CHALLENGE_METHOD,r})}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=m({correlationId:this.correlationId||nt()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=V.getAbsoluteUrl(e.postLogoutRedirectUri,Ut())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=V.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ut())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=V.getAbsoluteUrl(Ut(),Ut())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e,t,r,o){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let i=yield E(this.getClientConfiguration.bind(this),h.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,t,r,o);return new gi(i,this.performanceClient)})}getClientConfiguration(e,t,r,o){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.StandardInteractionClientGetClientConfiguration,this.correlationId);let i=yield E(this.getDiscoveredAuthority.bind(this),h.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)(t,r,o),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:i,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:xe.MSAL_SKU,version:oo,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=Je.setRequestState(this.browserCrypto,e&&e.state||y.EMPTY_STRING,o),s=yield E(ul,h.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(A(m({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=A(m({},s),{redirectUri:r,state:i,nonce:e.nonce||nt(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),c=e.account||this.browserStorage.getActiveAccount();if(c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),!a.loginHint&&!c){let l=this.browserStorage.getLegacyLoginHint();l&&(a.loginHint=l)}return a})}};var mw="ContentError",uh="user_switch";var yw="USER_INTERACTION_REQUIRED",vw="USER_CANCEL",Cw="NO_NETWORK",Ew="PERSISTENT_ERROR",Iw="DISABLED",Tw="ACCOUNT_UNAVAILABLE";var Ok=-2147186943,xk={[uh]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},on=class n extends K{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function io(n){if(n.ext&&n.ext.status&&(n.ext.status===Ew||n.ext.status===Iw)||n.ext&&n.ext.error&&n.ext.error===Ok)return!0;switch(n.errorCode){case mw:return!0;default:return!1}}function dl(n,e,t){if(t&&t.status)switch(t.status){case Tw:return Ns(hr.nativeAccountUnavailable);case yw:return new lt(n,e);case vw:return w(Ft);case Cw:return w(fr)}return new on(n,xk[n]||e,t)}var fa=class extends Ht{acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(ue.acquireTokenSilent_silentFlow),r=yield E(this.getClientConfiguration.bind(this),h.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(t,e.authority,e.azureCloudOptions,e.account),o=new el(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield E(o.acquireCachedToken.bind(o),h.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Ci&&i.errorCode===to&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}};var iy={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"},sn=class extends ha{constructor(e,t,r,o,i,s,a,c,l,u,d,f){super(e,t,r,o,i,s,c,l,f),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new fa(e,this.nativeStorageManager,r,o,i,s,c,l,f),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);let g=this.nativeMessageHandler.getExtensionId()===ro.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=mi.makeExtraSkuString({libraryName:xe.MSAL_SKU,libraryVersion:oo,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=A(m({},e.extraParameters),{[bs.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let t=this.performanceClient.startMeasurement(h.NativeInteractionClientAcquireToken,e.correlationId),r=qc.nowSeconds();try{let o=yield this.initializeNativeRequest(e);try{let l=yield this.acquireTokensFromCache(this.accountId,o);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let i=Vn(o,[]),s={method:gr.GetToken,request:i},a=yield this.nativeMessageHandler.sendMessage(s),c=this.validateNativeResponse(a);return yield this.handleNativeResponse(c,o,r).then(l=>(t.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),l)).catch(l=>{throw t.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError,isNativeBroker:!0}),l})}catch(o){throw o instanceof on&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:we.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return p(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),C(Ye.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw C(Ye.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=A(m({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return A(m({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return p(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=Vn(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r),i={method:gr.GetToken,request:o};try{let c=yield this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof on&&(this.serverTelemetryManager.setNativeBrokerErrorCode(c.errorCode),io(c)))throw c}this.browserStorage.setTemporaryCache(ae.NATIVE_REQUEST,JSON.stringify(o),!0);let s={apiId:ue.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,s)})}handleRedirectPromise(e,t){return p(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let c=r,{prompt:o}=c,i=Vn(c,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ae.NATIVE_REQUEST));let s={method:gr.GetToken,request:i},a=qc.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let l=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(l);let u=this.handleNativeResponse(l,i,a);this.browserStorage.setInteractionInProgress(!1);let d=yield u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(l){throw this.browserStorage.setInteractionInProgress(!1),l}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return p(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=Vr.extractTokenClaims(e.id_token,Bt),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(i!==s&&e.account.id!==t.accountId)throw dl(uh);let a=yield this.getDiscoveredAuthority(t.authority),c=ks(this.browserStorage,a,i,Bt,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return this.cacheAccount(c),this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return Ee.generateHomeAccountId(e.client_info||y.EMPTY_STRING,Ct.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?we.fromString(e.scope):we.fromString(t.scope)}generatePopAccessToken(e,t){return p(this,null,function*(){if(t.tokenType===Q.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new qt(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw C(Ye.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return p(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e),c=e.scope?we.fromString(e.scope):we.fromString(t.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||y.EMPTY_STRING,d=l.TenantId||r.tid||y.EMPTY_STRING,f=pi(o.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);let g=yield this.generatePopAccessToken(e,t),v=t.tokenType===Q.POP?Q.POP:Q.BEARER;return{authority:i,uniqueId:u,tenantId:d,scopes:c.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:v,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){let c=Ce.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===Q.POP?y.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,d=this.generateScopes(e,t),f=Ce.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),u,0,Bt,void 0,t.tokenType,void 0,t.keyId),g={idToken:c,accessToken:f};this.nativeStorageManager.saveCacheRecord(g,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Ic(Uo.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return p(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority(t,e.azureCloudOptions,e.account));let r=new V(t);r.validateAsUri();let l=e,{scopes:o}=l,i=Vn(l,["scopes"]),s=new we(o||[]);s.appendScopes(Gt);let a=()=>{switch(this.apiId){case ue.ssoSilent:case ue.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Te.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case Te.NONE:case Te.CONSENT:case Te.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),w(ia)}},c=A(m({},i),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:m(m({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(c.signPopToken&&e.popKid)throw w(aa);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=ro.MATS_TELEMETRY,e.authenticationScheme===Q.POP){let u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new qt(this.browserCrypto),f;if(c.keyId)f=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{let g=yield E(d.generateCnf.bind(d),h.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);f=g.reqCnfString,c.keyId=g.kid,c.signPopToken=!0}c.reqCnf=f}return this.addRequestSKUs(c),c})}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(iy.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(iy.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(bs.CLIENT_ID)){let t=e.extraParameters[bs.CLIENT_ID],r=e.redirectUri,o=e.extraParameters[iy.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:t,child_redirect_uri:r},e.redirectUri=o}}};var Kt=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(h.NativeMessageHandlerHandshake)}sendMessage(e){return p(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:ro.CHANNEL_ID,extensionId:this.extensionId,responseId:nt(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})})}static createProvider(e,t,r){return p(this,null,function*(){e.trace("NativeMessageHandler - createProvider called.");try{let o=new n(e,t,r,ro.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return p(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:ro.CHANNEL_ID,extensionId:this.extensionId,responseId:nt(),body:{method:gr.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(w(na)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==ro.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===gr.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(w(ra))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===gr.Response){if(!r)return;let s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(dl(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(dl(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw Ic(Uo.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===gr.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Q.BEARER:case Q.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};var so=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.HandleCodeResponse,t.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,t.state)}catch(o){throw o instanceof It&&o.subError===Ft?w(Ft):o}return E(this.handleCodeResponseFromServer.bind(this),h.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return p(this,null,function*(){if(this.performanceClient.addQueueMeasurement(h.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield E(this.authModule.updateAuthority.bind(this.authModule),h.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield E(this.authModule.acquireToken.bind(this.authModule),h.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Qe.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Qe.UPN}:null}};function dh(n,e,t){let r=Gr.getDeserializedResponse(n);if(!r)throw Gr.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),w(Ls)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),w(Ps));return r}function ww(n,e,t){if(!n.state)throw w(Zr);let r=ch(e,n.state);if(!r)throw w(Fs);if(r.interactionType!==t)throw w(Us)}var hh=class extends Ht{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{let t=this.generatePopupName(e.scopes||Gt,e.authority||this.config.auth.authority),r=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,t,r);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");let o=this.openSizedPopup("about:blank",t,r);return this.acquireTokenPopupAsync(e,t,r,o)}}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r=this.generateLogoutPopupName(t),o=e&&e.authority,i=e&&e.mainWindowRedirectUri,s=e?.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,s,o,void 0,i);{this.logger.verbose("asyncPopup set to false, opening popup");let a=this.openSizedPopup("about:blank",r,s);return this.logoutPopupAsync(t,r,s,o,a,i)}}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r,o){return p(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let i=this.initializeServerTelemetryManager(ue.acquireTokenPopup),s=yield E(this.initializeAuthorizationRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,b.Popup);al(s.authority);try{let a=yield E(this.initializeAuthorizationCodeRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(s),c=yield E(this.createAuthCodeClient.bind(this),h.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(i,s.authority,s.azureCloudOptions,s.account),l=Kt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),u;l&&(u=this.performanceClient.startMeasurement(h.FetchAccountIdWithNativeBroker,e.correlationId));let d=yield c.getAuthCodeUrl(A(m({},s),{nativeBroker:l})),f=new so(c,this.browserStorage,a,this.logger,this.performanceClient),g={popup:o,popupName:t,popupWindowAttributes:r},v=this.initiateAuthRequest(d,g);this.eventHandler.emitEvent(D.POPUP_OPENED,b.Popup,{popupWindow:v},null);let I=yield this.monitorPopupForHash(v),S=Et(dh,h.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(I,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(xn.removeThrottle(this.browserStorage,this.config.auth.clientId,a),S.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw w(rn);let X=new sn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ue.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,S.accountId,this.nativeStorage,s.correlationId),{userRequestState:ee}=Je.parseRequestState(this.browserCrypto,s.state);return yield X.acquireToken(A(m({},s),{state:ee,prompt:void 0}))}return yield f.handleCodeResponse(S,s)}catch(a){throw o&&o.close(),a instanceof K&&(a.setCorrelationId(this.correlationId),i.cacheFailedRequest(a)),a}})}logoutPopupAsync(e,t,r,o,i,s){return p(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(D.LOGOUT_START,b.Popup,e);let a=this.initializeServerTelemetryManager(ue.logoutPopup);try{yield this.clearCacheOnLogout(e.account);let c=yield E(this.createAuthCodeClient.bind(this),h.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(a,o,void 0,e.account||void 0);try{c.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&c.authority.protocolMode===ct.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,b.Popup,e),s){let d={apiId:ue.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=V.getAbsoluteUrl(s,Ut());yield this.navigationClient.navigateInternal(f,d)}i&&i.close();return}}let l=c.getLogoutUri(e);this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,b.Popup,e);let u=this.openPopup(l,{popupName:t,popupWindowAttributes:r,popup:i});if(this.eventHandler.emitEvent(D.POPUP_OPENED,b.Popup,{popupWindow:u},null),yield this.monitorPopupForHash(u).catch(()=>{}),s){let d={apiId:ue.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},f=V.getAbsoluteUrl(s,Ut());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${f}`),yield this.navigationClient.navigateInternal(f,d)}else this.logger.verbose("No main window navigation requested")}catch(c){throw i&&i.close(),c instanceof K&&(c.setCorrelationId(this.correlationId),a.cacheFailedRequest(c)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(D.LOGOUT_FAILURE,b.Popup,null,c),this.eventHandler.emitEvent(D.LOGOUT_END,b.Popup),c}this.eventHandler.emitEvent(D.LOGOUT_END,b.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),w(Un)}monitorPopupForHash(e){return new Promise((t,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let o=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(o),r(w(Ft));return}let i="";try{i=e.location.href}catch{}if(!i||i==="about:blank")return;clearInterval(o);let s="",a=this.config.auth.OIDCOptions.serverResponseType;e&&(a===Cn.QUERY?s=e.location.search:s=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(s)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t.popupName,t.popupWindowAttributes)),!r)throw w(js);return r.focus&&r.focus(),this.currentWindow=r,window.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),w(Hs)}}openSizedPopup(e,t,r){let o=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=r.popupSize?.width,l=r.popupSize?.height,u=r.popupPosition?.top,d=r.popupPosition?.left;return(!c||c<0||c>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),c=xe.POPUP_WIDTH),(!l||l<0||l>a)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),l=xe.POPUP_HEIGHT),(!u||u<0||u>a)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),u=Math.max(0,a/2-xe.POPUP_HEIGHT/2+i)),(!d||d<0||d>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),d=Math.max(0,s/2-xe.POPUP_WIDTH/2+o)),window.open(e,t,`width=${c}, height=${l}, top=${u}, left=${d}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(b.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${xe.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${xe.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};var hl=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,t){return p(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(ae.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(ae.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:ue.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield t.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield t.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),w(Un)})}handleCodeResponse(e,t){return p(this,null,function*(){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let r=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(r);if(!o)throw C(Ye.stateNotFound,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(l){throw l instanceof It&&l.subError===Ft?w(Ft):l}let s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&(yield E(this.authModule.updateAuthority.bind(this.authModule),h.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId)),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{let l=this.checkCcsCredentials();l&&(this.authCodeRequest.ccsCredential=l)}let c=yield this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(t),c})}checkCcsCredentials(){let e=this.browserStorage.getTemporaryCache(ae.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}};var fh=class extends Ht{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return p(this,null,function*(){let t=yield E(this.initializeAuthorizationRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,b.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);let r=this.initializeServerTelemetryManager(ue.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(D.RESTORE_FROM_BFCACHE,b.Redirect))};try{let i=yield E(this.initializeAuthorizationCodeRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),s=yield E(this.createAuthCodeClient.bind(this),h.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(r,t.authority,t.azureCloudOptions,t.account),a=new hl(s,this.browserStorage,i,this.logger,this.performanceClient),c=yield s.getAuthCodeUrl(A(m({},t),{nativeBroker:Kt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),l=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${l}`),window.addEventListener("pageshow",o),yield a.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof K&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(t.state),i}})}handleRedirectPromise(e="",t){return p(this,null,function*(){let r=this.initializeServerTelemetryManager(ue.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(b.Redirect),t.event.errorCode="no_server_response",null;let s=this.browserStorage.getTemporaryCache(ae.ORIGIN_URI,!0)||y.EMPTY_STRING,a=V.removeHashFromUrl(s),c=V.removeHashFromUrl(window.location.href);if(a===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&ry(s),yield this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!il()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(ae.URL_HASH,i,!0);let l={apiId:ue.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},u=!0;if(!s||s==="null"){let d=oy();this.browserStorage.setTemporaryCache(ae.ORIGIN_URI,d,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),u=yield this.navigationClient.navigateInternal(d,l)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),u=yield this.navigationClient.navigateInternal(s,l);if(!u)return yield this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(o,r);return null}catch(o){throw o instanceof K&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(b.Redirect),o}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===Cn.QUERY?t=window.location.search:t=window.location.hash);let r=Gr.getDeserializedResponse(t);if(r){try{ww(r,this.browserCrypto,b.Redirect)}catch(i){return i instanceof K&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return ny(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(ae.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ae.URL_HASH)),o&&(r=Gr.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t){return p(this,null,function*(){let r=e.state;if(!r)throw w(Zr);let o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw w(rn);let c=new sn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ue.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:l}=Je.parseRequestState(this.browserCrypto,r);return c.acquireToken(A(m({},o),{state:l,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(r)})}let i=this.browserStorage.getCachedAuthority(r);if(!i)throw w(Xr);let s=yield E(this.createAuthCodeClient.bind(this),h.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(t,i);return xn.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new hl(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)})}logout(e){return p(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(ue.logout);try{this.eventHandler.emitEvent(D.LOGOUT_START,b.Redirect,e),yield this.clearCacheOnLogout(t.account);let o={apiId:ue.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield E(this.createAuthCodeClient.bind(this),h.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)(r,e&&e.authority,void 0,e&&e.account||void 0);if(i.authority.protocolMode===ct.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId),this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,b.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(D.LOGOUT_SUCCESS,b.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof K&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(D.LOGOUT_FAILURE,b.Redirect,null,o),this.eventHandler.emitEvent(D.LOGOUT_END,b.Redirect),o}this.eventHandler.emitEvent(D.LOGOUT_END,b.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return V.getAbsoluteUrl(t,Ut())}};function Sw(n,e,t,r,o){return p(this,null,function*(){if(e.addQueueMeasurement(h.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),w(Un);return o?E(Pk,h.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Et(Lk,h.SilentHandlerLoadFrameSync,t,e,r)(n)})}function Aw(n,e,t,r,o,i,s){return p(this,null,function*(){return r.addQueueMeasurement(h.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<rh&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${rh}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(w(Vs))},e),u=window.setInterval(()=>{let d="",f=n.contentWindow;try{d=f?f.location.href:""}catch{}if(!d||d==="about:blank")return;let g="";f&&(s===Cn.QUERY?g=f.location.search:g=f.location.hash),window.clearTimeout(l),window.clearInterval(u),a(g)},t)}).finally(()=>{Et(Fk,h.RemoveHiddenIframe,o,r,i)(n)})})}function Pk(n,e,t,r){return t.addQueueMeasurement(h.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=bw();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function Lk(n){let e=bw();return e.src=n,e}function bw(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function Fk(n){document.body===n.parentNode&&document.body.removeChild(n)}var ph=class extends Ht{constructor(e,t,r,o,i,s,a,c,l,u,d){super(e,t,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=m({},e);t.prompt?t.prompt!==Te.NONE&&t.prompt!==Te.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${Te.NONE}`),t.prompt=Te.NONE):t.prompt=Te.NONE;let r=yield E(this.initializeAuthorizationRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,b.Silent);al(r.authority);let o=this.initializeServerTelemetryManager(this.apiId),i;try{return i=yield E(this.createAuthCodeClient.bind(this),h.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)(o,r.authority,r.azureCloudOptions,r.account),yield E(this.silentTokenHelper.bind(this),h.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof K&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof K)||s.errorCode!==xe.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);let a=yield E(this.initializeAuthorizationRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,b.Silent);return yield E(this.silentTokenHelper.bind(this),h.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}})}logout(){return Promise.reject(w(Bn))}silentTokenHelper(e,t){return p(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(h.SilentIframeClientTokenHelper,r);let o=yield E(this.initializeAuthorizationCodeRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(t),i=yield E(e.getAuthCodeUrl.bind(e),h.GetAuthCodeUrl,this.logger,this.performanceClient,r)(A(m({},t),{nativeBroker:Kt.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),s=new so(e,this.browserStorage,o,this.logger,this.performanceClient),a=yield E(Sw,h.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,l=yield E(Aw,h.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),u=Et(dh,h.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,c,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw w(rn);let d=new sn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,r),{userRequestState:f}=Je.parseRequestState(this.browserCrypto,t.state);return E(d.acquireToken.bind(d),h.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)(A(m({},t),{state:f,prompt:t.prompt||Te.NONE}))}return E(s.handleCodeResponse.bind(s),h.HandleCodeResponse,this.logger,this.performanceClient,r)(u,t)})}};var gh=class extends Ht{acquireToken(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.SilentRefreshClientAcquireToken,e.correlationId);let t=yield E(ul,h.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=m(m({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(ue.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient(o,r.authority,r.azureCloudOptions,r.account);return E(i.acquireTokenByRefreshToken.bind(i),h.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(w(Bn))}createRefreshTokenClient(e,t,r,o){return p(this,null,function*(){let i=yield E(this.getClientConfiguration.bind(this),h.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e,t,r,o);return new Jr(i,this.performanceClient)})}};var mh=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw w(eo);let o=t.id_token?Vr.extractTokenClaims(t.id_token,Bt):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new tn(tn.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||nt()):void 0,a=this.loadAccount(e,r.clientInfo||t.client_info||"",o,s),c=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),l=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,r),u=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:c,accessToken:l,refreshToken:u},o,s)}loadAccount(e,t,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){let c=Ee.createFromAccountInfo(e.account);return this.storage.setAccount(c),c}else if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),w(Js);let i=Ee.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),s=r?.tid,a=ks(this.storage,o,i,Bt,r,t,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let i=Ce.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,t,r,o,i,s){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let a=t.scope?we.fromString(t.scope):new we(e.scopes),c=s.expiresOn||t.expires_in+new Date().getTime()/1e3,l=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+new Date().getTime()/1e3,u=Ce.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,a.printScopes(),c,l,Bt);return this.storage.setAccessTokenCredential(u),u}loadRefreshToken(e,t,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let o=Ce.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=we.fromString(t.accessToken.target).asArray(),a=new Date(Number(t.accessToken.expiresOn)*1e3),c=new Date(Number(t.accessToken.extendedExpiresOn)*1e3));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var yh=class extends gi{constructor(e){super(e),this.includeRedirectUri=!1}};var vh=class extends Ht{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return p(this,null,function*(){if(!e.code)throw w(Zs);let t=yield E(this.initializeAuthorizationRequest.bind(this),h.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,b.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=A(m({},t),{code:e.code}),i=yield E(this.getClientConfiguration.bind(this),h.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)(r,t.authority,t.azureCloudOptions,t.account),s=new yh(i);this.logger.verbose("Auth code client created");let a=new so(s,this.browserStorage,o,this.logger,this.performanceClient);return yield E(a.handleCodeResponseFromServer.bind(a),h.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof K&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(w(Bn))}};function jn(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function Ch(n,e){try{sl(n)}catch(t){throw e.end({success:!1},t),t}}var pa=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new iw(this.logger,this.performanceClient):Kr,this.eventHandler=new lh(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new da(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,rm(this.config.auth),this.performanceClient):sw(this.config.auth.clientId,this.logger);let t={cacheLocation:me.MemoryStorage,temporaryCacheLocation:me.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new da(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new mh(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return p(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){return p(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}let t=e?.correlationId||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(h.InitializeClientApplication,t);if(this.eventHandler.emitEvent(D.INITIALIZE_START),r)try{this.nativeExtensionProvider=yield Kt.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield E(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),h.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(D.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})})}handleRedirectPromise(e){return p(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Xd(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return p(this,null,function*(){let t=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&Kt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r?.correlationId:this.browserStorage.getTemporaryCache(ae.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(h.AcquireTokenRedirect,i);this.eventHandler.emitEvent(D.HANDLE_REDIRECT_START,b.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let c=new sn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ue.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=E(c.handleRedirectPromise.bind(c),h.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let c=this.createRedirectClient(i);a=E(c.handleRedirectPromise.bind(c),h.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(c=>(c?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(D.LOGIN_SUCCESS,b.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_SUCCESS,b.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:jn(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(D.HANDLE_REDIRECT_END,b.Redirect),c)).catch(c=>{let l=c;throw t.length>0?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,b.Redirect,null,l):this.eventHandler.emitEvent(D.LOGIN_FAILURE,b.Redirect,null,l),this.eventHandler.emitEvent(D.HANDLE_REDIRECT_END,b.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(h.AcquireTokenPreRedirect,t);r.add({accountType:jn(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}let i=this.getAllAccounts().length>0;try{eh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_START,b.Redirect,e):this.eventHandler.emitEvent(D.LOGIN_START,b.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new sn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ue.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof on&&io(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof lt)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,b.Redirect,null,s):this.eventHandler.emitEvent(D.LOGIN_FAILURE,b.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(h.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:jn(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),Ch(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_START,b.Popup,e):this.eventHandler.emitEvent(D.LOGIN_START,b.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative(A(m({},e),{correlationId:t}),ue.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,requestId:s.requestId,accountType:jn(s.account)}),s)).catch(s=>{if(s instanceof on&&io(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof lt)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):i=this.createPopupClient(t).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(D.LOGIN_SUCCESS,b.Popup,s):this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_SUCCESS,b.Popup,s),r.end({success:!0,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:jn(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,b.Popup,null,s):this.eventHandler.emitEvent(D.LOGIN_FAILURE,b.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e),r=A(m({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(h.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:jn(e.account)}),Ch(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(D.SSO_SILENT_START,b.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,ue.ssoSilent).catch(i=>{if(i instanceof on&&io(i))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(D.SSO_SILENT_SUCCESS,b.Silent,i),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:i.fromNativeBroker,requestId:i.requestId,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length,accountType:jn(i.account)}),i)).catch(i=>{throw this.eventHandler.emitEvent(D.SSO_SILENT_FAILURE,b.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(h.AcquireTokenByCode,t);Ch(this.initialized,r),this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_START,b.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw w(ea);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(A(m({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_SUCCESS,b.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:jn(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_FAILURE,b.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){let o=yield this.acquireTokenNative(A(m({},e),{correlationId:t}),ue.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof on&&io(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:jn(o.account),success:!0}),o}else throw w(ta);else throw w(Xs)}catch(o){throw this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_BY_CODE_FAILURE,b.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return p(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(h.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker,requestId:o.requestId}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return p(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(h.AcquireTokenFromCache,e.correlationId),t){case Tt.Default:case Tt.AccessToken:case Tt.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return E(r.acquireToken.bind(r),h.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw C(Ye.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return p(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(h.AcquireTokenByRefreshToken,e.correlationId),t){case Tt.Default:case Tt.AccessTokenAndRefreshToken:case Tt.RefreshToken:case Tt.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return E(r.acquireToken.bind(r),h.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw C(Ye.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return p(this,null,function*(){this.performanceClient.addQueueMeasurement(h.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return E(t.acquireToken.bind(t),h.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(m({correlationId:t},e))})}logoutRedirect(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return eh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return sl(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){return aw(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return cw(e,this.logger,this.browserStorage)}getAccountByUsername(e){return lw(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return uw(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return dw(e,this.logger,this.browserStorage)}setActiveAccount(e){hw(e,this.browserStorage)}getActiveAccount(){return fw(this.browserStorage)}hydrateCache(e,t){return p(this,null,function*(){this.logger.verbose("hydrateCache called");let r=Ee.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r){return p(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw w(rn);return new sn(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)})}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Kt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Te.NONE:case Te.CONSENT:case Te.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new hh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new fh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new ph(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ue.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new fa(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new gh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new vh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ue.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?nt():y.EMPTY_STRING}loginRedirect(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(m({correlationId:t},e||Qm))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(m({correlationId:t},e||Qm))}acquireTokenSilent(e){return p(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(h.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Ch(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw w(qs);r.add({accountType:jn(o)});let i={clientId:this.config.auth.clientId,authority:e.authority||y.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);let c=E(this.acquireTokenSilentAsync.bind(this),h.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)(A(m({},e),{correlationId:t}),o).then(l=>(this.activeSilentTokenRequests.delete(s),r.end({success:!0,fromCache:l.fromCache,isNativeBroker:l.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:l.requestId,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length}),l)).catch(l=>{throw this.activeSilentTokenRequests.delete(s),r.end({success:!1},l),l});return this.activeSilentTokenRequests.set(s,c),A(m({},yield c),{state:e.state})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.discard(),A(m({},yield a),{state:e.state})})}acquireTokenSilentAsync(e,t){return p(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(h.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_START,b.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield E(gw,h.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Tt.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>p(this,null,function*(){if(Uk(a,i))if(this.activeIframeRequest)if(i!==Tt.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let d=this.performanceClient.startMeasurement(h.AwaitConcurrentIframe,o.correlationId);d.add({awaitIframeCorrelationId:u});let f=yield l;if(d.end({success:f}),f)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),E(this.acquireTokenBySilentIframe.bind(this),h.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),E(this.acquireTokenBySilentIframe.bind(this),h.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_SUCCESS,b.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,requestId:a.requestId},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_FAILURE,b.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return p(this,null,function*(){return Kt.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ue.acquireTokenSilent_silentFlow).catch(r=>p(this,null,function*(){throw r instanceof on&&io(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,C(Ye.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),E(this.acquireTokenFromCache.bind(this),h.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Tt.AccessToken)throw r;return this.eventHandler.emitEvent(D.ACQUIRE_TOKEN_NETWORK_START,b.Silent,e),E(this.acquireTokenByRefreshToken.bind(this),h.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}};function Uk(n,e){let t=!(n instanceof lt&&n.subError!==hr.badToken),r=n.errorCode===xe.INVALID_GRANT_ERROR||n.errorCode===Ye.tokenRefreshRequired,o=t&&r||n.errorCode===hr.noTokensFound||n.errorCode===hr.refreshTokenExpired,i=BT.includes(e);return o&&i}function Dw(n,e){return p(this,null,function*(){let t=new ih(n);return yield t.initialize(),pa.createController(t,e)})}var fl=class n{static createPublicClientApplication(e){return p(this,null,function*(){let t=yield Dw(e);return new n(e,t)})}constructor(e,t){this.controller=t||new pa(new ih(e))}initialize(e){return p(this,null,function*(){return this.controller.initialize(e)})}acquireTokenPopup(e){return p(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e){return this.controller.addEventCallback(e)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return p(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var pl=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case D.LOGIN_START:return tt.Login;case D.SSO_SILENT_START:return tt.SsoSilent;case D.ACQUIRE_TOKEN_START:if(e.interactionType===b.Redirect||e.interactionType===b.Popup)return tt.AcquireToken;break;case D.HANDLE_REDIRECT_START:return tt.HandleRedirect;case D.LOGOUT_START:return tt.Logout;case D.SSO_SILENT_SUCCESS:case D.SSO_SILENT_FAILURE:if(t&&t!==tt.SsoSilent)break;return tt.None;case D.LOGOUT_END:if(t&&t!==tt.Logout)break;return tt.None;case D.HANDLE_REDIRECT_END:if(t&&t!==tt.HandleRedirect)break;return tt.None;case D.LOGIN_SUCCESS:case D.LOGIN_FAILURE:case D.ACQUIRE_TOKEN_SUCCESS:case D.ACQUIRE_TOKEN_FAILURE:case D.RESTORE_FROM_BFCACHE:if(e.interactionType===b.Redirect||e.interactionType===b.Popup){if(t&&t!==tt.Login&&t!==tt.AcquireToken)break;return tt.None}break}return null}};var _w="@azure/msal-angular",sy="3.0.23",gl=new x("MSAL_INSTANCE"),Eh=new x("MSAL_GUARD_CONFIG"),Bk=new x("MSAL_INTERCEPTOR_CONFIG"),Hk=new x("MSAL_BROADCAST_CONFIG"),Ti=(()=>{class n{constructor(t,r){this.instance=t,this.location=r;let o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(Zm.Angular,sy)}initialize(){return le(this.instance.initialize())}acquireTokenPopup(t){return le(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return le(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return le(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return le(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return le(this.instance.loginPopup(t))}loginRedirect(t){return le(this.instance.loginRedirect(t))}logout(t){return le(this.instance.logout(t))}logoutRedirect(t){return le(this.instance.logoutRedirect(t))}logoutPopup(t){return le(this.instance.logoutPopup(t))}ssoSilent(t){return le(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(_w,sy)),this.logger}setLogger(t){this.logger=t.clone(_w,sy),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(M(gl),M(Nr))},n.\u0275prov=R({token:n,factory:n.\u0275fac}),n})(),Ih=(()=>{class n{constructor(t,r,o){this.msalInstance=t,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new Ea(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Ne,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new $e(tt.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);let s=pl.getInteractionStatusFromEvent(i,this._inProgress.value);s!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)(M(gl),M(Ti),M(Hk,8))},n.\u0275prov=R({token:n,factory:n.\u0275fac}),n})(),ay=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){let r=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):m({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===b.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(G(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(m({redirectStartPage:o},r)).pipe(G(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==b.Popup&&this.msalGuardConfig.interactionType!==b.Redirect)throw new ua("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(V.hashContainsKnownProperties(window.location.hash)&&th.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),k(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),k(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let r=this.location.path(!0);return this.authService.initialize().pipe(ln(()=>this.authService.handleRedirectObservable()),ln(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),k(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?k(this.parseUrl(this.location.path())):k(this.parseUrl(""))}return k(!0)}),wn(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),k(this.loginFailedRoute)):k(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(M(Eh),M(Ih),M(Ti),M(Nr),M(gd))},n.\u0275prov=R({token:n,factory:n.\u0275fac}),n})();var Rw=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:gl,useValue:t},{provide:Eh,useValue:r},{provide:Bk,useValue:o},Ti]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=it({type:n}),n.\u0275inj=ot({providers:[ay,Ih],imports:[ko]}),n})();var wi=class n{static isArray(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}static isObject(e,t=!0){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&(t||Object.keys(e).length!==0)}static equals(e,t,r){return r?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),o=Array.isArray(t),i,s,a;if(r&&o){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!this.equalsByValue(e[i],t[i]))return!1;return!0}if(r!=o)return!1;var c=this.isDate(e),l=this.isDate(t);if(c!=l)return!1;if(c&&l)return e.getTime()==t.getTime();var u=e instanceof RegExp,d=t instanceof RegExp;if(u!=d)return!1;if(u&&d)return e.toString()==t.toString();var f=Object.keys(e);if(s=f.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,f[i]))return!1;for(i=s;i--!==0;)if(a=f[i],!this.equalsByValue(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")==-1)return e[t];{let r=t.split("."),o=e;for(let i=0,s=r.length;i<s;++i){if(o==null)return null;o=o[r[i]]}return o}}else return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,r){let o;e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,r,o){if(r.length>0){let i=!1;for(let s=0;s<r.length;s++)if(this.findIndexInList(r[s],o)>t){r.splice(s,0,e),i=!0;break}i||r.push(e)}else r.push(e)}static findIndexInList(e,t){let r=-1;if(t){for(let o=0;o<t.length;o++)if(t[o]==e){r=o;break}}return r}static contains(e,t){if(e!=null&&t&&t.length){for(let r of t)if(this.equals(e,r))return!0}return!1}static removeAccents(e){return e&&(e=e.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),e}static isDate(e){return Object.prototype.toString.call(e)==="[object Date]"}static isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!this.isDate(e)&&typeof e=="object"&&Object.keys(e).length===0}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,r,o=1){let i=-1,s=this.isEmpty(e),a=this.isEmpty(t);return s&&a?i=0:s?i=o:a?i=-o:typeof e=="string"&&typeof t=="string"?i=e.localeCompare(t,r,{numeric:!0}):i=e<t?-1:e>t?1:0,i}static sort(e,t,r=1,o,i=1){let s=n.compare(e,t,o,r),a=r;return(n.isEmpty(e)||n.isEmpty(t))&&(a=i===1?r:i),a*s}static merge(e,t){if(!(e==null&&t==null)){{if((e==null||typeof e=="object")&&(t==null||typeof t=="object"))return m(m({},e||{}),t||{});if((e==null||typeof e=="string")&&(t==null||typeof t=="string"))return[e||"",t||""].join(" ")}return t||e}}static isPrintableCharacter(e=""){return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)}static getItemValue(e,...t){return this.isFunction(e)?e(...t):e}static findLastIndex(e,t){let r=-1;if(this.isNotEmpty(e))try{r=e.findLastIndex(t)}catch{r=e.lastIndexOf([...e].reverse().find(t))}return r}static findLast(e,t){let r;if(this.isNotEmpty(e))try{r=e.findLast(t)}catch{r=[...e].reverse().find(t)}return r}static deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),o=Array.isArray(t),i,s,a;if(r&&o){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!this.deepEquals(e[i],t[i]))return!1;return!0}if(r!=o)return!1;var c=e instanceof Date,l=t instanceof Date;if(c!=l)return!1;if(c&&l)return e.getTime()==t.getTime();var u=e instanceof RegExp,d=t instanceof RegExp;if(u!=d)return!1;if(u&&d)return e.toString()==t.toString();var f=Object.keys(e);if(s=f.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,f[i]))return!1;for(i=s;i--!==0;)if(a=f[i],!this.deepEquals(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}},Mw=0;function Th(n="pn_id_"){return Mw++,`${n}${Mw}`}function jk(){let n=[],e=(i,s)=>{let a=n.length>0?n[n.length-1]:{key:i,value:s},c=a.value+(a.key===i?0:s)+2;return n.push({key:i,value:c}),c},t=i=>{n=n.filter(s=>s.value!==i)},r=()=>n.length>0?n[n.length-1].value:0,o=i=>i&&parseInt(i.style.zIndex,10)||0;return{get:o,set:(i,s,a)=>{s&&(s.style.zIndex=String(e(i,a)))},clear:i=>{i&&(t(o(i)),i.style.zIndex="")},getCurrent:()=>r()}}var v8=jk();var ft=(()=>{class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"}return n})();var Nw=(()=>{class n{ripple=!1;inputStyle=Pp("outlined");overlayOptions={};csp=Pp({nonce:void 0});filterMatchModeOptions={text:[ft.STARTS_WITH,ft.CONTAINS,ft.NOT_CONTAINS,ft.ENDS_WITH,ft.EQUALS,ft.NOT_EQUALS],numeric:[ft.EQUALS,ft.NOT_EQUALS,ft.LESS_THAN,ft.LESS_THAN_OR_EQUAL_TO,ft.GREATER_THAN,ft.GREATER_THAN_OR_EQUAL_TO],date:[ft.DATE_IS,ft.DATE_IS_NOT,ft.DATE_BEFORE,ft.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new Ne;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation=m(m({},this.translation),t),this.translationSource.next(this.translation)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ga=(()=>{class n{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(r){return new(r||n)(te(Ar))};static \u0275dir=mt({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[0,"pTemplate","name"]},standalone:!0})}return n})(),ml=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=ot({})}return n})();var Z=(()=>{class n{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let o=r.trim().split(" ");for(let i=0;i<o.length;i++)t.classList.add(o[i])}else{let o=r.split(" ");for(let i=0;i<o.length;i++)t.className+=" "+o[i]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(t,r){t&&r&&[r].flat().filter(Boolean).forEach(o=>o.split(" ").forEach(i=>this.removeClass(t,i)))}static hasClass(t,r){return t&&r?t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className):!1}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return this.isElement(t)?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,o=0;for(var i=0;i<r.length;i++){if(r[i]==t)return o;r[i].nodeType==1&&o++}return-1}static indexWithinGroup(t,r){let o=t.parentNode?t.parentNode.childNodes:[],i=0;for(var s=0;s<o.length;s++){if(o[s]==t)return i;o[s].attributes&&o[s].attributes[r]&&o[s].nodeType==1&&i++}return-1}static appendOverlay(t,r,o="self"){o!=="self"&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,o="self",i=!0){t&&r&&(i&&(t.style.minWidth=`${n.getOuterWidth(r)}px`),o==="self"?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r,o=!0){let i=X=>{if(X)return getComputedStyle(X).getPropertyValue("position")==="relative"?X:i(X.parentElement)},s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),a=r.offsetHeight??r.getBoundingClientRect().height,c=r.getBoundingClientRect(),l=this.getWindowScrollTop(),u=this.getWindowScrollLeft(),d=this.getViewport(),g=i(t)?.getBoundingClientRect()||{top:-1*l,left:-1*u},v,I;c.top+a+s.height>d.height?(v=c.top-g.top-s.height,t.style.transformOrigin="bottom",c.top+v<0&&(v=-1*c.top)):(v=a+c.top-g.top,t.style.transformOrigin="top");let S=c.left+s.width-d.width,_=c.left-g.left;s.width>d.width?I=(c.left-g.left)*-1:S>0?I=_-S:I=c.left-g.left,t.style.top=v+"px",t.style.left=I+"px",o&&(t.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static absolutePosition(t,r,o=!0){let i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),s=i.height,a=i.width,c=r.offsetHeight??r.getBoundingClientRect().height,l=r.offsetWidth??r.getBoundingClientRect().width,u=r.getBoundingClientRect(),d=this.getWindowScrollTop(),f=this.getWindowScrollLeft(),g=this.getViewport(),v,I;u.top+c+s>g.height?(v=u.top+d-s,t.style.transformOrigin="bottom",v<0&&(v=d)):(v=c+u.top+d,t.style.transformOrigin="top"),u.left+a>g.width?I=Math.max(0,u.left+f+l-a):I=u.left+f,t.style.top=v+"px",t.style.left=I+"px",o&&(t.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static getParents(t,r=[]){return t.parentNode===null?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let o=this.getParents(t),i=/(auto|scroll)/,s=a=>{let c=window.getComputedStyle(a,null);return i.test(c.getPropertyValue("overflow"))||i.test(c.getPropertyValue("overflowX"))||i.test(c.getPropertyValue("overflowY"))};for(let a of o){let c=a.nodeType===1&&a.dataset.scrollselectors;if(c){let l=c.split(",");for(let u of l){let d=this.findSingle(a,u);d&&s(d)&&r.push(d)}}a.nodeType!==9&&s(a)&&r.push(a)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let o=getComputedStyle(t).getPropertyValue("borderTopWidth"),i=o?parseFloat(o):0,s=getComputedStyle(t).getPropertyValue("paddingTop"),a=s?parseFloat(s):0,c=t.getBoundingClientRect(),u=r.getBoundingClientRect().top+document.body.scrollTop-(c.top+document.body.scrollTop)-i-a,d=t.scrollTop,f=t.clientHeight,g=this.getOuterHeight(r);u<0?t.scrollTop=d+u:u+g>f&&(t.scrollTop=d+u-f+g)}static fadeIn(t,r){t.style.opacity=0;let o=+new Date,i=0,s=function(){i=+t.style.opacity.replace(",",".")+(new Date().getTime()-o)/r,t.style.opacity=i,o=+new Date,+i<1&&(window.requestAnimationFrame&&requestAnimationFrame(s)||setTimeout(s,16))};s()}static fadeOut(t,r){var o=1,i=50,s=r,a=i/s;let c=setInterval(()=>{o=o-a,o<=0&&(o=0,clearInterval(c)),t.style.opacity=o},i)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var o=Element.prototype,i=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(s){return[].indexOf.call(document.querySelectorAll(s),this)!==-1};return i.call(t,r)}static getOuterWidth(t,r){let o=t.offsetWidth;if(r){let i=getComputedStyle(t);o+=parseFloat(i.marginLeft)+parseFloat(i.marginRight)}return o}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,o=getComputedStyle(t);return r+=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),r}static width(t){let r=t.offsetWidth,o=getComputedStyle(t);return r-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,o=getComputedStyle(t);return r+=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),r}static getOuterHeight(t,r){let o=t.offsetHeight;if(r){let i=getComputedStyle(t);o+=parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return o}static getHeight(t){let r=t.offsetHeight,o=getComputedStyle(t);return r-=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,o=getComputedStyle(t);return r-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth),r}static getViewport(){let t=window,r=document,o=r.documentElement,i=r.getElementsByTagName("body")[0],s=t.innerWidth||o.clientWidth||i.clientWidth,a=t.innerHeight||o.clientHeight||i.clientHeight;return{width:s,height:a}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let o=t.parentNode;if(!o)throw"Can't replace element";return o.replaceChild(r,t)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var t=window.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return!0;var o=t.indexOf("Trident/");if(o>0){var i=t.indexOf("rv:");return!0}var s=t.indexOf("Edge/");return s>0}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else if(r&&r.el&&r.el.nativeElement)r.el.nativeElement.appendChild(t);else throw"Cannot append "+r+" to "+t}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else if(r.el&&r.el.nativeElement)r.el.nativeElement.removeChild(t);else throw"Cannot remove "+t+" from "+r}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}else{if(this.calculatedScrollbarWidth!==null)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let o=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=o,o}}static calculateScrollbarHeight(){if(this.calculatedScrollbarHeight!==null)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,o){t[r].apply(t,o)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||t.offsetParent===null}static isVisible(t){return t&&t.offsetParent!=null}static isExist(t){return t!==null&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableSelectorString(t=""){return`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        .p-inputtext:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
        .p-button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`}static getFocusableElements(t,r=""){let o=this.find(t,this.getFocusableSelectorString(r)),i=[];for(let s of o){let a=getComputedStyle(s);this.isVisible(s)&&a.display!="none"&&a.visibility!="hidden"&&i.push(s)}return i}static getFocusableElement(t,r=""){let o=this.findSingle(t,this.getFocusableSelectorString(r));if(o){let i=getComputedStyle(o);if(this.isVisible(o)&&i.display!="none"&&i.visibility!="hidden")return o}return null}static getFirstFocusableElement(t,r=""){let o=this.getFocusableElements(t,r);return o.length>0?o[0]:null}static getLastFocusableElement(t,r){let o=this.getFocusableElements(t,r);return o.length>0?o[o.length-1]:null}static getNextFocusableElement(t,r=!1){let o=n.getFocusableElements(t),i=0;if(o&&o.length>0){let s=o.indexOf(o[0].ownerDocument.activeElement);r?s==-1||s===0?i=o.length-1:i=s-1:s!=-1&&s!==o.length-1&&(i=s+1)}return o[i]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:let o=typeof t;if(o==="string")return document.querySelector(t);if(o==="object"&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;let s=(a=>!!(a&&a.constructor&&a.call&&a.apply))(t)?t():t;return s&&s.nodeType===9||this.isExist(s)?s:null}}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(t,r){if(t){let o=t.getAttribute(r);return isNaN(o)?o==="true"||o==="false"?o==="true":o:+o}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(t="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,t)}static unblockBodyScroll(t="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,t)}static createElement(t,r={},...o){if(t){let i=document.createElement(t);return this.setAttributes(i,r),i.append(...o),i}}static setAttribute(t,r="",o){this.isElement(t)&&o!==null&&o!==void 0&&t.setAttribute(r,o)}static setAttributes(t,r={}){if(this.isElement(t)){let o=(i,s)=>{let a=t?.$attrs?.[i]?[t?.$attrs?.[i]]:[];return[s].flat().reduce((c,l)=>{if(l!=null){let u=typeof l;if(u==="string"||u==="number")c.push(l);else if(u==="object"){let d=Array.isArray(l)?o(i,l):Object.entries(l).map(([f,g])=>i==="style"&&(g||g===0)?`${f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${g}`:g?f:void 0);c=d.length?c.concat(d.filter(f=>!!f)):c}}return c},a)};Object.entries(r).forEach(([i,s])=>{if(s!=null){let a=i.match(/^on(.+)/);a?t.addEventListener(a[1].toLowerCase(),s):i==="pBind"?this.setAttributes(t,s):(s=i==="class"?[...new Set(o("class",s))].join(" ").trim():i==="style"?o("style",s).join(";").trim():s,(t.$attrs=t.$attrs||{})&&(t.$attrs[i]=s),t.setAttribute(i,s))}})}}static isFocusableElement(t,r=""){return this.isElement(t)?t.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r}`):!1}}return n})();var kw=(()=>{class n{autofocus=!1;focused=!1;platformId=T(Pt);document=T(Se);host=T(Ue);ngAfterContentChecked(){this.autofocus===!1?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autoFocus()}ngAfterViewChecked(){this.focused||this.autoFocus()}autoFocus(){ls(this.platformId)&&this.autofocus&&setTimeout(()=>{let t=Z.getFocusableElements(this.host?.nativeElement);t.length===0&&this.host.nativeElement.focus(),t.length>0&&t[0].focus(),this.focused=!0})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=mt({type:n,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:[2,"autofocus","autofocus",ke]},standalone:!0,features:[pn]})}return n})();var $k=["*"],Ow=(()=>{class n{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){let t=wi.isEmpty(this.label);this.role=t?void 0:"img",this.ariaLabel=t?void 0:this.label,this.ariaHidden=t}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:[2,"spin","spin",ke],styleClass:"styleClass"},standalone:!0,features:[pn,ge],ngContentSelectors:$k,decls:1,vars:0,template:function(r,o){r&1&&(Qn(),Jn(0))},encapsulation:2,changeDetection:0})}return n})();var xw=(()=>{class n extends Ow{pathId;ngOnInit(){this.pathId="url(#"+Th()+")"}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Fa(n)))(o||n)}})();static \u0275cmp=se({type:n,selectors:[["SpinnerIcon"]],standalone:!0,features:[Lp,ge],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,o){r&1&&(_C(),B(0,"svg",0)(1,"g"),et(2,"path",1),P(),B(3,"defs")(4,"clipPath",2),et(5,"rect",3),P()()()),r&2&&(Mr(o.getClassNames()),Ae("aria-label",o.ariaLabel)("aria-hidden",o.ariaHidden)("role",o.role),N(),Ae("clip-path",o.pathId),N(3),ne("id",o.pathId))},encapsulation:2})}return n})();var Pw=(()=>{class n{document;platformId;renderer;el;zone;config;constructor(t,r,o,i,s,a){this.document=t,this.platformId=r,this.renderer=o,this.el=i,this.zone=s,this.config=a}animationListener;mouseDownListener;timeout;ngAfterViewInit(){ls(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(t){let r=this.getInk();if(!r||this.document.defaultView?.getComputedStyle(r,null).display==="none")return;if(Z.removeClass(r,"p-ink-active"),!Z.getHeight(r)&&!Z.getWidth(r)){let a=Math.max(Z.getOuterWidth(this.el.nativeElement),Z.getOuterHeight(this.el.nativeElement));r.style.height=a+"px",r.style.width=a+"px"}let o=Z.getOffset(this.el.nativeElement),i=t.pageX-o.left+this.document.body.scrollTop-Z.getWidth(r)/2,s=t.pageY-o.top+this.document.body.scrollLeft-Z.getHeight(r)/2;this.renderer.setStyle(r,"top",s+"px"),this.renderer.setStyle(r,"left",i+"px"),Z.addClass(r,"p-ink-active"),this.timeout=setTimeout(()=>{let a=this.getInk();a&&Z.removeClass(a,"p-ink-active")},401)}getInk(){let t=this.el.nativeElement.children;for(let r=0;r<t.length;r++)if(typeof t[r].className=="string"&&t[r].className.indexOf("p-ink")!==-1)return t[r];return null}resetInk(){let t=this.getInk();t&&Z.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Z.removeClass(t.currentTarget,"p-ink-active")}create(){let t=this.renderer.createElement("span");this.renderer.addClass(t,"p-ink"),this.renderer.appendChild(this.el.nativeElement,t),this.renderer.setAttribute(t,"aria-hidden","true"),this.renderer.setAttribute(t,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(t,"animationend",this.onAnimationEnd.bind(this)))}remove(){let t=this.getInk();t&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,Z.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(r){return new(r||n)(te(Se),te(Pt),te(Wn),te(Ue),te(Ie),te(Nw,8))};static \u0275dir=mt({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"],standalone:!0})}return n})();var Gk=["*"],Lw=n=>({class:n});function zk(n,e){n&1&&Yn(0)}function qk(n,e){if(n&1&&et(0,"span",8),n&2){let t=He(3);ne("ngClass",t.iconClass()),Ae("aria-hidden",!0)("data-pc-section","loadingicon")}}function Kk(n,e){if(n&1&&et(0,"SpinnerIcon",9),n&2){let t=He(3);ne("styleClass",t.spinnerIconClass())("spin",!0),Ae("aria-hidden",!0)("data-pc-section","loadingicon")}}function Wk(n,e){if(n&1&&(ns(0),Be(1,qk,1,3,"span",6)(2,Kk,1,4,"SpinnerIcon",7),rs()),n&2){let t=He(2);N(),ne("ngIf",t.loadingIcon),N(),ne("ngIf",!t.loadingIcon)}}function Yk(n,e){}function Qk(n,e){if(n&1&&Be(0,Yk,0,0,"ng-template",10),n&2){let t=He(2);ne("ngIf",t.loadingIconTemplate)}}function Jk(n,e){if(n&1&&(ns(0),Be(1,Wk,3,2,"ng-container",2)(2,Qk,1,1,null,5),rs()),n&2){let t=He();N(),ne("ngIf",!t.loadingIconTemplate),N(),ne("ngTemplateOutlet",t.loadingIconTemplate)("ngTemplateOutletContext",Bp(3,Lw,t.iconClass()))}}function Zk(n,e){if(n&1&&et(0,"span",8),n&2){let t=He(2);ne("ngClass",t.iconClass()),Ae("data-pc-section","icon")}}function Xk(n,e){}function eO(n,e){if(n&1&&Be(0,Xk,0,0,"ng-template",10),n&2){let t=He(2);ne("ngIf",!t.icon&&t.iconTemplate)}}function tO(n,e){if(n&1&&(ns(0),Be(1,Zk,1,2,"span",6)(2,eO,1,1,null,5),rs()),n&2){let t=He();N(),ne("ngIf",t.icon&&!t.iconTemplate),N(),ne("ngTemplateOutlet",t.iconTemplate)("ngTemplateOutletContext",Bp(3,Lw,t.iconClass()))}}function nO(n,e){if(n&1&&(B(0,"span",11),ve(1),P()),n&2){let t=He();Ae("aria-hidden",t.icon&&!t.label)("data-pc-section","label"),N(),Uu(t.label)}}function rO(n,e){if(n&1&&(B(0,"span",8),ve(1),P()),n&2){let t=He();Mr(t.badgeClass),ne("ngClass",t.badgeStyleClass()),Ae("data-pc-section","badge"),N(),Uu(t.badge)}}var ao={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"},wh=(()=>{class n{el;document;iconPos="left";loadingIcon;get label(){return this._label}set label(t){this._label=t,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(t){this._icon=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(t){this._loading=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}severity;raised=!1;rounded=!1;text=!1;outlined=!1;size=null;plain=!1;_label;_icon;_loading=!1;initialized;get htmlElement(){return this.el.nativeElement}_internalClasses=Object.values(ao);constructor(t,r){this.el=t,this.document=r}ngAfterViewInit(){Z.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let t=[ao.button,ao.component];return this.icon&&!this.label&&wi.isEmpty(this.htmlElement.textContent)&&t.push(ao.iconOnly),this.loading&&(t.push(ao.disabled,ao.loading),!this.icon&&this.label&&t.push(ao.labelOnly),this.icon&&!this.label&&!wi.isEmpty(this.htmlElement.textContent)&&t.push(ao.iconOnly)),this.text&&t.push("p-button-text"),this.severity&&t.push(`p-button-${this.severity}`),this.plain&&t.push("p-button-plain"),this.raised&&t.push("p-button-raised"),this.size&&t.push(`p-button-${this.size}`),this.outlined&&t.push("p-button-outlined"),this.rounded&&t.push("p-button-rounded"),this.size==="small"&&t.push("p-button-sm"),this.size==="large"&&t.push("p-button-lg"),t}setStyleClass(){let t=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...t)}createLabel(){if(!Z.findSingle(this.htmlElement,".p-button-label")&&this.label){let r=this.document.createElement("span");this.icon&&!this.label&&r.setAttribute("aria-hidden","true"),r.className="p-button-label",r.appendChild(this.document.createTextNode(this.label)),this.htmlElement.appendChild(r)}}createIcon(){if(!Z.findSingle(this.htmlElement,".p-button-icon")&&(this.icon||this.loading)){let r=this.document.createElement("span");r.className="p-button-icon",r.setAttribute("aria-hidden","true");let o=this.label?"p-button-icon-"+this.iconPos:null;o&&Z.addClass(r,o);let i=this.getIconClass();i&&Z.addMultipleClasses(r,i),this.htmlElement.insertBefore(r,this.htmlElement.firstChild)}}updateLabel(){let t=Z.findSingle(this.htmlElement,".p-button-label");if(!this.label){t&&this.htmlElement.removeChild(t);return}t?t.textContent=this.label:this.createLabel()}updateIcon(){let t=Z.findSingle(this.htmlElement,".p-button-icon"),r=Z.findSingle(this.htmlElement,".p-button-label");t?this.iconPos?t.className="p-button-icon "+(r?"p-button-icon-"+this.iconPos:"")+" "+this.getIconClass():t.className="p-button-icon "+this.getIconClass():this.createIcon()}getIconClass(){return this.loading?"p-button-loading-icon pi-spin "+(this.loadingIcon??"pi pi-spinner"):this.icon||"p-hidden"}ngOnDestroy(){this.initialized=!1}static \u0275fac=function(r){return new(r||n)(te(Ue),te(Se))};static \u0275dir=mt({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading",severity:"severity",raised:[2,"raised","raised",ke],rounded:[2,"rounded","rounded",ke],text:[2,"text","text",ke],outlined:[2,"outlined","outlined",ke],size:"size",plain:[2,"plain","plain",ke]},standalone:!0,features:[pn]})}return n})(),oO=(()=>{class n{el;type="button";iconPos="left";icon;badge;label;disabled;loading=!1;loadingIcon;raised=!1;rounded=!1;text=!1;plain=!1;severity;outlined=!1;link=!1;tabindex;size;style;styleClass;badgeClass;ariaLabel;autofocus;onClick=new Le;onFocus=new Le;onBlur=new Le;contentTemplate;loadingIconTemplate;iconTemplate;templates;constructor(t){this.el=t}spinnerIconClass(){return Object.entries(this.iconClass()).filter(([,t])=>!!t).reduce((t,[r])=>t+` ${r}`,"p-button-loading-icon")}iconClass(){let t={"p-button-icon":!0,"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label};return this.loading?t[`p-button-loading-icon pi-spin ${this.loadingIcon??""}`]=!0:this.icon&&(t[this.icon]=!0),t}get buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":(this.icon||this.iconTemplate||this.loadingIcon||this.loadingIconTemplate)&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label&&!this.loadingIcon&&this.iconPos==="left","p-button-link":this.link,[`p-button-${this.severity}`]:this.severity,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-text":this.text,"p-button-outlined":this.outlined,"p-button-sm":this.size==="small","p-button-lg":this.size==="large","p-button-plain":this.plain,[`${this.styleClass}`]:this.styleClass}}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;case"icon":this.iconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;default:this.contentTemplate=t.template;break}})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&String(this.badge).length===1}}focus(){this.el.nativeElement.firstChild.focus()}static \u0275fac=function(r){return new(r||n)(te(Ue))};static \u0275cmp=se({type:n,selectors:[["p-button"]],contentQueries:function(r,o,i){if(r&1&&_o(i,ga,4),r&2){let s;gn(s=mn())&&(o.templates=s)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(r,o){r&2&&Up("p-disabled",o.disabled)},inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:[2,"disabled","disabled",ke],loading:[2,"loading","loading",ke],loadingIcon:"loadingIcon",raised:[2,"raised","raised",ke],rounded:[2,"rounded","rounded",ke],text:[2,"text","text",ke],plain:[2,"plain","plain",ke],severity:"severity",outlined:[2,"outlined","outlined",ke],link:[2,"link","link",ke],tabindex:[2,"tabindex","tabindex",Va],size:"size",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel",autofocus:[2,"autofocus","autofocus",ke]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},standalone:!0,features:[pn,ge],ngContentSelectors:Gk,decls:7,vars:14,consts:[["pRipple","","pAutoFocus","",3,"click","focus","blur","ngStyle","disabled","ngClass","autofocus"],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass",4,"ngIf"],[3,"styleClass","spin",4,"ngIf"],[3,"ngClass"],[3,"styleClass","spin"],[3,"ngIf"],[1,"p-button-label"]],template:function(r,o){r&1&&(Qn(),B(0,"button",0),Lt("click",function(s){return o.onClick.emit(s)})("focus",function(s){return o.onFocus.emit(s)})("blur",function(s){return o.onBlur.emit(s)}),Jn(1),Be(2,zk,1,0,"ng-container",1)(3,Jk,3,5,"ng-container",2)(4,tO,3,5,"ng-container",2)(5,nO,2,3,"span",3)(6,rO,2,5,"span",4),P()),r&2&&(ne("ngStyle",o.style)("disabled",o.disabled||o.loading)("ngClass",o.buttonClass)("autofocus",o.autofocus),Ae("type",o.type)("aria-label",o.ariaLabel)("data-pc-name","button")("data-pc-section","root")("tabindex",o.tabindex),N(2),ne("ngTemplateOutlet",o.contentTemplate),N(),ne("ngIf",o.loading),N(),ne("ngIf",!o.loading),N(),ne("ngIf",!o.contentTemplate&&o.label),N(),ne("ngIf",!o.contentTemplate&&o.badge))},dependencies:[Gu,cs,as,ss,Pw,kw,xw],encapsulation:2,changeDetection:0})}return n})(),Sh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=ot({imports:[oO,ml]})}return n})();var iO=["*"];function sO(n,e){n&1&&Yn(0)}function aO(n,e){if(n&1&&(B(0,"div",4),Be(1,sO,1,0,"ng-container",5),P()),n&2){let t=He();Ae("data-pc-section","start"),N(),ne("ngTemplateOutlet",t.startTemplate)}}function cO(n,e){n&1&&Yn(0)}function lO(n,e){if(n&1&&(B(0,"div",6),Be(1,cO,1,0,"ng-container",5),P()),n&2){let t=He();Ae("data-pc-section","center"),N(),ne("ngTemplateOutlet",t.centerTemplate)}}function uO(n,e){n&1&&Yn(0)}function dO(n,e){if(n&1&&(B(0,"div",7),Be(1,uO,1,0,"ng-container",5),P()),n&2){let t=He();Ae("data-pc-section","end"),N(),ne("ngTemplateOutlet",t.endTemplate)}}var Uw=(()=>{class n{el;style;styleClass;ariaLabelledBy;templates;startTemplate;endTemplate;centerTemplate;constructor(t){this.el=t}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"start":case"left":this.startTemplate=t.template;break;case"end":case"right":this.endTemplate=t.template;break;case"center":this.centerTemplate=t.template;break}})}static \u0275fac=function(r){return new(r||n)(te(Ue))};static \u0275cmp=se({type:n,selectors:[["p-toolbar"]],contentQueries:function(r,o,i){if(r&1&&_o(i,ga,4),r&2){let s;gn(s=mn())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy"},ngContentSelectors:iO,decls:5,vars:9,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(r,o){r&1&&(Qn(),B(0,"div",0),Jn(1),Be(2,aO,2,2,"div",1)(3,lO,2,2,"div",2)(4,dO,2,2,"div",3),P()),r&2&&(Mr(o.styleClass),ne("ngClass","p-toolbar p-component")("ngStyle",o.style),Ae("aria-labelledby",o.ariaLabelledBy)("data-pc-name","toolbar"),N(2),ne("ngIf",o.startTemplate),N(),ne("ngIf",o.centerTemplate),N(),ne("ngIf",o.endTemplate))},dependencies:[ss,Gu,cs,as],styles:[`@layer primeng{.p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}}
`],encapsulation:2,changeDetection:0})}return n})(),Bw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=ot({imports:[ko,ml,ml]})}return n})();var fO=["container"],pO=["content"],gO=["xBar"],mO=["yBar"],yO=["*"];function vO(n,e){n&1&&Yn(0)}var Hw=(()=>{class n{platformId;el;zone;cd;document;renderer;style;styleClass;step=5;containerViewChild;contentViewChild;xBarViewChild;yBarViewChild;templates;scrollYRatio;scrollXRatio;timeoutFrame=t=>setTimeout(t,0);initialized=!1;lastPageY;lastPageX;isXBarClicked=!1;isYBarClicked=!1;contentTemplate;lastScrollLeft=0;lastScrollTop=0;orientation="vertical";timer;contentId;windowResizeListener;contentScrollListener;mouseEnterListener;xBarMouseDownListener;yBarMouseDownListener;documentMouseMoveListener;documentMouseUpListener;constructor(t,r,o,i,s,a){this.platformId=t,this.el=r,this.zone=o,this.cd=i,this.document=s,this.renderer=a,this.contentId=Th()+"_content"}ngAfterViewInit(){ls(this.platformId)&&this.zone.runOutsideAngular(()=>{this.moveBar(),this.moveBar=this.moveBar.bind(this),this.onXBarMouseDown=this.onXBarMouseDown.bind(this),this.onYBarMouseDown=this.onYBarMouseDown.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),this.windowResizeListener=this.renderer.listen(window,"resize",this.moveBar),this.contentScrollListener=this.renderer.listen(this.contentViewChild.nativeElement,"scroll",this.moveBar),this.mouseEnterListener=this.renderer.listen(this.contentViewChild.nativeElement,"mouseenter",this.moveBar),this.xBarMouseDownListener=this.renderer.listen(this.xBarViewChild.nativeElement,"mousedown",this.onXBarMouseDown),this.yBarMouseDownListener=this.renderer.listen(this.yBarViewChild.nativeElement,"mousedown",this.onYBarMouseDown),this.calculateContainerHeight(),this.initialized=!0})}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":this.contentTemplate=t.template;break;default:this.contentTemplate=t.template;break}})}calculateContainerHeight(){let t=this.containerViewChild.nativeElement,r=this.contentViewChild.nativeElement,o=this.xBarViewChild.nativeElement,i=this.document.defaultView,s=i.getComputedStyle(t),a=i.getComputedStyle(o),c=Z.getHeight(t)-parseInt(a.height,10);s["max-height"]!="none"&&c==0&&(r.offsetHeight+parseInt(a.height,10)>parseInt(s["max-height"],10)?t.style.height=s["max-height"]:t.style.height=r.offsetHeight+parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth)+"px")}moveBar(){let t=this.containerViewChild.nativeElement,r=this.contentViewChild.nativeElement,o=this.xBarViewChild.nativeElement,i=r.scrollWidth,s=r.clientWidth,a=(t.clientHeight-o.clientHeight)*-1;this.scrollXRatio=s/i;let c=this.yBarViewChild.nativeElement,l=r.scrollHeight,u=r.clientHeight,d=(t.clientWidth-c.clientWidth)*-1;this.scrollYRatio=u/l,this.requestAnimationFrame(()=>{if(this.scrollXRatio>=1)o.setAttribute("data-p-scrollpanel-hidden","true"),Z.addClass(o,"p-scrollpanel-hidden");else{o.setAttribute("data-p-scrollpanel-hidden","false"),Z.removeClass(o,"p-scrollpanel-hidden");let f=Math.max(this.scrollXRatio*100,10),g=r.scrollLeft*(100-f)/(i-s);o.style.cssText="width:"+f+"%; left:"+g+"%;bottom:"+a+"px;"}if(this.scrollYRatio>=1)c.setAttribute("data-p-scrollpanel-hidden","true"),Z.addClass(c,"p-scrollpanel-hidden");else{c.setAttribute("data-p-scrollpanel-hidden","false"),Z.removeClass(c,"p-scrollpanel-hidden");let f=Math.max(this.scrollYRatio*100,10),g=r.scrollTop*(100-f)/(l-u);c.style.cssText="height:"+f+"%; top: calc("+g+"% - "+o.clientHeight+"px);right:"+d+"px;"}}),this.cd.markForCheck()}onScroll(t){this.lastScrollLeft!==t.target.scrollLeft?(this.lastScrollLeft=t.target.scrollLeft,this.orientation="horizontal"):this.lastScrollTop!==t.target.scrollTop&&(this.lastScrollTop=t.target.scrollTop,this.orientation="vertical"),this.moveBar()}onKeyDown(t){if(this.orientation==="vertical")switch(t.code){case"ArrowDown":{this.setTimer("scrollTop",this.step),t.preventDefault();break}case"ArrowUp":{this.setTimer("scrollTop",this.step*-1),t.preventDefault();break}case"ArrowLeft":case"ArrowRight":{t.preventDefault();break}default:break}else if(this.orientation==="horizontal")switch(t.code){case"ArrowRight":{this.setTimer("scrollLeft",this.step),t.preventDefault();break}case"ArrowLeft":{this.setTimer("scrollLeft",this.step*-1),t.preventDefault();break}case"ArrowDown":case"ArrowUp":{t.preventDefault();break}default:break}}onKeyUp(){this.clearTimer()}repeat(t,r){this.contentViewChild.nativeElement[t]+=r,this.moveBar()}setTimer(t,r){this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,r)},40)}clearTimer(){this.timer&&clearTimeout(this.timer)}bindDocumentMouseListeners(){this.documentMouseMoveListener||(this.documentMouseMoveListener=t=>{this.onDocumentMouseMove(t)},this.document.addEventListener("mousemove",this.documentMouseMoveListener)),this.documentMouseUpListener||(this.documentMouseUpListener=t=>{this.onDocumentMouseUp(t)},this.document.addEventListener("mouseup",this.documentMouseUpListener))}unbindDocumentMouseListeners(){this.documentMouseMoveListener&&(this.document.removeEventListener("mousemove",this.documentMouseMoveListener),this.documentMouseMoveListener=null),this.documentMouseUpListener&&(document.removeEventListener("mouseup",this.documentMouseUpListener),this.documentMouseUpListener=null)}onYBarMouseDown(t){this.isYBarClicked=!0,this.yBarViewChild.nativeElement.focus(),this.lastPageY=t.pageY,this.yBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","true"),Z.addClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","true"),Z.addClass(this.document.body,"p-scrollpanel-grabbed"),this.bindDocumentMouseListeners(),t.preventDefault()}onXBarMouseDown(t){this.isXBarClicked=!0,this.xBarViewChild.nativeElement.focus(),this.lastPageX=t.pageX,this.xBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","false"),Z.addClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","false"),Z.addClass(this.document.body,"p-scrollpanel-grabbed"),this.bindDocumentMouseListeners(),t.preventDefault()}onDocumentMouseMove(t){this.isXBarClicked?this.onMouseMoveForXBar(t):this.isYBarClicked?this.onMouseMoveForYBar(t):(this.onMouseMoveForXBar(t),this.onMouseMoveForYBar(t))}onMouseMoveForXBar(t){let r=t.pageX-this.lastPageX;this.lastPageX=t.pageX,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollLeft+=r/this.scrollXRatio})}onMouseMoveForYBar(t){let r=t.pageY-this.lastPageY;this.lastPageY=t.pageY,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollTop+=r/this.scrollYRatio})}scrollTop(t){let r=this.contentViewChild.nativeElement.scrollHeight-this.contentViewChild.nativeElement.clientHeight;t=t>r?r:t>0?t:0,this.contentViewChild.nativeElement.scrollTop=t}onFocus(t){this.xBarViewChild.nativeElement.isSameNode(t.target)?this.orientation="horizontal":this.yBarViewChild.nativeElement.isSameNode(t.target)&&(this.orientation="vertical")}onBlur(){this.orientation==="horizontal"&&(this.orientation="vertical")}onDocumentMouseUp(t){this.yBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","false"),Z.removeClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.xBarViewChild.nativeElement.setAttribute("data-p-scrollpanel-grabbed","false"),Z.removeClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),this.document.body.setAttribute("data-p-scrollpanel-grabbed","false"),Z.removeClass(this.document.body,"p-scrollpanel-grabbed"),this.unbindDocumentMouseListeners(),this.isXBarClicked=!1,this.isYBarClicked=!1}requestAnimationFrame(t){(window.requestAnimationFrame||this.timeoutFrame)(t)}unbindListeners(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null),this.contentScrollListener&&(this.contentScrollListener(),this.contentScrollListener=null),this.mouseEnterListener&&(this.mouseEnterListener(),this.mouseEnterListener=null),this.xBarMouseDownListener&&(this.xBarMouseDownListener(),this.xBarMouseDownListener=null),this.yBarMouseDownListener&&(this.yBarMouseDownListener(),this.yBarMouseDownListener=null)}ngOnDestroy(){this.initialized&&this.unbindListeners()}refresh(){this.moveBar()}static \u0275fac=function(r){return new(r||n)(te(Pt),te(Ue),te(Ie),te(Mo),te(Se),te(Wn))};static \u0275cmp=se({type:n,selectors:[["p-scrollPanel"]],contentQueries:function(r,o,i){if(r&1&&_o(i,ga,4),r&2){let s;gn(s=mn())&&(o.templates=s)}},viewQuery:function(r,o){if(r&1&&(Ha(fO,5),Ha(pO,5),Ha(gO,5),Ha(mO,5)),r&2){let i;gn(i=mn())&&(o.containerViewChild=i.first),gn(i=mn())&&(o.contentViewChild=i.first),gn(i=mn())&&(o.xBarViewChild=i.first),gn(i=mn())&&(o.yBarViewChild=i.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",step:[2,"step","step",Va]},features:[pn],ngContentSelectors:yO,decls:11,vars:16,consts:[["container",""],["content",""],["xBar",""],["yBar",""],[3,"ngClass","ngStyle"],[1,"p-scrollpanel-wrapper"],[1,"p-scrollpanel-content",3,"mouseenter","scroll"],[4,"ngTemplateOutlet"],["tabindex","0","role","scrollbar",1,"p-scrollpanel-bar","p-scrollpanel-bar-x",3,"mousedown","keydown","keyup","focus","blur"],["tabindex","0","role","scrollbar",1,"p-scrollpanel-bar","p-scrollpanel-bar-y",3,"mousedown","keydown","keyup","focus"]],template:function(r,o){if(r&1){let i=Fu();Qn(),B(0,"div",4,0)(2,"div",5)(3,"div",6,1),Lt("mouseenter",function(){return kt(i),Ot(o.moveBar())})("scroll",function(a){return kt(i),Ot(o.onScroll(a))}),Jn(5),Be(6,vO,1,0,"ng-container",7),P()(),B(7,"div",8,2),Lt("mousedown",function(a){return kt(i),Ot(o.onXBarMouseDown(a))})("keydown",function(a){return kt(i),Ot(o.onKeyDown(a))})("keyup",function(){return kt(i),Ot(o.onKeyUp())})("focus",function(a){return kt(i),Ot(o.onFocus(a))})("blur",function(){return kt(i),Ot(o.onBlur())}),P(),B(9,"div",9,3),Lt("mousedown",function(a){return kt(i),Ot(o.onYBarMouseDown(a))})("keydown",function(a){return kt(i),Ot(o.onKeyDown(a))})("keyup",function(){return kt(i),Ot(o.onKeyUp())})("focus",function(a){return kt(i),Ot(o.onFocus(a))}),P()()}r&2&&(Mr(o.styleClass),ne("ngClass","p-scrollpanel p-component")("ngStyle",o.style),Ae("data-pc-name","scrollpanel"),N(2),Ae("data-pc-section","wrapper"),N(),Ae("data-pc-section","content"),N(3),ne("ngTemplateOutlet",o.contentTemplate),N(),Ae("aria-orientation","horizontal")("aria-valuenow",o.lastScrollLeft)("data-pc-section","barx")("aria-controls",o.contentId),N(2),Ae("aria-orientation","vertical")("aria-valuenow",o.lastScrollTop)("data-pc-section","bary")("aria-controls",o.contentId))},dependencies:[ss,cs,as],styles:[`@layer primeng{.p-scrollpanel-wrapper{overflow:hidden;width:100%;height:100%;position:relative;float:left}.p-scrollpanel-content{height:calc(100% + 18px);width:calc(100% + 18px);padding:0 18px 18px 0;position:relative;overflow:auto;box-sizing:border-box}.p-scrollpanel-bar{position:relative;background:#c1c1c1;border-radius:3px;cursor:pointer;opacity:0;transition:opacity .25s linear}.p-scrollpanel-bar-y{width:9px;top:0}.p-scrollpanel-bar-x{height:9px;bottom:0}.p-scrollpanel-hidden{visibility:hidden}.p-scrollpanel:hover .p-scrollpanel-bar,.p-scrollpanel:active .p-scrollpanel-bar{opacity:1}.p-scrollpanel-grabbed{-webkit-user-select:none;user-select:none}}
`],encapsulation:2,changeDetection:0})}return n})(),jw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=it({type:n});static \u0275inj=ot({imports:[ko]})}return n})();var Vw=(()=>{class n{storageInformation;ngOnInit(){this.getStorageInformation()}areCookiesEnabled(){document.cookie="testcookie=1";let t=document.cookie.indexOf("testcookie=")!==-1;return t&&(document.cookie="testcookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"),t}getStorageInformation(){return p(this,null,function*(){let t=this.isLocalStorageAvailable(),r=this.isSessionStorageAvailable(),o=yield this.getQuotaManagement(),i=this.isIndexedDBAvailable(),s=this.areCookiesEnabled(),a,c;t&&(a=(this.getStorageSpace(localStorage)||0)+" bytes"),r&&(c=(this.getStorageSpace(sessionStorage)||0)+" bytes"),this.storageInformation={localStorageAvailable:t,sessionStorageAvailable:r,localStorageSpace:a,sessionStorageSpace:c,quotaInformation:o,cookiesAllowed:s,indexedDBAvailable:i}})}isLocalStorageAvailable(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch{return!1}}isSessionStorageAvailable(){try{return sessionStorage.setItem("test","test"),sessionStorage.removeItem("test"),!0}catch{return!1}}getStorageSpace(t){let r=0;for(let o in t)t.hasOwnProperty(o)&&(r+=(t[o].length+o.length)*2);return r}isIndexedDBAvailable(){return"indexedDB"in window}getQuotaManagement(){return p(this,null,function*(){if(navigator.storage&&navigator.storage.estimate){let t=yield navigator.storage.estimate(),r=t.quota||0,o=t.usage||0;return{quota:r+" bytes",usage:o+" bytes",usagePercentage:(o/r*100).toFixed(5)+"%"}}else return null})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-storage-test"]],standalone:!0,features:[ge],decls:3,vars:3,consts:[[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"pre",0),ve(1),qe(2,"json"),P()),r&2&&(N(),be("    Storage Information: ",Ke(2,1,o.storageInformation),`
  `))},dependencies:[dt]})}return n})();var $w=(()=>{class n{performanceInformation;memoryInfo;ngOnInit(){this.getPerformanceInformation(),this.getMemoryInfo()}getPageLoadTime(){let[t]=performance.getEntriesByType("navigation");return t?t.loadEventEnd-t.startTime:null}getNavigationTiming(){if(performance.getEntriesByType){let[t]=performance.getEntriesByType("navigation");if(t)return t.duration}return null}getPerformanceInformation(){this.performanceInformation={pageLoadTime:this.getPageLoadTime()?this.getPageLoadTime()+" ms":"N/A",navigationTiming:this.getNavigationTiming()?this.getNavigationTiming()+" ms":"N/A"}}getMemoryInfo(){this.memoryInfo={totalJSHeapSize:performance.memory.totalJSHeapSize+" bytes",usedJSHeapSize:performance.memory.usedJSHeapSize+" bytes",jsHeapSizeLimit:performance.memory.jsHeapSizeLimit+" bytes"}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-performance-test"]],standalone:!0,features:[ge],decls:6,vars:6,consts:[[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"pre",0),ve(1),qe(2,"json"),P(),B(3,"pre",0),ve(4),qe(5,"json"),P()),r&2&&(N(),be("    Performance Information: ",Ke(2,2,o.performanceInformation),`
`),N(3),be("    Memory Information: ",Ke(5,4,o.memoryInfo),`
`))},dependencies:[dt]})}return n})();var Gw=(()=>{class n{securityInfo;ngOnInit(){this.getSecurityInformation()}getSecurityInformation(){let t=window.isSecureContext,r=location.protocol==="https:",o=this.isDoNotTrackEnabled(),i=this.isAdBlockerActive();this.securityInfo={isSecureContext:t,httpsSupported:r,doNotTrackEnabled:o,adBlockerActive:i}}isDoNotTrackEnabled(){return navigator.doNotTrack==="1"||window.doNotTrack==="1"||navigator.msDoNotTrack==="1"}isAdBlockerActive(){let t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox",document.body.appendChild(t);let r=t.offsetHeight===0;return document.body.removeChild(t),r}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-security-test"]],standalone:!0,features:[ge],decls:3,vars:3,consts:[[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"pre",0),ve(1),qe(2,"json"),P()),r&2&&(N(),be("    Security and Privacy Information: ",Ke(2,1,o.securityInfo),`
`))},dependencies:[dt]})}return n})();var zw=(()=>{class n{displayInfo;ngOnInit(){this.getDisplayInformation()}getScreenResolution(){return{width:screen.width+" px",height:screen.height+" px"}}getViewportSize(){return{width:window.innerWidth+" px",height:window.innerHeight+" px"}}getDisplayInformation(){let t=window.devicePixelRatio,r=this.getScreenResolution(),o=this.getViewportSize(),i=screen.colorDepth+" bit",s=screen.pixelDepth+" bit";this.displayInfo={devicePixelRatio:t,getScreenResolution:r,viewPortResolution:o,colorDepth:i,pixelDepth:s}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-display-test"]],standalone:!0,features:[ge],decls:3,vars:3,consts:[[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"pre",0),ve(1),qe(2,"json"),P()),r&2&&(N(),be("    Display Information: ",Ke(2,1,o.displayInfo),`
`))},dependencies:[dt]})}return n})();var qw=(()=>{class n{webApisInfo;ngOnInit(){this.getWebApisInfo()}isGeolocationAvailable(){return"geolocation"in navigator}isWebRTCAvailable(){return"RTCPeerConnection"in window}isWebGLAvailable(){try{let t=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl")))}catch{return!1}}isWebAssemblyAvailable(){return typeof WebAssembly=="object"}arePushNotificationsAvailable(){return"Notification"in window&&"serviceWorker"in navigator}checkPersistence(){return p(this,null,function*(){return navigator.storage&&navigator.storage.persist?(yield navigator.storage.persisted())?"Data is already persistent":(yield navigator.storage.persist())?"Data is now persistent":"Failed to enable persistent storage":"Persistence API is not supported in this browser"})}getWebApisInfo(){return p(this,null,function*(){let t=this.isGeolocationAvailable(),r=this.isWebRTCAvailable(),o=this.isWebGLAvailable(),i=this.isWebAssemblyAvailable(),s=this.arePushNotificationsAvailable(),a=yield this.checkPersistence();this.webApisInfo={geolocation:t,webRTC:r,webGL:o,webAssembly:i,pushNotifications:s,persistence:a}})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-web-apis-test"]],standalone:!0,features:[ge],decls:3,vars:3,consts:[[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"pre",0),ve(1),qe(2,"json"),P()),r&2&&(N(),be("    Web APIs Support Information: ",Ke(2,1,o.webApisInfo),`
`))},dependencies:[dt]})}return n})();var Kw=(()=>{class n{accessibilityInfo;screenReaderDetected=!1;ngOnInit(){this.detectScreenReader()}detectScreenReader(){this.screenReaderDetected=!1;let t=document.getElementById("sr-detection");if(!t)return;t.innerText="Screen reader detection test";let r=new MutationObserver(()=>{this.screenReaderDetected=!0,this.updateAccessibilityInfo()});r.observe(t,{childList:!0}),setTimeout(()=>{r.disconnect(),this.updateAccessibilityInfo()},500)}detectHighContrastMode(){let t=document.createElement("div");t.style.border="1px solid",t.style.borderColor="white black",document.body.appendChild(t);let r=window.getComputedStyle(t),o=r.borderTopColor!==r.borderRightColor;return document.body.removeChild(t),o}updateAccessibilityInfo(){this.accessibilityInfo={screenReaderDetected:this.screenReaderDetected,highContrastModeDetected:this.detectHighContrastMode()}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-accessibility-test"]],standalone:!0,features:[ge],decls:5,vars:3,consts:[["id","accessibility-info"],["id","sr-detection","aria-live","polite","role","status"],[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(et(0,"div",0)(1,"div",1),B(2,"pre",2),ve(3),qe(4,"json"),P()),r&2&&(N(3),be("    Accessibility Information: ",Ke(4,1,o.accessibilityInfo),`
`))},dependencies:[dt],styles:["#sr-detection[_ngcontent-%COMP%]{position:absolute;left:-9999px;top:-9999px;height:1px;width:1px;overflow:hidden}"]})}return n})();var Ww=(()=>{class n{timeInformation;ngOnInit(){this.getTimeInformation()}getTimeInformation(){let t=this.getTimeZone(),r=this.getLocale();this.timeInformation={timeZone:t,locale:r}}getTimeZone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}getLocale(){return Intl.DateTimeFormat().resolvedOptions().locale}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-timezone-test"]],standalone:!0,features:[ge],decls:3,vars:3,consts:[[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"pre",0),ve(1),qe(2,"json"),P()),r&2&&(N(),be("    Time Zone and Locale Information: ",Ke(2,1,o.timeInformation),`
  `))},dependencies:[dt]})}return n})();var EO=()=>({width:"100%",height:"700px"});function IO(n,e){if(n&1){let t=Fu();B(0,"div",4)(1,"button",7),Lt("click",function(){kt(t);let o=He();return Ot(o.runTest())}),P()()}}function TO(n,e){n&1&&(B(0,"div",5)(1,"h2",8),ve(2,"Test is running..."),P(),et(3,"div",9),P())}function wO(n,e){if(n&1&&(B(0,"p-scrollPanel")(1,"div",10)(2,"pre",11),ve(3),qe(4,"json"),P(),B(5,"pre",12),ve(6),qe(7,"json"),P(),et(8,"app-storage-test"),B(9,"pre",12),ve(10),qe(11,"json"),P(),et(12,"app-performance-test")(13,"app-security-test")(14,"app-display-test")(15,"app-web-apis-test")(16,"app-accessibility-test")(17,"app-timezone-test"),P()()),n&2){let t=He();jE(WE(11,EO)),N(3),be("            Browser Information: ",Ke(4,5,t.browserInformation),`
         `),N(3),be("          Network Information:  ",Ke(7,7,t.networkInformation),`
        `),N(4),be("            Service Worker Information: ",Ke(11,9,t.serviceWorkerInformation),`
        `)}}var Yw=(()=>{class n{testIsRunning=!1;testIsFinished=!1;browserInformation;networkInformation;serviceWorkerInformation;serviceWorker;runTest(){return p(this,null,function*(){this.testIsRunning=!0,this.testIsFinished=!1,this.getBrowserInformation(),yield this.getNetworkInfo(),this.checkServiceWorker(),this.testServiceWorker(),setTimeout(()=>{this.testIsRunning=!1,this.testIsFinished=!0},500)})}getBrowserInformation(){return p(this,null,function*(){let t=yield this.isIncognito();this.browserInformation={userAgent:navigator.userAgent,incognito:t}})}getNetworkInfo(){return p(this,null,function*(){let t="N/A";try{t=(yield(yield fetch("https://api.ipify.org?format=json")).json()).ip}catch(c){console.error("Error fetching IP address:",c)}let r=navigator.connection||navigator.mozConnection||navigator.webkitConnection,o=r?r.effectiveType:"N/A",i=r?r.downlink:"N/A",s=r?r.rtt:"N/A",a=r?r.downlinkMax:"N/A";this.networkInformation={ipAddress:t,connectionType:o,downlink:i,rtt:s,downlinkMax:a}})}isServiceWorkerSupported(){return"serviceWorker"in navigator}areServiceWorkersRegistered(){return"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(t=>t.length>0):Promise.resolve(!1)}checkServiceWorker(){return p(this,null,function*(){this.serviceWorkerInformation={serviceWorkerSupported:this.isServiceWorkerSupported(),serviceWorkersRegistered:(yield this.areServiceWorkersRegistered())+" (is returning always false)"}})}isIncognito(){return new Promise(t=>{let r=window.RequestFileSystem||window.webkitRequestFileSystem;if(!r){t(!1);return}r(window.TEMPORARY,100,()=>t(!1),()=>t(!0))})}testServiceWorker(){this.serviceWorker=new Worker("/public/bat-test-sw.js"),this.serviceWorker.postMessage("start"),this.serviceWorker.onmessage=t=>{console.log("serviceWorker",t)}}catch(t){console.error(t)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-bat-test"]],standalone:!0,features:[ge],decls:8,vars:2,consts:[[1,"flex","flex-column","align-content-center","justify-content-center","gap-6"],["styleClass","surface-ground shadow-2"],[1,"flex","flex-row","align-content-start","justify-content-between","w-full"],[1,"text-2xl","font-bold","m-0"],[1,"card","flex","justify-content-center"],[1,"flex","flex-column","items-center","justify-start","gap-2"],[3,"style"],["pButton","","pRipple","","label","Run Test",3,"click"],[1,"text-xl","font-bold"],[1,"spinner"],[1,"flex","flex-column","align-content-center","justify-content-center","gap-2","px-8","py-2"],[1,"bg-primary-reverse",2,"text-wrap","wrap"],[1,"bg-primary-reverse"]],template:function(r,o){r&1&&(B(0,"div",0)(1,"p-toolbar",1)(2,"div",2)(3,"h1",3),ve(4,"BAT Test"),P(),Be(5,IO,2,0,"div",4),P()(),Be(6,TO,4,0,"div",5)(7,wO,18,12,"p-scrollPanel",6),P()),r&2&&(N(5),Ba(o.testIsRunning?-1:5),N(),Ba(o.testIsRunning?6:o.testIsFinished?7:-1))},dependencies:[Bw,Uw,Sh,wh,jw,Hw,dt,Vw,$w,Gw,zw,qw,Kw,Ww]})}return n})();function SO(n,e){if(n&1&&(B(0,"pre"),ve(1),P()),n&2){let t=He();N(),be("            tenantId: ",t.tenantId,`
        `)}}var Qw=(()=>{class n{authorizing=!1;msalService=T(Ti);httpClient=T(Zp);result;tenantId="";token="";aud="";granting=!1;granted=!1;ngOnInit(){this.msalService.initialize(),this.tenantId=localStorage.getItem("tenantId")||"",this.granted=!!localStorage.getItem("tenantId"),this.granted&&(this.token=localStorage.getItem("token")||"")}authorize(){this.authorizing=!0,this.msalService.loginPopup({scopes:["https://manage.office.com/ActivityFeed.Read","https://manage.office.com/ActivityFeed.ReadDlp","https://manage.office.com/ServiceHealth.Read"],prompt:"select_account"}).subscribe({next:t=>{t&&t.tenantId&&t.idTokenClaims&&t.idTokenClaims.aud?(console.log("Login popup result:",t),this.tenantId=t.tenantId,this.token=t.accessToken,this.aud=t.idTokenClaims.aud,localStorage.setItem("token",this.token),localStorage.setItem("account",JSON.stringify(t))):console.error("Invalid result object:",t),this.authorizing=!1,this.result=t},error:t=>{console.error("Login popup error:",t),this.authorizing=!1}})}grantAdminConsent(){this.granting=!0,localStorage.setItem("tenantId",this.tenantId);let t=Math.floor(Math.random()*9e4)+1e4,r=`https://login.microsoftonline.com/${this.tenantId}/v2.0/adminconsent?client_id=${this.aud}&state=${t}&redirect_uri=${window.location.origin}&scope=https://manage.office.com/ActivityFeed.Read https://manage.office.com/ActivityFeed.ReadDlp  https://manage.office.com/ServiceHealth.Read`;window.location.replace(r)}getServices(){this.httpClient.get("http://localhost:3000/proxy/services",{headers:{Authorization:`Bearer ${this.token}`,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,POST,PUT,DELETE, OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Headers, Content-Type, Accept, Authorization","Content-Type":"application/json"},params:{tenantId:this.tenantId}}).subscribe({next:t=>{console.log("GET request result:",t),this.result=t},error:t=>{console.error("GET request error:",t)}})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-msal"]],standalone:!0,features:[ge],decls:10,vars:2,consts:[[1,"flex","flex-column","gap-6","px-8","py-12"],[1,"flex","gap-4"],["pButton","","pRipple","","label","Authorize",3,"click","disabled"],["pButton","","pRipple","","label","Grant admin consent",3,"click"],["pButton","","pRipple","","label","Get services",3,"click"]],template:function(r,o){r&1&&(B(0,"div",0)(1,"h1"),ve(2," Microsoft 365 Test "),P(),B(3,"div",1)(4,"button",2),Lt("click",function(){return o.authorize()}),P(),Be(5,SO,2,1,"pre"),P(),B(6,"div")(7,"button",3),Lt("click",function(){return o.grantAdminConsent()}),P()(),B(8,"div")(9,"button",4),Lt("click",function(){return o.getServices()}),P()()()),r&2&&(N(4),ne("disabled",o.authorizing),N(),Ba(o.tenantId?5:-1))},dependencies:[Sh,wh]})}return n})();var Jw=[{path:"",component:Yw},{path:"msal",component:Qw}];var yl={production:!1,msalConfig:{auth:{clientId:"dc0b40f9-4895-4f7b-942a-4c47ee36ff6e"}},apiConfig:{scopes:["User.Read","ActivityFeed.Read","ActivityFeed.ReadDlp","ServiceHealth.Read"],uri:"https://graph.microsoft.com/v1.0"},b2cPolicies:{names:{signUpSignIn:"",resetPassword:"",editProfile:""},authorities:{signUpSignIn:{authority:"https://login.microsoftonline.com/common"},resetPassword:{authority:""},editProfile:{authority:""}},authorityDomain:""}};function AO(n,e){console.log(e)}function bO(){return new fl({auth:{clientId:yl.msalConfig.auth.clientId,authority:yl.b2cPolicies.authorities.signUpSignIn.authority,redirectUri:"/",postLogoutRedirectUri:"/",knownAuthorities:[yl.b2cPolicies.authorityDomain]},cache:{cacheLocation:me.LocalStorage},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:AO,logLevel:pe.Verbose,piiLoggingEnabled:!1}}})}function DO(){return{interactionType:b.Redirect,authRequest:{scopes:[...yl.apiConfig.scopes]},loginFailedRoute:"/configure/1?failure=true"}}var Zw={providers:[tI({eventCoalescing:!0}),mT(Jw),bI(),Rw,{provide:gl,useFactory:bO},{provide:Eh,useFactory:DO},Ti,ay,Ih]};var Xw=(()=>{class n{title="bat-portal";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["app-root"]],standalone:!0,features:[ge],decls:1,vars:0,template:function(r,o){r&1&&et(0,"router-outlet")},dependencies:[Ug]})}return n})();xI(Xw,Zw).catch(n=>console.error(n));
